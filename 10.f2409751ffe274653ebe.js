(function(){(this||window).webpackJsonp.registerAbsMids({"esri/layers/graphics/data/projectionSupport":1070,"esri/core/libs/rbush/rbush":1076,"esri/layers/graphics/data/utils":1081,"esri/core/libs/quickselect/quickselect":1083,"esri/layers/graphics/data/attributeSupport":1087,"esri/layers/graphics/data/QueryEngine":1094,"esri/geometry/projection":1100,"esri/layers/graphics/centroid":1106,"esri/layers/graphics/data/spatialQuerySupport":1107,"esri/layers/graphics/data/timeSupport":1112,"esri/geometry/pe":1119,"esri/geometry/support/GeographicTransformation":1120,"esri/geometry/support/GeographicTransformationStep":1121,"esri/layers/graphics/data/FeatureStore":1123,"esri/core/ItemCache":1124,"esri/core/sql/WhereClauseCache":1141,"esri/layers/graphics/data/QueryEngineCapabilities":1142,"esri/layers/graphics/contains":1143,"esri/layers/graphics/data/optimizedFeatureQueryEngineAdapter":1144,"esri/layers/graphics/data/executeTileQuery":1159,"esri/layers/graphics/data/BoundsStore":1179,"esri/layers/graphics/data/QueryEngineResult":1184,"esri/layers/graphics/data/AttributesBuilder":1185,"esri/layers/support/PromiseQueue":1186,"esri/layers/graphics/sources/support/clientSideDefaults":1274})})(),(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{1070:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(8),r(9),r(10),r(4),r(1100),r(37),r(35)],void 0===(i=function(e,t,r,n,i,o,s,a,u){Object.defineProperty(t,"__esModule",{value:!0});var l=[0,0];function c(e,t){var r,n,i;if(!t)return null;if("x"in t){var o={x:0,y:0};return r=e(t.x,t.y,l),o.x=r[0],o.y=r[1],null!=t.z&&(o.z=t.z),null!=t.m&&(o.m=t.m),o}return"xmin"in t?(o={xmin:0,ymin:0,xmax:0,ymax:0},n=e(t.xmin,t.ymin,l),o.xmin=n[0],o.ymin=n[1],i=e(t.xmax,t.ymax,l),o.xmax=i[0],o.ymax=i[1],t.hasZ&&(o.zmin=t.zmin,o.zmax=t.zmax,o.hasZ=!0),t.hasM&&(o.mmin=t.mmin,o.mmax=t.mmax,o.hasM=!0),o):"rings"in t?{rings:p(t.rings,e),hasM:t.hasM,hasZ:t.hasZ}:"paths"in t?{paths:p(t.paths,e),hasM:t.hasM,hasZ:t.hasZ}:"points"in t?{points:h(t.points,e),hasM:t.hasM,hasZ:t.hasZ}:void 0}function p(e,t){for(var r=[],n=0,i=e;n<i.length;n++){var o=i[n];r.push(h(o,t))}return r}function h(e,t){for(var r=[],n=0,i=e;n<i.length;n++){var o=i[n],s=t(o[0],o[1],[0,0]);r.push(s),o.length>2&&s.push(o[2]),o.length>3&&s.push(o[3])}return r}function f(e,t){return!(!a.isValid(e)||!a.isValid(t)||a.equals(e,t)||u.canProject(e,t))}t.doesBrowserSupportProjection=function(e,t){return!f(e,t)||s.isSupported()},t.checkProjectionSupport=function(e,t){return n(this,void 0,void 0,(function(){var n,o,a;return r(this,(function(r){if(!t)return[2];if(Array.isArray(e)){for(n=0,o=e;n<o.length;n++)if(f((a=o[n]).geometry&&a.geometry.spatialReference,t)){if(s.isSupported())return[2,s.load()];throw new i("feature-store:unsupported-query","projection not supported",{inSpatialReference:e,outSpatialReference:t})}return[2]}if(!f(e,t))return[2];if(s.isSupported())return[2,s.load()];throw new i("feature-store:unsupported-query","projection not supported",{inSpatialReference:e,outSpatialReference:t})}))}))};var d=c.bind(null,u.lngLatToXY),_=c.bind(null,u.xyToLngLat);t.project=function(e,t,r){return e?(r||(r=t,t=e.spatialReference),a.isValid(t)&&a.isValid(r)&&!a.equals(t,r)?u.canProject(t,r)?a.isWebMercator(r)?d(e):_(e):s.projectMany([e],t,r,null,!0)[0]:e):e};var y=new(function(){function e(){this._jobs=[],this._timer=null,this._process=this._process.bind(this)}return e.prototype.push=function(e,t,i){return n(this,void 0,void 0,(function(){var n,s=this;return r(this,(function(r){return e&&e.length&&t&&i&&!a.equals(t,i)||o.resolve(e),n={geometries:e,inSpatialReference:t,outSpatialReference:i,resolve:null},this._jobs.push(n),[2,o.create((function(e){n.resolve=e,null===s._timer&&(s._timer=setTimeout(s._process,10))}))]}))}))},e.prototype._process=function(){this._timer=null;var e=this._jobs.shift();if(e){var t=e.geometries,r=e.inSpatialReference,n=e.outSpatialReference,i=e.resolve;u.canProject(r,n)?a.isWebMercator(n)?i(t.map(d)):i(t.map(_)):i(s.projectMany(t,r,n,null,!0)),this._jobs.length>0&&(this._timer=setTimeout(this._process,10))}},e}());t.projectMany=function(e,t,i){return n(this,void 0,void 0,(function(){return r(this,(function(r){return[2,y.push(e,t,i)]}))}))}}.apply(null,n))||(e.exports=i)},1076:function(e,t,r){var n,i;n=[r(1083)],void 0===(i=function(e){"use strict";function t(e,r){if(!(this instanceof t))return new t(e,r);this._maxEntries=Math.max(4,e||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),r&&("function"==typeof r?this.toBBox=r:this._initFormat(r)),this.clear()}function r(e,t,r){if(!r)return t.indexOf(e);for(var n=0;n<t.length;n++)if(r(e,t[n]))return n;return-1}function n(e,t){i(e,0,e.children.length,t,e)}function i(e,t,r,n,i){i||(i=h(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var s,a=t;a<r;a++)s=e.children[a],o(i,e.leaf?n(s):s);return i}function o(e,t){return e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY),e}function s(e,t){return e.minX-t.minX}function a(e,t){return e.minY-t.minY}function u(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function l(e){return e.maxX-e.minX+(e.maxY-e.minY)}function c(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function p(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function h(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function f(t,r,n,i,o){for(var s,a=[r,n];a.length;)(n=a.pop())-(r=a.pop())<=i||(s=r+Math.ceil((n-r)/i/2)*i,e(t,s,r,n,o),a.push(r,s,s,n))}return t.prototype={all:function(){return this._all(this.data,[])},search:function(e){var t=this.data,r=[],n=this.toBBox;if(!p(e,t))return r;for(var i,o,s,a,u=[];t;){for(i=0,o=t.children.length;i<o;i++)s=t.children[i],p(e,a=t.leaf?n(s):s)&&(t.leaf?r.push(s):c(e,a)?this._all(s,r):u.push(s));t=u.pop()}return r},collides:function(e){var t=this.data,r=this.toBBox;if(!p(e,t))return!1;for(var n,i,o,s,a=[];t;){for(n=0,i=t.children.length;n<i;n++)if(o=t.children[n],p(e,s=t.leaf?r(o):o)){if(t.leaf||c(e,s))return!0;a.push(o)}t=a.pop()}return!1},load:function(e){if(!e||!e.length)return this;if(e.length<this._minEntries){for(var t=0,r=e.length;t<r;t++)this.insert(e[t]);return this}var n=this._build(e.slice(),0,e.length-1,0);if(this.data.children.length)if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){var i=this.data;this.data=n,n=i}this._insert(n,this.data.height-n.height-1,!0)}else this.data=n;return this},insert:function(e){return e&&this._insert(e,this.data.height-1),this},clear:function(){return this.data=h([]),this},remove:function(e,t){if(!e)return this;for(var n,i,o,s,a=this.data,u=this.toBBox(e),l=[],p=[];a||l.length;){if(a||(a=l.pop(),i=l[l.length-1],n=p.pop(),s=!0),a.leaf&&-1!==(o=r(e,a.children,t)))return a.children.splice(o,1),l.push(a),this._condense(l),this;s||a.leaf||!c(a,u)?i?(n++,a=i.children[n],s=!1):a=null:(l.push(a),p.push(n),n=0,i=a,a=a.children[0])}return this},toBBox:function(e){return e},compareMinX:s,compareMinY:a,toJSON:function(){return this.data},fromJSON:function(e){return this.data=e,this},_all:function(e,t){for(var r=[];e;)e.leaf?t.push.apply(t,e.children):r.push.apply(r,e.children),e=r.pop();return t},_build:function(e,t,r,i){var o,s=r-t+1,a=this._maxEntries;if(s<=a)return n(o=h(e.slice(t,r+1)),this.toBBox),o;i||(i=Math.ceil(Math.log(s)/Math.log(a)),a=Math.ceil(s/Math.pow(a,i-1))),(o=h([])).leaf=!1,o.height=i;var u,l,c,p,d=Math.ceil(s/a),_=d*Math.ceil(Math.sqrt(a));for(f(e,t,r,_,this.compareMinX),u=t;u<=r;u+=_)for(f(e,u,c=Math.min(u+_-1,r),d,this.compareMinY),l=u;l<=c;l+=d)p=Math.min(l+d-1,c),o.children.push(this._build(e,l,p,i-1));return n(o,this.toBBox),o},_chooseSubtree:function(e,t,r,n){for(var i,o,s,a,l,c,p,h,f,d;n.push(t),!t.leaf&&n.length-1!==r;){for(p=h=1/0,i=0,o=t.children.length;i<o;i++)l=u(s=t.children[i]),f=e,d=s,(c=(Math.max(d.maxX,f.maxX)-Math.min(d.minX,f.minX))*(Math.max(d.maxY,f.maxY)-Math.min(d.minY,f.minY))-l)<h?(h=c,p=l<p?l:p,a=s):c===h&&l<p&&(p=l,a=s);t=a||t.children[0]}return t},_insert:function(e,t,r){var n=this.toBBox,i=r?e:n(e),s=[],a=this._chooseSubtree(i,this.data,t,s);for(a.children.push(e),o(a,i);t>=0&&s[t].children.length>this._maxEntries;)this._split(s,t),t--;this._adjustParentBBoxes(i,s,t)},_split:function(e,t){var r=e[t],i=r.children.length,o=this._minEntries;this._chooseSplitAxis(r,o,i);var s=this._chooseSplitIndex(r,o,i),a=h(r.children.splice(s,r.children.length-s));a.height=r.height,a.leaf=r.leaf,n(r,this.toBBox),n(a,this.toBBox),t?e[t-1].children.push(a):this._splitRoot(r,a)},_splitRoot:function(e,t){this.data=h([e,t]),this.data.height=e.height+1,this.data.leaf=!1,n(this.data,this.toBBox)},_chooseSplitIndex:function(e,t,r){var n,o,s,a,l,c,p,h,f,d,_,y,m,g;for(c=p=1/0,n=t;n<=r-t;n++)f=o=i(e,0,n,this.toBBox),d=s=i(e,n,r,this.toBBox),void 0,void 0,void 0,void 0,_=Math.max(f.minX,d.minX),y=Math.max(f.minY,d.minY),m=Math.min(f.maxX,d.maxX),g=Math.min(f.maxY,d.maxY),a=Math.max(0,m-_)*Math.max(0,g-y),l=u(o)+u(s),a<c?(c=a,h=n,p=l<p?l:p):a===c&&l<p&&(p=l,h=n);return h},_chooseSplitAxis:function(e,t,r){var n=e.leaf?this.compareMinX:s,i=e.leaf?this.compareMinY:a;this._allDistMargin(e,t,r,n)<this._allDistMargin(e,t,r,i)&&e.children.sort(n)},_allDistMargin:function(e,t,r,n){e.children.sort(n);var s,a,u=this.toBBox,c=i(e,0,t,u),p=i(e,r-t,r,u),h=l(c)+l(p);for(s=t;s<r-t;s++)a=e.children[s],o(c,e.leaf?u(a):a),h+=l(c);for(s=r-t-1;s>=t;s--)a=e.children[s],o(p,e.leaf?u(a):a),h+=l(p);return h},_adjustParentBBoxes:function(e,t,r){for(var n=r;n>=0;n--)o(t[n],e)},_condense:function(e){for(var t,r=e.length-1;r>=0;r--)0===e[r].children.length?r>0?(t=e[r-1].children).splice(t.indexOf(e[r]),1):this.clear():n(e[r],this.toBBox)},_initFormat:function(e){var t=["return a"," - b",";"];this.compareMinX=new Function("a","b",t.join(e[0])),this.compareMinY=new Function("a","b",t.join(e[1])),this.toBBox=new Function("a","return {minX: a"+e[0]+", minY: a"+e[1]+", maxX: a"+e[2]+", maxY: a"+e[3]+"};")}},t}.apply(null,n))||(e.exports=i)},1081:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(8),r(9),r(12),r(13),r(4),r(53),r(201),r(19),r(329),r(37),r(1106),r(322),r(196),r(1070),r(1107)],void 0===(i=function(e,t,r,n,i,o,s,a,u,l,c,p,h,f,d,_,y){Object.defineProperty(t,"__esModule",{value:!0});var m=new i.default({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});t.QUERY_ENGINE_EMPTY_RESULT=Object.freeze({});var g=new d.default,v=new d.default,P=new d.default,E={esriGeometryPoint:f.convertToPoint,esriGeometryPolyline:f.convertToPolyline,esriGeometryPolygon:f.convertToPolygon,esriGeometryMultipoint:f.convertToMultipoint};function S(e,t,r,n,i){void 0===n&&(n=e.hasZ),void 0===i&&(i=e.hasM);var o=e.hasZ&&n,s=e.hasM&&i;if(r){var a=f.quantizeOptimizedGeometry(P,t,e.hasZ,e.hasM,"esriGeometryPoint",r,n,i);return f.convertToPoint(a,o,s)}return f.convertToPoint(t,o,s)}function I(e,i,s){return n(this,void 0,void 0,(function(){var n,a,p,h,f,d;return r(this,(function(r){switch(r.label){case 0:return e?(n=e.where,e.where=n=n&&n.trim(),(!n||/^1 *= *1$/.test(n)||i&&i===n)&&(e.where=null),e.geometry?[4,x(e)]:[2,e]):[2,null];case 1:return a=r.sent(),e.distance=0,e.units=null,"esriSpatialRelEnvelopeIntersects"===e.spatialRel&&(p=e.geometry.spatialReference,(a=u.getGeometryExtent(a)).spatialReference=p),e.geometry=a,[4,_.checkProjectionSupport(a.spatialReference,s)];case 2:return r.sent(),[4,c.normalizeCentralMeridian(l.fromJSON(a))];case 3:if(h=r.sent()[0],o.isNone(h))throw t.QUERY_ENGINE_EMPTY_RESULT;return f=h.toJSON(),[4,_.project(f,f.spatialReference,s)];case 4:if(!(d=r.sent()))throw t.QUERY_ENGINE_EMPTY_RESULT;return d.spatialReference=s,e.geometry=d,[2,e]}}))}))}function x(e){return n(this,void 0,void 0,(function(){var t,n,i,o,u,l,c,h,f;return r(this,(function(r){switch(r.label){case 0:return t=e.geometry,n=e.distance,i=e.units,null==n?[2,s.resolve(t)]:(o=t.spatialReference,u=i&&m.fromJSON(i)||a.getUnitString(o),o&&(p.isGeographic(o)||p.isWebMercator(o))?(c=t,[3,3]):[3,1]);case 1:return[4,_.checkProjectionSupport(o,p.WGS84).then((function(){return _.project(t,p.WGS84)}))];case 2:c=r.sent(),r.label=3;case 3:return l=c,[4,y.getGeodesicBufferOperator()];case 4:return h=r.sent(),[2,(f=h(l,n,u))?f.toJSON():null]}}))}))}t.transformCentroid=S,t.getCentroid=function(e,t,r){return"esriGeometryPolygon"===e.geometryType&&t&&(t.centroid||t.geometry)?(t.centroid||(t.centroid=h.getCentroidOptimizedGeometry(new d.default,t.geometry,e.hasZ,e.hasM)),S(e,t.centroid,r)):null},t.getGeometry=function(e,t,r,n,i,o){void 0===i&&(i=e.hasZ),void 0===o&&(o=e.hasM);var s=e.hasZ&&i,a=e.hasM&&o,u=t?"coords"in t?t:t.geometry:null;if(!u)return null;if(r){var l=f.generalizeOptimizedGeometry(v,u,e.hasZ,e.hasM,e.geometryType,r,i,o);return n&&(l=f.quantizeOptimizedGeometry(P,l,s,a,e.geometryType,n)),E[e.geometryType](l,s,a)}return n?(l=f.quantizeOptimizedGeometry(P,u,e.hasZ,e.hasM,e.geometryType,n,i,o),E[e.geometryType](l,s,a)):(f.removeZMValues(g,u,e.hasZ,e.hasM,i,o),E[e.geometryType](g,s,a))},t.normalizeQuery=function(e,t,i){return n(this,void 0,void 0,(function(){var n,o,s,a,u;return r(this,(function(r){if(n=e.outFields,o=e.orderByFields,s=e.groupByFieldsForStatistics,a=e.outStatistics,n)for(u=0;u<n.length;u++)n[u]=n[u].trim();if(o)for(u=0;u<o.length;u++)o[u]=o[u].trim();if(s)for(u=0;u<s.length;u++)s[u]=s[u].trim();if(a)for(u=0;u<a.length;u++)a[u].onStatisticField&&(a[u].onStatisticField=a[u].onStatisticField.trim());return e.geometry&&!e.outSR&&(e.outSR=e.geometry.spatialReference),[2,I(e,t,i)]}))}))},t.normalizeFilter=function(e,t,i){return n(this,void 0,void 0,(function(){return r(this,(function(r){return[2,I(e,t,i)]}))}))},t.normalizeQueryLike=I,t.cleanFromGeometryEngine=function(e){return e&&T in e?JSON.parse(JSON.stringify(e,b)):e};var T="_geVersion",b=function(e,t){return e!==T?t:void 0}}.apply(null,n))||(e.exports=i)},1083:function(e,t,r){var n;void 0===(n=function(){"use strict";function e(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function t(e,t){return e<t?-1:e>t?1:0}return function(r,n,i,o,s){!function t(r,n,i,o,s){for(;o>i;){if(o-i>600){var a=o-i+1,u=n-i+1,l=Math.log(a),c=.5*Math.exp(2*l/3),p=.5*Math.sqrt(l*c*(a-c)/a)*(u-a/2<0?-1:1);t(r,n,Math.max(i,Math.floor(n-u*c/a+p)),Math.min(o,Math.floor(n+(a-u)*c/a+p)),s)}var h=r[n],f=i,d=o;for(e(r,i,n),s(r[o],h)>0&&e(r,i,o);f<d;){for(e(r,f,d),f++,d--;s(r[f],h)<0;)f++;for(;s(r[d],h)>0;)d--}0===s(r[i],h)?e(r,i,d):e(r,++d,o),d<=n&&(i=d+1),n<=d&&(o=d-1)}}(r,n,i||0,o||r.length-1,s||t)}}.apply(null,[]))||(e.exports=n)},1087:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(5),r(10),r(65),r(1141)],void 0===(i=function(e,t,r,n,i,o){Object.defineProperty(t,"__esModule",{value:!0});var s=new o.WhereClauseCache(50,500),a="feature-store:unsupported-query",u=i.createSetFromValues(["esriFieldTypeOID","esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeLong","esriFieldTypeDate"]);function l(e,t){return e?s.get(e,t):null}function c(e,t,r,i){void 0===i&&(i=!0);for(var o=[],s=0,u=t;s<u.length;s++){var h=u[s];if("*"!==h&&!e.has(h))if(i){var f=p(h);try{var d=l(f,e);if(!d)throw new n(a,"invalid SQL expression",{where:f});if(!d.isStandardized)throw new n(a,"expression is not standard",{clause:d});c(e,d.fieldNames,"expression contains missing fields")}catch(e){var _=e&&e.details;if(_&&(_.clause||_.where))throw e;_&&_.missingFields?o.push.apply(o,_.missingFields):o.push(h)}}else o.push(h)}if(o.length)throw new n(a,r,{missingFields:o})}function p(e){return e.split(" as ")[0]}t.validateWhere=function(e,t){if(!t)return!0;var r=s.get(t,e);if(!r)throw new n(a,"invalid SQL expression",{where:t});if(!r.isStandardized)throw new n(a,"where clause is not standard",{where:t});return c(e,r.fieldNames,"where clause contains missing fields"),!0},t.validateHaving=function(e,t,r){if(!t)return!0;var i=s.get(t,e);if(!i)throw new n(a,"invalid SQL expression",{having:t});if(!i.isAggregate)throw new n(a,"having does not contain a valid aggregate function",{having:t});var o=i.fieldNames;if(c(e,o,"having contains missing fields"),!i.getExpressions().every((function(t){var n=t.aggregateType,i=t.field,o=e.has(i)&&e.get(i).name;return r.some((function(t){var r=t.onStatisticField,i=t.statisticType;return(e.has(r)&&e.get(r).name)===o&&i.toLowerCase().trim()===n}))})))throw new n(a,"expressions in having should also exist in outStatistics",{having:t});return!0},t.getWhereClause=l,t.validateFields=c,t.getExpressionFromFieldName=p,t.getAliasFromFieldName=function(e){return e.split(" as ")[1]},t.hasInvalidFieldType=function(e,t){var r=t.get(e);return!!r&&!u.has(r.type)}}.apply(null,n))||(e.exports=i)},1094:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(5),r(8),r(9),r(10),r(7),r(335),r(4),r(65),r(53),r(332),r(131),r(337),r(19),r(37),r(1087),r(1070),r(1142),r(1184),r(1107),r(1112),r(1081),r(328),r(1186)],void 0===(i=function(e,t,r,n,i,o,s,a,u,l,c,p,h,f,d,_,y,m,g,v,P,E,S,I,x){Object.defineProperty(t,"__esModule",{value:!0});t.Feature=function(e,t,r,n,i){void 0===t&&(t=null),this.attributes=e,this.geometry=r,this.centroid=n,this.filterFlags=i,this.groupId=-1,this.localId=t};var T=new Set,b=new a.MemCacheStorage(2e6),M=0,R=function(){function e(e){var t=this;this.capabilities={query:g.queryCapabilities},this.geometryType=e.geometryType,this.hasM=e.hasM,this.hasZ=e.hasZ,this.objectIdField=e.objectIdField,this.spatialReference=e.spatialReference,this.definitionExpression=e.definitionExpression,this.featureStore=e.featureStore,this._changeHandle=this.featureStore.events.on("changed",(function(){return t.clearCache()})),this.timeInfo=e.timeInfo,e.cacheSpatialQueries&&(this._geometryQueryCache=new a.MemCache(M+++"$$",b)),this.fieldsIndex=new I(e.fields),e.scheduler&&e.task&&(this._frameQueue=new x.default,this._frameTask=e.scheduler.registerTask(e.task,(function(e){return t._update(e)}),(function(){return t._frameQueue.length>0})))}return e.prototype.destroy=function(){this._frameTask&&(this._frameTask.remove(),this._frameTask=null,this._frameQueue.cancelAll(),this._frameQueue=null),this.clearCache(),this._geometryQueryCache&&this._geometryQueryCache.destroy(),this._changeHandle&&(this._changeHandle.remove(),this._changeHandle=null),this.fieldsIndex.destroy()},Object.defineProperty(e.prototype,"featureAdapter",{get:function(){return this.featureStore.featureAdapter},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fullExtent",{get:function(){var e=this.featureStore.fullBounds;return e?{xmin:e[0],ymin:e[1],xmax:e[2],ymax:e[3],spatialReference:S.cleanFromGeometryEngine(this.spatialReference)}:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"timeExtent",{get:function(){return this.timeInfo?(this._timeExtent||(this._timeExtent=E.getTimeExtent(this.timeInfo,this.featureStore)),this._timeExtent):null},enumerable:!0,configurable:!0}),e.prototype.clearCache=function(){this._geometryQueryCache&&this._geometryQueryCache.clear(),this._allItems=null,this._timeExtent=null},e.prototype.executeQuery=function(e,t){return void 0===e&&(e={}),i(this,void 0,void 0,(function(){var t,r,i,o=this;return n(this,(function(n){switch(n.label){case 0:t=s.clone(e),n.label=1;case 1:return n.trys.push([1,8,,9]),[4,this._schedule((function(){return S.normalizeQuery(t,o.definitionExpression,o.spatialReference)}))];case 2:return t=n.sent(),[4,this._reschedule((function(){return o._checkQuerySupport(t)}))];case 3:return t=n.sent(),[4,this._reschedule((function(){return o._executeGeometryQuery(t)}))];case 4:return r=n.sent(),[4,this._reschedule((function(){return r.executeObjectIdsQuery(t)}))];case 5:return r=n.sent(),[4,this._reschedule((function(){return r.executeTimeQuery(t)}))];case 6:return r=n.sent(),[4,this._reschedule((function(){return r.executeAttributesQuery(t)}))];case 7:return r=n.sent(),[3,9];case 8:if((i=n.sent())!==S.QUERY_ENGINE_EMPTY_RESULT)throw i;return r=new v.default([],null,this),[3,9];case 9:return[2,r.createQueryResponse(t)]}}))}))},e.prototype.executeQueryForCount=function(e,t){return void 0===e&&(e={}),i(this,void 0,void 0,(function(){var t,r,i,o=this;return n(this,(function(n){switch(n.label){case 0:(t=s.clone(e)).returnGeometry=!1,t.returnCentroid=!1,t.outSR=null,n.label=1;case 1:return n.trys.push([1,8,,9]),[4,this._schedule((function(){return S.normalizeQuery(t,o.definitionExpression,o.spatialReference)}))];case 2:return t=n.sent(),[4,this._reschedule((function(){return o._checkQuerySupport(t)}))];case 3:return t=n.sent(),[4,this._reschedule((function(){return o._executeGeometryQuery(t)}))];case 4:return r=n.sent(),[4,this._reschedule((function(){return r.executeObjectIdsQuery(t)}))];case 5:return r=n.sent(),[4,this._reschedule((function(){return r.executeTimeQuery(t)}))];case 6:return r=n.sent(),[4,this._reschedule((function(){return r.executeAttributesQuery(t)}))];case 7:return[2,(r=n.sent()).size];case 8:if((i=n.sent())!==S.QUERY_ENGINE_EMPTY_RESULT)throw i;return[2,0];case 9:return[2]}}))}))},e.prototype.executeQueryForExtent=function(e,t){return void 0===e&&(e={}),i(this,void 0,void 0,(function(){var t,r,i,o,a,u,l,h,f=this;return n(this,(function(n){switch(n.label){case 0:t=s.clone(e),i=t.outSR,n.label=1;case 1:return n.trys.push([1,8,,9]),[4,this._schedule((function(){return S.normalizeQuery(t,f.definitionExpression,f.spatialReference)}))];case 2:return t=n.sent(),[4,this._reschedule((function(){return f._checkQuerySupport(t)}))];case 3:return(t=n.sent()).returnGeometry=!0,t.returnCentroid=!1,t.outSR=null,[4,this._reschedule((function(){return f._executeGeometryQuery(t)}))];case 4:return r=n.sent(),[4,this._reschedule((function(){return r.executeObjectIdsQuery(t)}))];case 5:return r=n.sent(),[4,this._reschedule((function(){return r.executeTimeQuery(t)}))];case 6:return r=n.sent(),[4,this._reschedule((function(){return r.executeAttributesQuery(t)}))];case 7:return r=n.sent(),(o=r.size)?(p.set(O,p.NEGATIVE_INFINITY),this.featureStore.forEachBounds(r.items,(function(e){return p.expand(O,e)}),N),a={xmin:O[0],ymin:O[1],xmax:O[3],ymax:O[4],spatialReference:S.cleanFromGeometryEngine(this.spatialReference)},this.hasZ&&isFinite(O[2])&&isFinite(O[5])&&(a.zmin=O[2],a.zmax=O[5]),(u=m.project(a,r.spatialReference,i)).spatialReference=S.cleanFromGeometryEngine(i||this.spatialReference),u.xmax-u.xmin==0&&(l=c.getMetersPerUnitForSR(u.spatialReference),u.xmin-=l,u.xmax+=l),u.ymax-u.ymin==0&&(l=c.getMetersPerUnitForSR(u.spatialReference),u.ymin-=l,u.ymax+=l),this.hasZ&&null!=u.zmin&&null!=u.zmax&&u.zmax-u.zmin==0&&(l=c.getMetersPerUnitForSR(u.spatialReference),u.zmin-=l,u.zmax+=l),[2,{count:o,extent:u}]):[2,{count:o,extent:null}];case 8:if((h=n.sent())===S.QUERY_ENGINE_EMPTY_RESULT)return[2,{count:0,extent:null}];throw h;case 9:return[2]}}))}))},e.prototype.executeQueryForIds=function(e,t){return void 0===e&&(e={}),i(this,void 0,void 0,(function(){return n(this,(function(r){return[2,this.executeQueryForIdSet(e,t).then((function(e){return l.valuesOfSet(e)}))]}))}))},e.prototype.executeQueryForIdSet=function(e,t){return void 0===e&&(e={}),i(this,void 0,void 0,(function(){var t,r,i,o,a,u=this;return n(this,(function(n){switch(n.label){case 0:(t=s.clone(e)).returnGeometry=!1,t.returnCentroid=!1,t.outSR=null,n.label=1;case 1:return n.trys.push([1,9,,10]),[4,this._schedule((function(){return S.normalizeQuery(t,u.definitionExpression,u.spatialReference)}))];case 2:return t=n.sent(),[4,this._reschedule((function(){return u._checkQuerySupport(t)}))];case 3:return t=n.sent(),[4,this._reschedule((function(){return u._executeGeometryQuery(t)}))];case 4:return r=n.sent(),[4,this._reschedule((function(){return r.executeObjectIdsQuery(t)}))];case 5:return r=n.sent(),[4,this._reschedule((function(){return r.executeTimeQuery(t)}))];case 6:return r=n.sent(),[4,this._reschedule((function(){return r.executeAttributesQuery(t)}))];case 7:return r=n.sent(),i=r.items,o=new Set,[4,this._reschedule((function(){for(var e=0,t=i;e<t.length;e++){var n=t[e];o.add(r.featureAdapter.getObjectId(n))}}))];case 8:return n.sent(),[2,o];case 9:if((a=n.sent())===S.QUERY_ENGINE_EMPTY_RESULT)return[2,new Set];throw a;case 10:return[2]}}))}))},e.prototype.executeQueryForLatestObservations=function(e,t){return void 0===e&&(e={}),i(this,void 0,void 0,(function(){var t,r,i,a=this;return n(this,(function(n){switch(n.label){case 0:if(!this.timeInfo||!this.timeInfo.trackIdField)throw new o("feature-store:unsupported-query","Missing timeInfo or timeInfo.trackIdField",{query:e,timeInfo:this.timeInfo});t=s.clone(e),n.label=1;case 1:return n.trys.push([1,9,,10]),[4,this._schedule((function(){return S.normalizeQuery(t,a.definitionExpression,a.spatialReference)}))];case 2:return t=n.sent(),[4,this._reschedule((function(){return a._checkQuerySupport(t)}))];case 3:return t=n.sent(),[4,this._reschedule((function(){return a._executeGeometryQuery(t)}))];case 4:return r=n.sent(),[4,this._reschedule((function(){return r.executeObjectIdsQuery(t)}))];case 5:return r=n.sent(),[4,this._reschedule((function(){return r.executeTimeQuery(t)}))];case 6:return r=n.sent(),[4,this._reschedule((function(){return r.executeAttributesQuery(t)}))];case 7:return r=n.sent(),[4,this._reschedule((function(){return r.filterLatest()}))];case 8:return r=n.sent(),[3,10];case 9:if((i=n.sent())!==S.QUERY_ENGINE_EMPTY_RESULT)throw i;return r=new v.default([],null,this),[3,10];case 10:return[2,r.createQueryResponse(t)]}}))}))},e.prototype._schedule=function(e){return i(this,void 0,void 0,(function(){return n(this,(function(t){return this._frameQueue?[2,this._frameQueue.push(e)]:[2,e()]}))}))},e.prototype._reschedule=function(e){return i(this,void 0,void 0,(function(){return n(this,(function(t){return this._frameQueue?[2,this._frameQueue.unshift(e)]:[2,e()]}))}))},e.prototype._update=function(e){for(this._budget=e;!e.done&&this._frameQueue&&this._frameQueue.process();)e.madeProgress();this._budget=null},e.prototype._getAll=function(){if(!this._allItems){var e=[];this.featureStore.forEach((function(t){return e.push(t)})),this._allItems=new v.default(e,null,this)}return this._allItems},e.prototype._executeGeometryQuery=function(e){return i(this,void 0,void 0,(function(){var t,r,o,s,a,u,l,c,p,h,f,d,y,m,g,E,S,I,x,T=this;return n(this,(function(b){switch(b.label){case 0:if(t=e.geometry,r=e.outSR,o=e.spatialRel,s=_.isValid(r)&&!_.equals(this.spatialReference,r),(a=this._geometryQueryCache?s?JSON.stringify({geometry:t,spatialRelationship:o,outSpatialReference:r}):JSON.stringify({geometry:t,spatialRelationship:o}):null)&&void 0!==(u=this._geometryQueryCache.get(a)))return[2,u];if(l=function(t){return i(T,void 0,void 0,(function(){var i;return n(this,(function(n){switch(n.label){case 0:return s&&(e.returnGeometry||e.returnCentroid)?[4,t.project(r)]:[3,2];case 1:return i=n.sent(),a&&this._geometryQueryCache.put(a,i,i.size||1),[2,i];case 2:return a&&this._geometryQueryCache.put(a,t,t.size||1),[2,t]}}))}))},!t)return[2,l(this._getAll())];if(c=this.featureAdapter,"esriSpatialRelDisjoint"!==o)return[3,3];if(!(p=this._searchFeatures(this._getQueryBBoxes(t))).length)return[2,l(this._getAll())];for(d=new Set,y=0,m=p;y<m.length;y++)g=m[y],d.add(c.getObjectId(g));return[4,this._reschedule((function(){var e=0;h=new Array(d.size),T.featureStore.forEach((function(t){return h[e++]=t})),f=d}))];case 1:return b.sent(),[4,this._reschedule((function(){return i(T,void 0,void 0,(function(){var e,r,i;return n(this,(function(n){switch(n.label){case 0:return[4,P.getSpatialQueryOperator(o,t,this)];case 1:return e=n.sent(),r=function(t){return!f.has(c.getObjectId(t))||e(c.getGeometry(t))},i=v.default.bind,[4,this._runSpatialFilter(h,r)];case 2:return[2,new(i.apply(v.default,[void 0,n.sent(),t,this]))]}}))}))}))];case 2:return S=b.sent(),[2,l(S)];case 3:return(E=this._searchFeatures(this._getQueryBBoxes(t))).length?this._canExecuteSoloPass(t,e)?[2,l(new v.default(E,t,this))]:[4,P.getSpatialQueryOperator(o,t,this)]:(S=new v.default([],t,this),a&&this._geometryQueryCache.put(a,S,S.size||1),[2,S]);case 4:return I=b.sent(),[4,this._runSpatialFilter(E,(function(e){return I(c.getGeometry(e))}))];case 5:return x=b.sent(),[2,l(new v.default(x,t,this))]}}))}))},e.prototype._runSpatialFilter=function(e,t){return i(this,void 0,void 0,(function(){var r,o,s,a=this;return n(this,(function(u){return t?this._budget?(r=0,o=new Array,s=function(){return i(a,void 0,void 0,(function(){var i;return n(this,(function(n){switch(n.label){case 0:return r<e.length?(i=e[r],t(i)&&o.push(i),this._budget.done?[4,this._reschedule((function(){return s()}))]:[3,2]):[3,3];case 1:n.sent(),n.label=2;case 2:return++r,[3,0];case 3:return[2]}}))}))},[2,this._reschedule((function(){return s()})).then((function(){return o}))]):[2,e.filter((function(e){return t(e)}))]:[2,e]}))}))},e.prototype._canExecuteSoloPass=function(e,t){var r=this.geometryType,n=t.spatialRel;return P.canQueryWithRBush(e)&&("esriSpatialRelEnvelopeIntersects"===n||"esriGeometryPoint"===r&&("esriSpatialRelIntersects"===n||"esriSpatialRelContains"===n||"esriSpatialRelWithin"===n))},e.prototype._getQueryBBoxes=function(e){if(P.canQueryWithRBush(e)){if(d.isExtent(e))return[h.fromValues(e.xmin,e.ymin,e.xmax,e.ymax)];if(d.isPolygon(e))return e.rings.map((function(e){return h.fromValues(Math.min(e[0][0],e[2][0]),Math.min(e[0][1],e[2][1]),Math.max(e[0][0],e[2][0]),Math.max(e[0][1],e[2][1]))}))}return[f.getBoundsXY(h.create(),e)]},e.prototype._searchFeatures=function(e){for(var t=0,r=e;t<r.length;t++){var n=r[t];this.featureStore.forEachInBounds(n,(function(e){T.add(e)}))}var i=new Array(T.size),o=0;return T.forEach((function(e){return i[o++]=e})),T.clear(),i},e.prototype._checkQuerySupport=function(e){return i(this,void 0,void 0,(function(){return n(this,(function(t){if(e.distance<0||null!=e.geometryPrecision||e.multipatchOption||e.pixelSize||e.relationParam||e.text)throw new o("feature-store:unsupported-query","Unsupported query options",{query:e});return[2,u.all([this._checkAttributesQuerySupport(e),this._checkStatisticsQuerySupport(e),P.checkSpatialQuerySupport(e,this.geometryType,this.spatialReference),m.checkProjectionSupport(this.spatialReference,e.outSR)]).then((function(){return e}))]}))}))},e.prototype._checkAttributesQuerySupport=function(e){var t=e.outFields,r=e.orderByFields,n=e.returnDistinctValues;if(r&&r.length>0){var i=r.map((function(e){var t=e.toLowerCase();return t.indexOf(" asc")>-1?t.split(" asc")[0]:t.indexOf(" desc")>-1?t.split(" desc")[0]:e}));y.validateFields(this.fieldsIndex,i,"orderByFields contains missing fields")}if(t&&t.length>0)y.validateFields(this.fieldsIndex,t,"outFields contains missing fields");else if(n)throw new o("feature-store:unsupported-query","outFields should be specified for returnDistinctValues",{query:e});y.validateWhere(this.fieldsIndex,e.where)},e.prototype._checkStatisticsQuerySupport=function(e){return i(this,void 0,void 0,(function(){var t,r,i,s,a,u,l,c,p,h,f;return n(this,(function(n){if(t=e.outStatistics,r=e.groupByFieldsForStatistics,i=e.having,s=r&&r.length,a=t&&t.length,i){if(!s||!a)throw new o("feature-store:unsupported-query","outStatistics and groupByFieldsForStatistics should be specified with having",{query:e});y.validateHaving(this.fieldsIndex,i,t)}if(a){if(t.some((function(e){return"exceedslimit"===e.statisticType})))return[2];for(u=t.map((function(e){return e.onStatisticField})),y.validateFields(this.fieldsIndex,u,"onStatisticFields contains missing fields"),s&&y.validateFields(this.fieldsIndex,r,"groupByFieldsForStatistics contains missing fields"),l=0,c=t;l<c.length;l++)if(p=c[l],h=p.onStatisticField,f=p.statisticType,(!s||"count"!==f)&&h&&y.hasInvalidFieldType(h,this.fieldsIndex))throw new o("feature-store:unsupported-query","outStatistics contains non-numeric fields",{definition:p,query:e})}return[2]}))}))},e}();t.default=R;var N=p.create(),O=p.create()}.apply(null,n))||(e.exports=i)},1100:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(4),r(1119),r(24),r(1120)],void 0===(i=function(e,t,n,i,o,s){Object.defineProperty(t,"__esModule",{value:!0});var a=null;t.isLoaded=function(){return!!a&&i.isLoaded()},t.isSupported=function(){return i.isSupported()};var u=null;t.load=function(){return u||(u=n.create((function(e,t){var n=i.load();r.e(7).then((function(){var o=[r(1091)];(function(r){a=r,n.then((function(){a._enableProjection(i),e()}),(function(e){t(e)}))}).apply(null,o)})).catch(r.oe)})))},t.project=function(e,t,r){return void 0===r&&(r=null),e instanceof Array?0===e.length?[]:c(e,e[0].spatialReference,t,r):c([e],e.spatialReference,t,r)[0]};var l={};function c(e,t,r,n,i){if(void 0===n&&(n=null),void 0===i&&(i=!1),null===n){var u=s.cacheKey(t,r);void 0!==l[u]?n=l[u]:(null===(n=p(t,r,null))&&(n=new s),l[u]=n)}return a._project(e,t,r instanceof o||!1===i?r:new o(r),n,i)}function p(e,t,r){void 0===r&&(r=null);var n=a._getTransformation(e,t,r);return null!==n?s.fromGE(n):null}t.projectMany=c,t.getTransformation=p,t.getTransformations=function(e,t,r){void 0===r&&(r=null);var n=a._getTransformationBySuitability(e,t,r);if(null!==n){for(var i=[],o=0,u=n;o<u.length;o++){var l=u[o];i.push(s.fromGE(l))}return i}return[]}}.apply(null,n))||(e.exports=i)},1106:function(e,t,r){var n,i;n=[r.dj.c(e.i),t],void 0===(i=function(e,t){function r(e,t){return e?t?4:3:t?3:2}function n(e,t,n,i,o,s){for(var a=r(o,s),u=n,l=n+a,c=0,p=0,h=0,f=0,d=0,_=0,y=i-1;_<y;_++,u+=a,l+=a){var m=t[u],g=t[u+1],v=t[u+2],P=t[l],E=t[l+1],S=t[l+2],I=m*E-P*g;f+=I,c+=(m+P)*I,p+=(g+E)*I,o&&(h+=(v+S)*(I=m*S-P*v),d+=I),m<e[0]&&(e[0]=m),m>e[1]&&(e[1]=m),g<e[2]&&(e[2]=g),g>e[3]&&(e[3]=g),o&&(v<e[4]&&(e[4]=v),v>e[5]&&(e[5]=v))}if(f>0&&(f*=-1),d>0&&(d*=-1),!f)return null;var x=[c,p,.5*f];return o&&(x[3]=h,x[4]=.5*d),x}function i(e,t,n,i,l){for(var c=r(i,l),p=t,h=t+c,f=0,d=0,_=0,y=0,m=0,g=n-1;m<g;m++,p+=c,h+=c){var v,P=e[p],E=e[p+1],S=e[p+2],I=e[h],x=e[h+1],T=e[h+2],b=i?s(P,E,S,I,x,T):o(P,E,I,x);b&&(f+=b,i?(d+=b*(v=u(P,E,S,I,x,T))[0],_+=b*v[1],y+=b*v[2]):(d+=b*(v=a(P,E,I,x))[0],_+=b*v[1]))}return f>0?i?[d/f,_/f,y/f]:[d/f,_/f]:n>0?i?[e[t],e[t+1],e[t+2]]:[e[t],e[t+1]]:null}function o(e,t,r,n){var i=r-e,o=n-t;return Math.sqrt(i*i+o*o)}function s(e,t,r,n,i,o){var s=n-e,a=i-t,u=o-r;return Math.sqrt(s*s+a*a+u*u)}function a(e,t,r,n){return[e+.5*(r-e),t+.5*(n-t)]}function u(e,t,r,n,i,o){return[e+.5*(n-e),t+.5*(i-t),r+.5*(o-r)]}Object.defineProperty(t,"__esModule",{value:!0}),t.getCentroidOptimizedGeometry=function(e,t,o,s){if(!t||!t.lengths.length)return null;e.lengths.length&&(e.lengths.length=0),e.coords.length&&(e.coords.length=0);for(var a=e.coords,u=[],l=o?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],c=t.lengths,p=t.coords,h=r(o,s),f=0,d=0,_=c;d<_.length;d++){var y=_[d],m=n(l,p,f,y,o,s);m&&u.push(m),f+=y*h}if(u.sort((function(e,t){var r=e[2]-t[2];return 0===r&&o&&(r=e[4]-t[4]),r})),u.length){var g=6*u[0][2];a[0]=u[0][0]/g,a[1]=u[0][1]/g,o&&(g=6*u[0][4],a[2]=0!==g?u[0][3]/g:0),(a[0]<l[0]||a[0]>l[1]||a[1]<l[2]||a[1]>l[3]||o&&(a[2]<l[4]||a[2]>l[5]))&&(a.length=0)}if(!a.length){var v=t.lengths[0]?i(p,0,c[0],o,s):null;if(!v)return null;a[0]=v[0],a[1]=v[1],o&&v.length>2&&(a[2]=v[2])}return e},t.lineCentroid=i}.apply(null,n))||(e.exports=i)},1107:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(8),r(9),r(10),r(4),r(103),r(207),r(19),r(37),r(1143),r(322),r(196),r(1070),r(1081)],void 0===(i=function(e,t,n,i,o,s,a,u,l,c,p,h,f,d,_){Object.defineProperty(t,"__esModule",{value:!0});var y={esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"intersects",esriSpatialRelIndexIntersects:null,esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:null},m={esriSpatialRelIntersects:!0,esriSpatialRelContains:!0,esriSpatialRelWithin:!0,esriSpatialRelCrosses:!0,esriSpatialRelDisjoint:!0,esriSpatialRelTouches:!0,esriSpatialRelOverlaps:!0,esriSpatialRelEnvelopeIntersects:!0,esriSpatialRelIndexIntersects:!1,esriSpatialRelRelation:!1},g={esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!0},v={esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!1};function P(){return s.create((function(e){return r.e(7).then(function(){var t=[r(1091)];e.apply(null,t)}.bind(this)).catch(r.oe)}))}t.importGeometryEngine=P,t.getGeodesicBufferOperator=function(){return P().then((function(e){return e.geodesicBuffer}))},t.getSpatialQueryOperator=function(e,t,r){if(l.isPolygon(t)&&"esriGeometryPoint"===r.geometryType&&("esriSpatialRelIntersects"===e||"esriSpatialRelContains"===e)){var n=h.convertFromPolygon(new f.default,t,!1,!1);return s.resolve((function(e){return p.polygonContainsPoint(n,!1,!1,e)}))}if(l.isPolygon(t)&&"esriGeometryMultipoint"===r.geometryType){var i=h.convertFromPolygon(new f.default,t,!1,!1);if("esriSpatialRelContains"===e)return s.resolve((function(e){return p.polygonContainsMultipoint(i,!1,!1,e,r.hasZ,r.hasM)}))}if(l.isExtent(t)&&"esriGeometryPoint"===r.geometryType&&("esriSpatialRelIntersects"===e||"esriSpatialRelContains"===e))return s.resolve((function(e){return a.extentContainsPoint(t,_.getGeometry(r,e))}));if(l.isExtent(t)&&"esriGeometryMultipoint"===r.geometryType&&"esriSpatialRelContains"===e)return s.resolve((function(e){return a.extentContainsMultipoint(t,_.getGeometry(r,e))}));if(l.isExtent(t)&&"esriSpatialRelIntersects"===e){var o=u.getExtentIntersector(r.geometryType);return s.resolve((function(e){return o(t,_.getGeometry(r,e))}))}return P().then((function(n){var i=n[y[e]].bind(null,t);return function(e){return i(_.getGeometry(r,e))}}))},t.checkSpatialQuerySupport=function(e,t,r){return i(this,void 0,void 0,(function(){var i,s;return n(this,(function(n){if(i=e.spatialRel,!(s=e.geometry))return[2];if(!0!==m[i])throw new o("feature-store:unsupported-query","Unsupported query spatial relationship",{query:e});if(!c.isValid(s.spatialReference)||!c.isValid(r))return[2];if(!function(e){return!0===g[l.getJsonType(e)]}(s))throw new o("feature-store:unsupported-query","Unsupported query geometry type",{query:e});if(!function(e){return!0===v[e]}(t))throw new o("feature-store:unsupported-query","Unsupported layer geometry type",{query:e});return e.outSR?[2,d.checkProjectionSupport(e.geometry&&e.geometry.spatialReference,e.outSR)]:[2]}))}))},t.canQueryWithRBush=function(e){if(l.isExtent(e))return!0;if(l.isPolygon(e)){for(var t=0,r=e.rings;t<r.length;t++){var n=r[t];if(5!==n.length)return!1;if(n[0][0]!==n[1][0]||n[0][0]!==n[4][0]||n[2][0]!==n[3][0]||n[0][1]!==n[3][1]||n[0][1]!==n[4][1]||n[1][1]!==n[2][1])return!1}return!0}return!1}}.apply(null,n))||(e.exports=i)},1112:function(e,t,r){var n,i;n=[r.dj.c(e.i),t],void 0===(i=function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.getTimeExtent=function(e,t){if(!e)return null;var r=t.featureAdapter,n=e.startTimeField,i=e.endTimeField,o=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;if(n&&i)t.forEach((function(e){var t=r.getAttribute(e,n),a=r.getAttribute(e,i);null==t||isNaN(t)||(o=Math.min(o,t)),null==a||isNaN(a)||(s=Math.max(s,a))}));else{var a=n||i;t.forEach((function(e){var t=r.getAttribute(e,a);null==t||isNaN(t)||(o=Math.min(o,t),s=Math.max(s,t))}))}return{start:o,end:s}},t.getTimeOperator=function(e,t,r){if(!t||!e)return null;var n=e.startTimeField,i=e.endTimeField;if(!n&&!i)return null;var o=t.start,s=t.end;return null==o&&null==s?null:n&&i?function(e,t,r,n,i){if(null!=n&&null!=i&&n===i){var o=n;return function(n){return o>=e.getAttribute(n,t)&&o<=e.getAttribute(n,r)}}return null!=n&&null!=i?function(o){return s=n,a=i,u=e.getAttribute(o,t),l=e.getAttribute(o,r),!(u>a||l<s);var s,a,u,l}:null!=n?function(t){return!(e.getAttribute(t,r)<n)}:null!=i?function(r){return!(e.getAttribute(r,t)>i)}:void 0}(r,n,i,o,s):function(e,t,r,n){return null!=r&&null!=n&&r===n?function(n){return e.getAttribute(n,t)===r}:null!=r&&null!=n?function(i){return e.getAttribute(i,t)>=r&&e.getAttribute(i,t)<=n}:null!=r?function(n){return e.getAttribute(n,t)>=r}:null!=n?function(r){return e.getAttribute(r,t)<=n}:void 0}(r,n||i,o,s)}}.apply(null,n))||(e.exports=i)},1119:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(17),r(15),r(4)],void 0===(i=function(e,t,n,i,o){var s,a,u,l,c,p;function h(e){function r(e,t,r){e[t]=r(e[t])}t._pe=e,a.init(),u.init(),l.init(),c.init(),p.init(),t.PeGCSExtent=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return n(r,e),r.prototype.destroy=function(){t._pe.destroy(this)},r}(t._pe.PeGCSExtent);for(var i=0,o=[t._pe.PeDatum,t._pe.PeGeogcs,t._pe.PeGeogtran,t._pe.PeObject,t._pe.PeParameter,t._pe.PePrimem,t._pe.PeProjcs,t._pe.PeSpheroid,t._pe.PeUnit];i<o.length;i++)r(o[i].prototype,"getName",(function(e){return function(){return e.call(this,new Array(a.PE_NAME_MAX))}}));for(var s=0,h=[t._pe.PeGeogtran,t._pe.PeProjcs];s<h.length;s++)r(h[s].prototype,"getParameters",(function(e){return function(){for(var r=new Array(a.PE_PARM_MAX),n=e.call(this),i=0;i<r.length;i++){var o=t._pe.getValue(n,"*");r[i]=o?t._pe.wrapPointer(o,t._pe.PeParameter):null,n+=Int32Array.BYTES_PER_ELEMENT}return r}}));r(t._pe.PeHorizon.prototype,"getCoord",(function(e){return function(){var t=this.getSize();if(!t)return null;var r=[];return y(r,t,e.call(this)),r}})),r(t._pe.PeGTlistExtendedEntry.prototype,"getEntries",(function(e){var r=t._pe._pe_getPeGTlistExtendedGTsSize();return function(){var n=null,i=e.call(this);if(!t._pe.compare(i,t._pe.NULL)){n=[i];var o=this.getSteps();if(o>1)for(var s=t._pe.getPointer(i),a=1;a<o;a++)n.push(t._pe.wrapPointer(s+r*a,t._pe.PeGTlistExtendedGTs))}return n}}));var f=t._pe._pe_getPeHorizonSize(),d=function(e){return function(){var r=this._cache;if(r||(r=new Map,this._cache=r),r.has(e))return r.get(e);var n=null,i=e.call(this);if(!t._pe.compare(i,t._pe.NULL)){n=[i];var o=i.getNump();if(o>1)for(var s=t._pe.getPointer(i),a=1;a<o;a++)n.push(t._pe.wrapPointer(s+f*a,t._pe.PeHorizon))}return r.set(e,n),n}};r(t._pe.PeProjcs.prototype,"horizonGcsGenerate",d),r(t._pe.PeProjcs.prototype,"horizonPcsGenerate",d),t._pe.PeObject.prototype.toString=function(e){void 0===e&&(e=a.PE_STR_OPTS_NONE),t._pe.ensureCache.prepare();var r=t._pe.getPointer(this),n=t._pe.ensureInt8(new Array(a.PE_BUFFER_MAX));return t._pe.UTF8ToString(t._pe._pe_object_to_string_ext(r,e,n))}}function f(e){if(e){var r=t._pe.getClass(e);if(r){var n=t._pe.getCache(r);if(n){var i=t._pe.getPointer(e);i&&delete n[i]}}}}function d(e,r){for(var n=[],i=new Array(r),o=0;o<e;o++)n.push(t._pe.ensureInt8(i));return n}function _(e){var t;return Array.isArray(e[0])?(t=[],e.forEach((function(e){t.push(e[0],e[1])}))):t=e,t}function y(e,r,n,i){if(void 0===i&&(i=!1),i)for(var o=0;o<2*r;o++)e[o]=t._pe.getValue(n+o*Float64Array.BYTES_PER_ELEMENT,"double");else{var s=0===e.length;for(o=0;o<r;o++)s&&(e[o]=new Array(2)),e[o][0]=t._pe.getValue(n,"double"),e[o][1]=t._pe.getValue(n+Float64Array.BYTES_PER_ELEMENT,"double"),n+=2*Float64Array.BYTES_PER_ELEMENT}}Object.defineProperty(t,"__esModule",{value:!0}),t._pe=null,t.isLoaded=function(){return!!t._pe},t.isSupported=function(){return!!i("esri-wasm")},t.load=function(){return s||(s=o.create((function(t,n){Promise.all([r.e(36),r.e(71)]).then((function(){var i=[r(1200)];(function(r){r({locateFile:function(t){return e.toUrl("./support/"+t)},onAbort:function(e){n(new Error(e))}}).then((function(e){h(e),t()}))}).apply(null,i)})).catch(r.oe)})))},function(e){function r(e,r,n){t._pe.ensureCache.prepare();var i=_(n),o=n===i,s=t._pe.ensureFloat64(i),a=t._pe._pe_geog_to_proj(t._pe.getPointer(e),r,s);return a&&y(n,r,s,o),a}function n(e,t,r){return i(e,t,r,0)}function i(e,r,n,i){t._pe.ensureCache.prepare();var o=_(n),s=n===o,a=t._pe.ensureFloat64(o),u=t._pe._pe_proj_to_geog_center(t._pe.getPointer(e),r,a,i);return u&&y(n,r,a,s),u}e.geogToProj=r,e.projGeog=function(e,t,i,o){switch(o){case a.PE_TRANSFORM_P_TO_G:return n(e,t,i);case a.PE_TRANSFORM_G_TO_P:return r(e,t,i)}return 0},e.projToGeog=n,e.projToGeogCenter=i}(t.PeCSTransformations||(t.PeCSTransformations={})),function(e){e.init=function(){e.PE_BUFFER_MAX=t._pe.PeDefs.prototype.PE_BUFFER_MAX,e.PE_NAME_MAX=t._pe.PeDefs.prototype.PE_NAME_MAX,e.PE_MGRS_MAX=t._pe.PeDefs.prototype.PE_MGRS_MAX,e.PE_USNG_MAX=t._pe.PeDefs.prototype.PE_USNG_MAX,e.PE_DD_MAX=t._pe.PeDefs.prototype.PE_DD_MAX,e.PE_DDM_MAX=t._pe.PeDefs.prototype.PE_DDM_MAX,e.PE_DMS_MAX=t._pe.PeDefs.prototype.PE_DMS_MAX,e.PE_UTM_MAX=t._pe.PeDefs.prototype.PE_UTM_MAX,e.PE_PARM_MAX=t._pe.PeDefs.prototype.PE_PARM_MAX,e.PE_TYPE_NONE=t._pe.PeDefs.prototype.PE_TYPE_NONE,e.PE_TYPE_GEOGCS=t._pe.PeDefs.prototype.PE_TYPE_GEOGCS,e.PE_TYPE_PROJCS=t._pe.PeDefs.prototype.PE_TYPE_PROJCS,e.PE_TYPE_GEOGTRAN=t._pe.PeDefs.prototype.PE_TYPE_GEOGTRAN,e.PE_TYPE_COORDSYS=t._pe.PeDefs.prototype.PE_TYPE_COORDSYS,e.PE_TYPE_UNIT=t._pe.PeDefs.prototype.PE_TYPE_UNIT,e.PE_STR_OPTS_NONE=t._pe.PeDefs.prototype.PE_STR_OPTS_NONE,e.PE_STR_AUTH_NONE=t._pe.PeDefs.prototype.PE_STR_AUTH_NONE,e.PE_STR_AUTH_TOP=t._pe.PeDefs.prototype.PE_STR_AUTH_TOP,e.PE_STR_NAME_CANON=t._pe.PeDefs.prototype.PE_STR_NAME_CANON,e.PE_PARM_X0=t._pe.PeDefs.prototype.PE_PARM_X0,e.PE_PARM_ND=t._pe.PeDefs.prototype.PE_PARM_ND,e.PE_TRANSFORM_1_TO_2=t._pe.PeDefs.prototype.PE_TRANSFORM_1_TO_2,e.PE_TRANSFORM_2_TO_1=t._pe.PeDefs.prototype.PE_TRANSFORM_2_TO_1,e.PE_TRANSFORM_P_TO_G=t._pe.PeDefs.prototype.PE_TRANSFORM_P_TO_G,e.PE_TRANSFORM_G_TO_P=t._pe.PeDefs.prototype.PE_TRANSFORM_G_TO_P,e.PE_HORIZON_RECT=t._pe.PeDefs.prototype.PE_HORIZON_RECT,e.PE_HORIZON_POLY=t._pe.PeDefs.prototype.PE_HORIZON_POLY,e.PE_HORIZON_LINE=t._pe.PeDefs.prototype.PE_HORIZON_LINE,e.PE_HORIZON_DELTA=t._pe.PeDefs.prototype.PE_HORIZON_DELTA}}(a=t.PeDefs||(t.PeDefs={})),function(e){var r={},n={};function i(e,n){var i=null,s=r[e];if(s||(s={},r[e]=s),s.hasOwnProperty(String(n)))i=s[n];else{var a=t._pe.PeFactory.prototype.factoryByType(e,n);t._pe.compare(a,t._pe.NULL)||(i=a,s[n]=i)}return o(i)}function o(e){if(e){var r=e.getType();switch(r){case a.PE_TYPE_GEOGCS:e=t._pe.castObject(e,t._pe.PeGeogcs);break;case a.PE_TYPE_PROJCS:e=t._pe.castObject(e,t._pe.PeProjcs);break;case a.PE_TYPE_GEOGTRAN:e=t._pe.castObject(e,t._pe.PeGeogtran);break;default:r&a.PE_TYPE_UNIT&&(e=t._pe.castObject(e,t._pe.PeUnit))}}return e}e.initialize=function(){t._pe.PeFactory.prototype.initialize(null)},e.coordsys=function(e){return i(a.PE_TYPE_COORDSYS,e)},e.factoryByType=i,e.fromString=function(e,r){var i=null,s=n[e];if(s||(s={},n[e]=s),s.hasOwnProperty(r))i=s[r];else{var a=t._pe.PeFactory.prototype.fromString(e,r);t._pe.compare(a,t._pe.NULL)||(i=a,s[r]=i)}return o(i)},e.geogcs=function(e){return i(a.PE_TYPE_GEOGCS,e)},e.geogtran=function(e){return i(a.PE_TYPE_GEOGTRAN,e)},e.getCode=function(e){return t._pe.PeFactory.prototype.getCode(e)},e.projcs=function(e){return i(a.PE_TYPE_PROJCS,e)},e.unit=function(e){return i(a.PE_TYPE_UNIT,e)}}(t.PeFactory||(t.PeFactory={})),t.PeGCSExtent=null,function(e){var r;e.init=function(){e.PE_GTLIST_OPTS_COMMON=t._pe.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON,r=t._pe._pe_getPeGTlistExtendedEntrySize()},e.getGTlist=function(e,n,i,o,s,a){var u=null,l=new t._pe.PeInteger(a);try{var c=t._pe.PeGTlistExtended.prototype.getGTlist(e,n,i,o,s,l);if((a=l.val)&&(u=[c],a>1))for(var p=t._pe.getPointer(c),h=1;h<a;h++)u.push(t._pe.wrapPointer(p+r*h,t._pe.PeGTlistExtendedEntry))}finally{t._pe.destroy(l)}return u}}(u=t.PeGTlistExtended||(t.PeGTlistExtended={})),function(e){e.destroy=function(e){if(e&&e.length){for(var r=0,n=e;r<n.length;r++){var i=n[r];f(i),i.getEntries().forEach((function(e){f(e);var t=e.getGeogtran();f(t),t.getParameters().forEach(f),[t.getGeogcs1(),t.getGeogcs2()].forEach((function(e){f(e);var t=e.getDatum();f(t),f(t.getSpheroid()),f(e.getPrimem()),f(e.getUnit())}))}))}t._pe.PeGTlistExtendedEntry.prototype.Delete(e[0])}}}(t.PeGTlistExtendedEntry||(t.PeGTlistExtendedEntry={})),function(e){e.geogToGeog=function(e,r,n,i,o){t._pe.ensureCache.prepare();var s=_(n),a=n===s,u=t._pe.ensureFloat64(s),l=0;i&&(l=t._pe.ensureFloat64(i));var c=t._pe._pe_geog_to_geog(t._pe.getPointer(e),r,u,l,o);return c&&y(n,r,u,a),c}}(t.PeGTTransformations||(t.PeGTTransformations={})),function(e){function r(e,r,n,i,o,s){var u,l;switch(t._pe.ensureCache.prepare(),e){case"dd":u=t._pe._pe_geog_to_dd,l=a.PE_DD_MAX;break;case"ddm":u=t._pe._pe_geog_to_ddm,l=a.PE_DDM_MAX;break;case"dms":u=t._pe._pe_geog_to_dms,l=a.PE_DMS_MAX}var c=0;r&&(c=t._pe.getPointer(r));var p=_(i),h=t._pe.ensureFloat64(p),f=d(n,l),y=u(c,n,h,o,t._pe.ensureInt32(f));if(y)for(var m=0;m<n;m++)s[m]=t._pe.UTF8ToString(f[m]);return y}function n(e,r,n,i,o){var s;switch(t._pe.ensureCache.prepare(),e){case"dd":s=t._pe._pe_dd_to_geog;break;case"ddm":s=t._pe._pe_ddm_to_geog;break;case"dms":s=t._pe._pe_dms_to_geog}var a=0;r&&(a=t._pe.getPointer(r));var u=i.map((function(e){return t._pe.ensureString(e)})),l=t._pe.ensureInt32(u),c=t._pe.ensureFloat64(new Array(2*n)),p=s(a,n,l,c);return p&&y(o,n,c),p}e.geog_to_dms=function(e,t,n,i,o){return r("dms",e,t,n,i,o)},e.dms_to_geog=function(e,t,r,i){return n("dms",e,t,r,i)},e.geog_to_ddm=function(e,t,n,i,o){return r("ddm",e,t,n,i,o)},e.ddm_to_geog=function(e,t,r,i){return n("ddm",e,t,r,i)},e.geog_to_dd=function(e,t,n,i,o){return r("dd",e,t,n,i,o)},e.dd_to_geog=function(e,t,r,i){return n("dd",e,t,r,i)}}(t.PeNotationDms||(t.PeNotationDms={})),function(e){e.init=function(){e.PE_MGRS_STYLE_NEW=t._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW,e.PE_MGRS_STYLE_OLD=t._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD,e.PE_MGRS_STYLE_AUTO=t._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO,e.PE_MGRS_180_ZONE_1_PLUS=t._pe.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS,e.PE_MGRS_ADD_SPACES=t._pe.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES},e.geog_to_mgrs_extended=function(e,r,n,i,o,s,u){t._pe.ensureCache.prepare();var l=0;e&&(l=t._pe.getPointer(e));var c=_(n),p=t._pe.ensureFloat64(c),h=d(r,a.PE_MGRS_MAX),f=t._pe.ensureInt32(h),y=t._pe._pe_geog_to_mgrs_extended(l,r,p,i,o,s,f);if(y)for(var m=0;m<r;m++)u[m]=t._pe.UTF8ToString(h[m]);return y},e.mgrs_to_geog_extended=function(e,r,n,i,o){t._pe.ensureCache.prepare();var s=0;e&&(s=t._pe.getPointer(e));var a=n.map((function(e){return t._pe.ensureString(e)})),u=t._pe.ensureInt32(a),l=t._pe.ensureFloat64(new Array(2*r)),c=t._pe._pe_mgrs_to_geog_extended(s,r,u,i,l);return c&&y(o,r,l),c}}(l=t.PeNotationMgrs||(t.PeNotationMgrs={})),function(e){e.geog_to_usng=function(e,r,n,i,o,s,u){t._pe.ensureCache.prepare();var l=0;e&&(l=t._pe.getPointer(e));var c=_(n),p=t._pe.ensureFloat64(c),h=d(r,a.PE_MGRS_MAX),f=t._pe.ensureInt32(h),y=t._pe._pe_geog_to_usng(l,r,p,i,o,s,f);if(y)for(var m=0;m<r;m++)u[m]=t._pe.UTF8ToString(h[m]);return y},e.usng_to_geog=function(e,r,n,i){t._pe.ensureCache.prepare();var o=0;e&&(o=t._pe.getPointer(e));var s=n.map((function(e){return t._pe.ensureString(e)})),a=t._pe.ensureInt32(s),u=t._pe.ensureFloat64(new Array(2*r)),l=t._pe._pe_usng_to_geog(o,r,a,u);return l&&y(i,r,u),l}}(t.PeNotationUsng||(t.PeNotationUsng={})),function(e){e.init=function(){e.PE_UTM_OPTS_NONE=t._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NONE,e.PE_UTM_OPTS_ADD_SPACES=t._pe.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES,e.PE_UTM_OPTS_NS=t._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NS},e.geog_to_utm=function(e,r,n,i,o){t._pe.ensureCache.prepare();var s=0;e&&(s=t._pe.getPointer(e));var u=_(n),l=t._pe.ensureFloat64(u),c=d(r,a.PE_UTM_MAX),p=t._pe.ensureInt32(c),h=t._pe._pe_geog_to_utm(s,r,l,i,p);if(h)for(var f=0;f<r;f++)o[f]=t._pe.UTF8ToString(c[f]);return h},e.utm_to_geog=function(e,r,n,i,o){t._pe.ensureCache.prepare();var s=0;e&&(s=t._pe.getPointer(e));var a=n.map((function(e){return t._pe.ensureString(e)})),u=t._pe.ensureInt32(a),l=t._pe.ensureFloat64(new Array(2*r)),c=t._pe._pe_utm_to_geog(s,r,u,i,l);return c&&y(o,r,l),c}}(c=t.PeNotationUtm||(t.PeNotationUtm={})),function(e){var r=new Map;e.init=function(){e.PE_PCSINFO_OPTION_NONE=t._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE,e.PE_PCSINFO_OPTION_DOMAIN=t._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN,e.PE_POLE_OUTSIDE_BOUNDARY=t._pe.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY,e.PE_POLE_POINT=t._pe.PePCSInfo.prototype.PE_POLE_POINT},e.generate=function(n,i){var o,s;return void 0===i&&(i=e.PE_PCSINFO_OPTION_DOMAIN),r.has(n)&&(s=r.get(n))[i]&&(o=s[i]),o||(o=t._pe.PePCSInfo.prototype.generate(n,i),s||(s=[],r.set(n,s)),s[i]=o),o}}(p=t.PePCSInfo||(t.PePCSInfo={})),function(e){e.version_string=function(){return t._pe.PeVersion.prototype.version_string()}}(t.PeVersion||(t.PeVersion={})),t._init=h}.apply(null,n))||(e.exports=i)},1120:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(1121)],void 0===(i=function(e,t,r){return function(){function e(e){if(this.steps=[],this._cached_projection={},this._chain="",this._gtlistentry=null,e&&e.steps)for(var t=0,n=e.steps;t<n.length;t++){var i=n[t];i instanceof r?this.steps.push(i):this.steps.push(new r({wkid:i.wkid,wkt:i.wkt,isInverse:i.isInverse}))}}return e.cacheKey=function(e,t){return[void 0!==e.wkid&&null!==e.wkid?e.wkid.toString():"-1",void 0!==e.wkt&&null!==e.wkt?e.wkt.toString():"",void 0!==t.wkid&&null!==t.wkid?t.wkid.toString():"-1",void 0!==t.wkt&&null!==t.wkt?t.wkt.toString():""].join(",")},e.fromGE=function(t){for(var n=new e,i="",o=0,s=t.steps;o<s.length;o++){var a=s[o],u=r.fromGE(a);n.steps.push(u),i+=u.uid.toString()+","}return n._cached_projection={},n._gtlistentry=null,n._chain=i,n},e.prototype.getInverse=function(){var t=new e;t.steps=[];for(var r=this.steps.length-1;r>=0;r--){var n=this.steps[r];t.steps.push(n.getInverse())}return t},e.prototype.getGTListEntry=function(){for(var e="",t=0,r=this.steps;t<r.length;t++)e+=r[t].uid.toString()+",";return e!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=e),this._gtlistentry},e.prototype.assignCachedGe=function(t,r,n){this._cached_projection[e.cacheKey(t,r)]=n},e.prototype.getCachedGeTransformation=function(t,r){for(var n="",i=0,o=this.steps;i<o.length;i++)n+=o[i].uid.toString()+",";n!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=n);var s=this._cached_projection[e.cacheKey(t,r)];return void 0===s?null:s},e}()}.apply(null,n))||(e.exports=i)},1121:function(e,t,r){var n,i;n=[r.dj.c(e.i),t],void 0===(i=function(e,t){var r=0;return function(){function e(e){void 0===e&&(e=null),this.uid=r++,e?(this._wkt=void 0!==e.wkt?e.wkt:null,this._wkid=void 0!==e.wkid?e.wkid:-1,this._isInverse=void 0!==e.isInverse&&!0===e.isInverse):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}return e.fromGE=function(t){var r=new e;return r._wkt=t.wkt,r._wkid=t.wkid,r._isInverse=t.isInverse,r},Object.defineProperty(e.prototype,"wkt",{get:function(){return this._wkt},set:function(e){this._wkt=e,this.uid=r++},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"wkid",{get:function(){return this._wkid},set:function(e){this._wkid=e,this.uid=r++},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isInverse",{get:function(){return this._isInverse},set:function(e){this._isInverse=e,this.uid=r++},enumerable:!0,configurable:!0}),e.prototype.getInverse=function(){var t=new e;return t._wkt=this.wkt,t._wkid=this._wkid,t._isInverse=!this.isInverse,t},e}()}.apply(null,n))||(e.exports=i)},1123:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(8),r(9),r(1),r(0),r(10),r(52),r(6),r(13),r(332),r(131),r(37),r(322),r(1179),r(1159),r(1144)],void 0===(i=function(e,t,r,n,i,o,s,a,u,l,c,p,h,f,d,_,y){Object.defineProperty(t,"__esModule",{value:!0});var m=u.getLogger("esri.layers.graphics.data.FeatureStore"),g=function(){function e(e){this.geometryInfo=e,this._boundsStore=new d.BoundsStore,this._featuresById=new Map,this._markedIds=new Set,this.events=new a,this.featureAdapter=y.optimizedFeatureQueryEngineAdapter}return Object.defineProperty(e.prototype,"geometryType",{get:function(){return this.geometryInfo.geometryType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasM",{get:function(){return this.geometryInfo.hasM},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasZ",{get:function(){return this.geometryInfo.hasZ},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numFeatures",{get:function(){return this._featuresById.size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fullBounds",{get:function(){var e=this;if(!this.numFeatures)return null;var t=p.create(p.NEGATIVE_INFINITY);return this._featuresById.forEach((function(r){var n=e._boundsStore.get(r.objectId);n&&(t[0]=Math.min(n[0],t[0]),t[1]=Math.min(n[1],t[1]),t[2]=Math.max(n[2],t[2]),t[3]=Math.max(n[3],t[3]))})),t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"storeStatistics",{get:function(){var e=0;return this._featuresById.forEach((function(t){t.geometry&&t.geometry.coords&&(e+=t.geometry.coords.length)})),{featureCount:this._featuresById.size,vertexCount:e/(this.hasZ?this.hasM?4:3:this.hasM?3:2)}},enumerable:!0,configurable:!0}),e.prototype.add=function(e){this._add(e),this._emitChanged()},e.prototype.addMany=function(e){for(var t=0,r=e;t<r.length;t++){var n=r[t];this._add(n)}this._emitChanged()},e.prototype.clear=function(){this._featuresById.clear(),this._boundsStore.clear(),this._emitChanged()},e.prototype.removeById=function(e){var t=this._featuresById.get(e);return t?(this._remove(t),this._emitChanged(),t):null},e.prototype.removeManyById=function(e){this._boundsStore.invalidateIndex();for(var t=0,r=e;t<r.length;t++){var n=r[t],i=this._featuresById.get(n);i&&this._remove(i)}this._emitChanged()},e.prototype.forEachBounds=function(e,t,r){for(var n=0,i=e;n<i.length;n++){var o=i[n],s=this._boundsStore.get(o.objectId);s&&t(c.fromRect(r,s))}},e.prototype.getFeature=function(e){return this._featuresById.get(e)},e.prototype.has=function(e){return this._featuresById.has(e)},e.prototype.forEach=function(e){this._featuresById.forEach((function(t){return e(t)}))},e.prototype.forEachInBounds=function(e,t){var r=this;this._boundsStore.forEachInBounds(e,(function(e){t(r._featuresById.get(e))}))},e.prototype.startMarkingUsedFeatures=function(){this._boundsStore.invalidateIndex(),this._markedIds.clear()},e.prototype.sweep=function(){var e=this,t=!1;this._featuresById.forEach((function(r,n){e._markedIds.has(n)||(t=!0,e._remove(r))})),this._markedIds.clear(),t&&this._emitChanged()},e.prototype.executeTileQuery=function(e,t,i){return n(this,void 0,void 0,(function(){var n,o,s,a,u,l,c,f,d,y,m,g,v,P;return r(this,(function(r){return n=i.returnGeometry,o=i.returnCentroid,s=i.returnOutline,a=i.pixelBuffer,u=new Set,l=[],c=a*e.resolution,f=p.pad(e.bounds,c,p.create()),_.createTileFeatures(l,u,this.geometryInfo,this,f,n,o,s,{originPosition:"upperLeft",scale:[e.resolution,e.resolution],translate:[e.bounds[0],e.bounds[3]]}),("esriGeometryPoint"===this.geometryType||o)&&(d=h.getInfo(t))&&(y=d.valid,m=y[0],g=y[1],f[0]<m&&(v=p.fromValues(g-c,f[1],g,f[3]),_.createTileFeatures(l,u,this.geometryInfo,this,v,n,o,s,{originPosition:"upperLeft",scale:[e.resolution,e.resolution],translate:[g,e.bounds[3]]})),f[2]>g&&(P=p.fromValues(m,f[1],m+c,f[3]),_.createTileFeatures(l,u,this.geometryInfo,this,P,n,o,s,{originPosition:"upperLeft",scale:[e.resolution,e.resolution],translate:[m-g+e.bounds[0],e.bounds[3]]}))),l.sort((function(e,t){return e.localId-t.localId})),[2,{features:l,objectIds:u}]}))}))},e.prototype._emitChanged=function(){this.events.emit("changed",void 0)},e.prototype._add=function(e){if(e){var t=e.objectId;if(null!=t){var r,n=this._featuresById.get(t);if(this._markedIds.add(t),n?(e.localId=n.localId,r=this._boundsStore.get(t),this._boundsStore.delete(t)):l.isSome(this.onFeatureAdd)&&this.onFeatureAdd(e),!e.geometry||!e.geometry.coords||!e.geometry.coords.length)return this._boundsStore.set(t,null),void this._featuresById.set(t,e);r=f.getBoundsOptimizedGeometry(r||p.create(),e.geometry,this.geometryInfo.hasZ,this.geometryInfo.hasM),this._boundsStore.set(t,r),this._featuresById.set(t,e)}else m.error(new s("featurestore:invalid-feature","feature id is missing",{feature:e}))}},e.prototype._remove=function(e){return l.isSome(this.onFeatureRemove)&&this.onFeatureRemove(e),this._markedIds.delete(e.objectId),this._boundsStore.delete(e.objectId),this._featuresById.delete(e.objectId),e},e}();t.default=g}.apply(null,n))||(e.exports=i)},1124:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(335)],void 0===(i=function(e,t,r){return function(){function e(e,t){this._storage=new r.MemCacheStorage,this._storage.maxSize=e,t&&this._storage.registerRemoveFunc("",t)}return e.prototype.put=function(e,t){this._storage.put(e,t,1,1)},e.prototype.pop=function(e){return this._storage.pop(e)},e.prototype.get=function(e){return this._storage.get(e)},e.prototype.clear=function(){this._storage.clearAll()},e.prototype.destroy=function(){this._storage.clearAll()},e}()}.apply(null,n))||(e.exports=i)},1141:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(1124),r(1002)],void 0===(i=function(e,t,r,n){Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){this._cache=new r(e),this._invalidCache=new r(t)}return e.prototype.get=function(e,t){var r=t.uid+":"+e,i=this._cache.get(r);if(i)return i;if(void 0!==this._invalidCache.get(r))return null;try{var o=n.WhereClause.create(e,t);return this._cache.put(r,o),o}catch(e){return this._invalidCache.put(r,null),null}},e}();t.WhereClauseCache=i}.apply(null,n))||(e.exports=i)},1142:function(e,t,r){var n,i;n=[r.dj.c(e.i),t],void 0===(i=function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.queryCapabilities={supportsStatistics:!0,supportsPercentileStatistics:!1,supportsCentroid:!0,supportsCacheHint:!1,supportsDistance:!0,supportsDistinct:!0,supportsExtent:!0,supportsGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQuantization:!0,supportsQuantizationEditMode:!1,supportsQueryGeometry:!0,supportsResultType:!1,supportsSqlExpression:!0,supportsMaxRecordCountFactor:!1,supportsStandardizedQueriesOnly:!0,supportsQueryByOthers:!0,supportsHistoricMoment:!1,supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!0,maxRecordCountFactor:void 0,maxRecordCount:void 0,standardMaxRecordCount:void 0,tileMaxRecordCount:void 0}}.apply(null,n))||(e.exports=i)},1143:function(e,t,r){var n,i;n=[r.dj.c(e.i),t],void 0===(i=function(e,t){function r(e,t){return e?t?4:3:t?3:2}function n(e,t,n,o,s){if(!e)return!1;for(var a=r(t,n),u=e.coords,l=!1,c=0,p=0,h=e.lengths;p<h.length;p++){var f=h[p];l=i(l,u,a,c,f,o,s),c+=f*a}return l}function i(e,t,r,n,i,o,s){for(var a=e,u=n,l=n,c=n+i*r;l<c;l+=r){(u=l+r)===c&&(u=n);var p=t[l],h=t[l+1],f=t[u],d=t[u+1];(h<s&&d>=s||d<s&&h>=s)&&p+(s-h)/(d-h)*(f-p)<o&&(a=!a)}return a}Object.defineProperty(t,"__esModule",{value:!0}),t.polygonContainsPoint=function(e,t,r,i){return n(e,t,r,i.coords[0],i.coords[1])},t.polygonContainsMultipoint=function(e,t,i,o,s,a){var u=r(s,a),l=o.coords,c=o.lengths;if(!c)return!1;for(var p=0,h=0;p<c.length;p++,h+=u)if(!n(e,t,i,l[h],l[h+1]))return!1;return!0},t.polygonContainsCoords=n}.apply(null,n))||(e.exports=i)},1144:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(1106),r(205),r(196)],void 0===(i=function(e,t,r,n,i){Object.defineProperty(t,"__esModule",{value:!0}),t.optimizedFeatureQueryEngineAdapter={getObjectId:function(e){return e.objectId},getAttributes:function(e){return e.attributes},getAttribute:function(e,t){return e.attributes[t]},cloneWithGeometry:function(e,t){return new n.default(t,e.attributes,null,e.objectId)},getGeometry:function(e){return e.geometry},getCentroid:function(e,t){return e.centroid||(e.centroid=r.getCentroidOptimizedGeometry(new i.default,e.geometry,t.hasZ,t.hasM)),e.centroid}},t.default=t.optimizedFeatureQueryEngineAdapter}.apply(null,n))||(e.exports=i)},1159:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(5),r(8),r(9),r(131),r(322),r(196),r(1094),r(1081)],void 0===(i=function(e,t,r,n,i,o,s,a,u,l){Object.defineProperty(t,"__esModule",{value:!0});var c=new a.default,p={esriGeometryPoint:s.convertToPoint,esriGeometryPolyline:s.convertToPolyline,esriGeometryPolygon:s.convertToPolygon,esriGeometryMultipoint:s.convertToMultipoint};t.executeTileQueryForIds=function(e,t,r){var n=r.pixelBuffer*t.resolution,i=o.pad(t.bounds,n,o.create()),s=[];return e.featureStore.forEachInBounds(i,(function(t){return s.push(e.featureAdapter.getObjectId(t))})),s},t.createTileFeatures=function(e,t,r,n,i,o,s,a,d){var _=p[r.geometryType],y=h[r.geometryType],m="esriGeometryPolygon"===r.geometryType&&!a,g=r.hasZ?r.hasM?4:3:r.hasM?3:2;s&&!o?n.forEachInBounds(i,(function(n){return function(e,t,r,n,i){if(!t.has(r.objectId)){var o=l.getCentroid(n,r,i),s=r.attributes;o&&(t.add(r.objectId),e.push(new u.Feature(s,r.localId,null,o)))}}(e,t,n,r,d)})):o&&!s?n.forEachInBounds(i,(function(r){return function(e,t,r,n,i,o,s,a){if(!t.has(r.objectId)){var l=r.attributes,p=n(f(c,r.geometry,i,o,a,s),!1,!1);p&&(t.add(r.objectId),e.push(new u.Feature(l,r.localId,p,null)))}}(e,t,r,_,g,y,d,m)})):n.forEachInBounds(i,(function(n){return function(e,t,r,n,i,o,s,a,p){if(!t.has(r.objectId)){var h=l.getCentroid(n,r,i),d=r.attributes,_=o(f(c,r.geometry,s,a,p,i),!1,!1);_&&h&&(t.add(r.objectId),e.push(new u.Feature(d,r.localId,_,h)))}}(e,t,n,r,d,_,g,y,m)}))};var h={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0};function f(e,t,r,n,i,o){if(e.lengths.length&&(e.lengths.length=0),e.coords.length&&(e.coords.length=0),!t||!t.coords.length)return null;var a,u,l,c,p=t.coords,h=t.lengths;if(!h.length)return e.coords[0]=s.quantizeX(o,p[0]),e.coords[1]=s.quantizeY(o,p[1]),e.coords.length=r,e;for(var f=0,d=0,_=d,y=0,m=h;y<m.length;y++){var g=m[y];if(!(g<n)){d=_,l=a=s.quantizeX(o,p[f]),c=u=s.quantizeY(o,p[f+1]),e.coords[d]=l,e.coords[d+1]=c,f+=r;var v=(l=s.quantizeX(o,p[f]))-a,P=(c=s.quantizeY(o,p[f+1]))-u,E=P/v;d+=2,e.coords[d]=v,e.coords[d+1]=P,a=l,u=c,f+=r;for(var S=2;S<g;S++){if(l=s.quantizeX(o,p[f]),c=s.quantizeY(o,p[f+1]),l!==a||c!==u){var I=l-a,x=c-u,T=x/I;E!==T&&(isFinite(E)||isFinite(T))||!(i||(P>=0&&x>=0||P<=0&&x<=0)&&(v>=0&&I>=0||v<=0&&I<=0))?(v=I,P=x,d+=2):(v+=I,P+=x),e.coords[d]=v,e.coords[d+1]=P,E=T,a=l,u=c}f+=r}var b=(d+2-_)/2;b>=n&&(e.lengths.push(b),_=d+2)}}return e.coords.length>_&&(e.coords.length=_),e.coords.length?e:null}t.quantizeOptimizedGeometryForDisplay=f}.apply(null,n))||(e.exports=i)},1179:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(15),r(1076),r(38)],void 0===(i=function(e,t,r,n){Object.defineProperty(t,"__esModule",{value:!0});var i={minX:0,minY:0,maxX:0,maxY:0},o=function(){function e(){var e=this;this._indexInvalid=!1,this._boundsToLoad=[],this._boundsById=new Map,this._idByBounds=new Map,this._index=n(9,r("csp-restrictions")?function(e){return{minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}}:["[0]","[1]","[2]","[3]"]),this._loadIndex=function(){if(e._indexInvalid){var t=new Array(e._idByBounds.size),r=0;e._idByBounds.forEach((function(e,n){t[r++]=n})),e._indexInvalid=!1,e._index.clear(),e._index.load(t)}else e._boundsToLoad.length&&(e._index.load(e._boundsToLoad.filter((function(t){return e._idByBounds.has(t)}))),e._boundsToLoad.length=0)}}return e.prototype.clear=function(){this._indexInvalid=!1,this._boundsToLoad.length=0,this._boundsById.clear(),this._idByBounds.clear(),this._index.clear()},e.prototype.delete=function(e){var t=this._boundsById.get(e);this._boundsById.delete(e),t&&(this._idByBounds.delete(t),this._indexInvalid||this._index.remove(t))},e.prototype.forEachInBounds=function(e,t){this._loadIndex();for(var r=0,n=function(e,t){return i.minX=t[0],i.minY=t[1],i.maxX=t[2],i.maxY=t[3],e.search(i)}(this._index,e);r<n.length;r++){var o=n[r];t(this._idByBounds.get(o))}},e.prototype.get=function(e){return this._boundsById.get(e)},e.prototype.has=function(e){return this._boundsById.has(e)},e.prototype.invalidateIndex=function(){this._indexInvalid||(this._indexInvalid=!0,this._boundsToLoad.length=0)},e.prototype.set=function(e,t){if(!this._indexInvalid){var r=this._boundsById.get(e);r&&(this._index.remove(r),this._idByBounds.delete(r))}this._boundsById.set(e,t),t&&(this._idByBounds.set(t,e),this._indexInvalid||(this._boundsToLoad.push(t),this._boundsToLoad.length>5e4&&this._loadIndex()))},e}();t.BoundsStore=o}.apply(null,n))||(e.exports=i)},1184:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(5),r(8),r(9),r(99),r(13),r(4),r(65),r(137),r(37),r(322),r(1185),r(1087),r(1070),r(1112),r(1081)],void 0===(i=function(e,t,r,n,i,o,s,a,u,l,c,p,h,f,d,_,y){Object.defineProperty(t,"__esModule",{value:!0});var m=function(){function e(e,t,r){this.items=e,this.queryGeometry=t,this.definitionExpression=r.definitionExpression,this.geometryType=r.geometryType,this.hasM=r.hasM,this.hasZ=r.hasZ,this.objectIdField=r.objectIdField,this.spatialReference=r.spatialReference,this.fieldsIndex=r.fieldsIndex,this.timeInfo=r.timeInfo,this.featureAdapter=r.featureAdapter}return Object.defineProperty(e.prototype,"size",{get:function(){return this.items.length},enumerable:!0,configurable:!0}),e.prototype.createQueryResponse=function(e){var t;return t=e.outStatistics?e.outStatistics.some((function(e){return"exceedslimit"===e.statisticType}))?this._createExceedsLimitQueryResponse(e):this._createStatisticsQueryResponse(e):this._createFeatureQueryResponse(e),e.returnQueryGeometry&&(c.isValid(e.outSR)&&!c.equals(this.queryGeometry.spatialReference,e.outSR)?t.queryGeometry=y.cleanFromGeometryEngine(r({spatialReference:e.outSR},d.project(this.queryGeometry,this.queryGeometry.spatialReference,e.outSR))):t.queryGeometry=y.cleanFromGeometryEngine(r({spatialReference:e.outSR},this.queryGeometry))),t},e.prototype.executeAttributesQuery=function(t){var r=f.getWhereClause(t.where,this.fieldsIndex);if(!r)return a.resolve(this);if(r.isStandardized){for(var n=0,i=[],o=0,s=this.items;o<s.length;o++){var u=s[o];r.testFeature(u,this.featureAdapter)&&(i[n++]=u)}var l=new e(i,this.queryGeometry,this);return l.definitionExpression=t.where,a.resolve(l)}return a.reject(new TypeError("Where clause is not standardized"))},e.prototype.executeObjectIdsQuery=function(t){if(!t.objectIds||!t.objectIds.length)return a.resolve(this);var r=u.createSetFromValues(t.objectIds),n=this.featureAdapter.getObjectId;return a.resolve(new e(this.items.filter((function(e){return r.has(n(e))})),this.queryGeometry,this))},e.prototype.executeTimeQuery=function(t){var r=_.getTimeOperator(this.timeInfo,t.timeExtent,this.featureAdapter);if(!s.isSome(r))return a.resolve(this);var n=this.items.filter(r);return a.resolve(new e(n,this.queryGeometry,this))},e.prototype.filterLatest=function(){for(var t=this.timeInfo,r=t.trackIdField,n=t.startTimeField,i=t.endTimeField||n,s=new Map,u=this.featureAdapter.getAttribute,l=0,c=this.items;l<c.length;l++){var p=c[l],h=u(p,r),f=u(p,i),d=s.get(h);(!d||f>u(d,i))&&s.set(h,p)}var _=o.valuesOfMap(s);return a.resolve(new e(_,this.queryGeometry,this))},e.prototype.project=function(t){return i(this,void 0,void 0,(function(){var r,i=this;return n(this,(function(n){switch(n.label){case 0:return!t||c.equals(this.spatialReference,t)?[2,this]:(r=this.featureAdapter,[4,d.projectMany(this.items.map((function(e){return y.getGeometry(i,r.getGeometry(e))})),this.spatialReference,t)]);case 1:return[2,new e(n.sent().map((function(e,t){return r.cloneWithGeometry(i.items[t],p.convertFromGeometry(e,i.hasZ,i.hasM))})),this.queryGeometry,{definitionExpression:this.definitionExpression,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,objectIdField:this.objectIdField,spatialReference:t,fieldsIndex:this.fieldsIndex,timeInfo:this.timeInfo,featureAdapter:this.featureAdapter})]}}))}))},e.prototype._createFeatureQueryResponse=function(e){var t=this,r=this.items,n=this,i=n.geometryType,o=n.hasM,s=n.hasZ,a=n.objectIdField,u=n.spatialReference,c=e.outFields,p=e.outSR,h=e.quantizationParameters,f=e.resultRecordCount,d=e.resultOffset,_=e.returnZ,m=e.returnM,g=!1;if(null!=f&&null!=d){var v=d+f;g=r.length>v,r=r.slice(d,Math.min(r.length,v))}var P=c&&(c.indexOf("*")>-1?this.fieldsIndex.fields.slice():c.map((function(e){return t.fieldsIndex.get(e)})));return{exceededTransferLimit:g,features:this._createFeatures(e,r),fields:P,geometryType:i,hasM:o&&m,hasZ:s&&_,objectIdFieldName:a,spatialReference:y.cleanFromGeometryEngine(p||u),transform:h&&l.toQuantizationTransform(h)||null}},e.prototype._createFeatures=function(e,t){var r=new h.default(e,this.featureAdapter,this.fieldsIndex),n=this.hasM,i=this.hasZ,o=e.orderByFields,s=e.quantizationParameters,a=e.returnGeometry,u=e.returnCentroid,c=e.maxAllowableOffset,p=e.returnZ,f=void 0!==p&&p,d=e.returnM,_=i&&f,m=n&&void 0!==d&&d,g=[],v=0;if(t.length&&o&&o.length){var P=o[0].split(" "),E=P[0],S=this.fieldsIndex.get(E),I=P[1]&&"desc"===P[1].toLowerCase();t.sort((function(e,t){var n=r.getFieldValue(e,E,S),i=r.getFieldValue(t,E,S);if("number"==typeof n&&"number"==typeof i)return I?i-n:n-i;if("string"==typeof n&&"string"==typeof i){var o=n.toUpperCase(),s=i.toUpperCase();return(I?o>s:o<s)?-1:(I?o<s:o>s)?1:0}}))}if(a||u){var x=l.toQuantizationTransform(s);if(a&&!u)for(var T=0,b=t;T<b.length;T++)G=b[T],g[v++]={attributes:r.getAttributes(G),geometry:y.getGeometry(this,this.featureAdapter.getGeometry(G),c,x,_,m)};else if(!a&&u)for(var M=0,R=t;M<R.length;M++)G=R[M],g[v++]={attributes:r.getAttributes(G),centroid:y.transformCentroid(this,this.featureAdapter.getCentroid(G,this),x)};else for(var N=0,O=t;N<O.length;N++)G=O[N],g[v++]={attributes:r.getAttributes(G),centroid:y.transformCentroid(this,this.featureAdapter.getCentroid(G,this),x),geometry:y.getGeometry(this,this.featureAdapter.getGeometry(G),c,x,_,m)}}else for(var F=0,w=t;F<w.length;F++){var G=w[F],A=r.getAttributes(G);A&&(g[v++]={attributes:A})}return g},e.prototype._createExceedsLimitQueryResponse=function(e){for(var t=!1,r=Number.POSITIVE_INFINITY,n=Number.POSITIVE_INFINITY,i=Number.POSITIVE_INFINITY,o=0,s=e.outStatistics;o<s.length;o++){var a=s[o];if("exceedslimit"===a.statisticType){r=null!=a.maxPointCount?a.maxPointCount:Number.POSITIVE_INFINITY,n=null!=a.maxRecordCount?a.maxRecordCount:Number.POSITIVE_INFINITY,i=null!=a.maxVertexCount?a.maxVertexCount:Number.POSITIVE_INFINITY;break}}if("esriGeometryPoint"===this.geometryType)t=this.items.length>r;else if(this.items.length>n)t=!0;else{var u=this.hasZ?this.hasM?4:3:this.hasM?3:2,l=this.featureAdapter;t=this.items.reduce((function(e,t){var r=l.getGeometry(t);return e+(r&&r.coords.length||0)}),0)/u>i}return{fields:[{name:"exceedslimit",type:"esriFieldTypeInteger",alias:"exceedslimit",sqlType:"sqlTypeInteger",domain:null,defaultValue:null}],features:[{attributes:{exceedslimit:Number(t)}}]}},e.prototype._createStatisticsQueryResponse=function(e){for(var t=new h.default(e,this.featureAdapter,this.fieldsIndex),r=e.outStatistics,n=[],i=[],o=e.groupByFieldsForStatistics,s=e.having,a=o&&o.length,u=a&&o[0],l=this.fieldsIndex.get(u),c=!l,p={},f={},d={},_={attributes:{}},y=0,m=r;y<m.length;y++){var g=m[y],v=g.outStatisticFieldName,P=g.statisticType,E="exceedslimit"!==P?g.onStatisticField:void 0,S=this.fieldsIndex.get(E),I=a&&(E===u||c)&&"count"===P;if(a){p[E]||(p[E]=this._calculateUniqueValues(t,u,l));var x=p[E];for(var T in x){var b=x[T],M=b.count,R=b.data,N=b.items;if(!s||t.validateItems(N,s)){var O=f[R]||{attributes:{}},F=null;F=I?M:(w=this._calculateStatistics(N,t,E,S))[G="var"===P?"variance":P],O.attributes[v]=F,O.attributes[c?"EXPR_1":u]=R,f[R]=O}}}else{d[E]||(d[E]=this._calculateStatistics(this.items,t,E,S));var w=d[E],G="var"===P?"variance":P;_.attributes[v]=w[G]}i.push({name:v,alias:v,type:"esriFieldTypeDouble"})}if(a)for(var A in f)n.push(f[A]);else n.push(_);return{fields:i,features:n}},e.prototype._calculateStatistics=function(e,t,r,n){for(var i=Number.POSITIVE_INFINITY,o=Number.NEGATIVE_INFINITY,s=null,a=null,u=null,l=null,c=[],p=0,h=0;h<e.length;h++){var f=e[h];"string"==typeof(m=t.getFieldValue(f,r,n))?p++:null==m||isNaN(m)||(s+=m,i=Math.min(i,m),o=Math.max(o,m),c.push(m),p++)}if(p){a=s/p;for(var d=0,_=0,y=c;_<y.length;_++){var m=y[_];d+=Math.pow(m-a,2)}l=p>1?d/(p-1):0,u=Math.sqrt(l)}else i=null,o=null;return{avg:a,count:p,max:o,min:i,stddev:u,sum:s,variance:l}},e.prototype._calculateUniqueValues=function(e,t,r){for(var n={},i=0,o=this.items;i<o.length;i++){var s=o[i],a=e.getFieldValue(s,t,r);(null==a||"string"==typeof a&&""===a.trim())&&(a=null),null==n[a]?n[a]={count:1,data:a,items:[s]}:(n[a].count++,n[a].items.push(s))}return n},e}();t.default=m}.apply(null,n))||(e.exports=i)},1185:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(13),r(1087)],void 0===(i=function(e,t,r,n){Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t,r){this._fieldDataCache=new Map,this._returnDistinctMap=new Map,this.returnDistinctValues=e.returnDistinctValues,this.fieldsIndex=r,this.featureAdapter=t;var i=e.outFields;if(i&&-1===i.indexOf("*")){this.outFields=i;for(var o=0,s=0,a=i;s<a.length;s++){var u=a[s],l=n.getExpressionFromFieldName(u),c=this.fieldsIndex.get(l),p=c?null:n.getWhereClause(l,r),h=c?c.name:n.getAliasFromFieldName(u)||"FIELD_EXP_"+o++;this._fieldDataCache.set(u,{alias:h,clause:p})}}}return e.prototype.getAttributes=function(e){var t=this._processAttributesForOutFields(e);return this._processAttributesForDistinctValues(t)},e.prototype.getFieldValue=function(e,t,r){var i=r?r.name:t,o=null;return this._fieldDataCache.has(i)?o=this._fieldDataCache.get(i).clause:r||(o=n.getWhereClause(t,this.fieldsIndex),this._fieldDataCache.set(i,{alias:i,clause:o})),r?this.featureAdapter.getAttribute(e,i):o.calculateValue(e,this.featureAdapter)},e.prototype.validateItem=function(e,t){return this._fieldDataCache.has(t)||this._fieldDataCache.set(t,{alias:t,clause:n.getWhereClause(t,this.fieldsIndex)}),this._fieldDataCache.get(t).clause.testFeature(e,this.featureAdapter)},e.prototype.validateItems=function(e,t){return this._fieldDataCache.has(t)||this._fieldDataCache.set(t,{alias:t,clause:n.getWhereClause(t,this.fieldsIndex)}),this._fieldDataCache.get(t).clause.testSet(e,this.featureAdapter)},e.prototype._processAttributesForOutFields=function(e){var t=this.outFields;if(!t||!t.length)return this.featureAdapter.getAttributes(e);for(var r={},n=0,i=t;n<i.length;n++){var o=i[n],s=this._fieldDataCache.get(o),a=s.alias,u=s.clause;r[a]=u?u.calculateValue(e,this.featureAdapter):this.featureAdapter.getAttribute(e,a)}return r},e.prototype._processAttributesForDistinctValues=function(e){if(r.isNone(e)||!this.returnDistinctValues)return e;var t=this.outFields,n=[];if(t)for(var i=0,o=t;i<o.length;i++){var s=o[i],a=this._fieldDataCache.get(s).alias;n.push(e[a])}else for(var a in e)n.push(e[a]);var u=(t||["*"]).join(",")+"="+n.join(","),l=this._returnDistinctMap.get(u)||0;return this._returnDistinctMap.set(u,++l),l>1?null:e},e}();t.default=i}.apply(null,n))||(e.exports=i)},1186:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(4)],void 0===(i=function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){this._tasks=new Array}return Object.defineProperty(e.prototype,"length",{get:function(){return this._tasks.length},enumerable:!0,configurable:!0}),e.prototype.push=function(e){var t=this;return r.create((function(r,n){return t._tasks.push(new i(r,n,e))}))},e.prototype.unshift=function(e){var t=this;return r.create((function(r,n){return t._tasks.unshift(new i(r,n,e))}))},e.prototype.process=function(){if(0===this._tasks.length)return!1;var e=this._tasks.shift();try{var t=e.callback();t&&"then"in t&&"function"==typeof t.then?t.then(e.resolve,e.reject):e.resolve(t)}catch(t){e.reject(t)}return!0},e.prototype.cancelAll=function(){for(var e=r.createAbortError(),t=0,n=this._tasks;t<n.length;t++)n[t].reject(e);this._tasks.length=0},e}();t.default=n;var i=function(e,t,r){this.resolve=e,this.reject=t,this.callback=r}}.apply(null,n))||(e.exports=i)},1274:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(5),r(15),r(7),r(393)],void 0===(i=function(e,t,r,n,i,o){Object.defineProperty(t,"__esModule",{value:!0}),t.createDrawingInfo=function(e){return{renderer:{type:"simple",symbol:"esriGeometryPoint"===e||"esriGeometryMultipoint"===e?o.defaultPointSymbolJSON:"esriGeometryPolyline"===e?o.defaultPolylineSymbolJSON:o.defaultPolygonSymbolJSON}}},t.createDefaultAttributesFunction=function(e,t){if(n("csp-restrictions"))return function(){var n;return r(((n={})[t]=null,n),e)};try{var i="this."+t+" = null;";for(var o in e)i+="this."+o+" = "+JSON.stringify(e[o])+";";var s=new Function(i);return function(){return new s}}catch(n){return function(){var n;return r(((n={})[t]=null,n),e)}}},t.createDefaultTemplate=function(e){return void 0===e&&(e={}),[{name:"New Feature",description:"",prototype:{attributes:i.clone(e)}}]}}.apply(null,n))||(e.exports=i)}}]);