(function(){(this||window).webpackJsonp.registerAbsMids({"esri/layers/graphics/sources/geojson/GeoJSONSourceWorker":1036,"esri/layers/graphics/sources/support/sourceUtils":1275,"esri/layers/graphics/sources/geojson/geojson":1726,"esri/core/tsSupport/valuesHelper":1727})})(),(window.webpackJsonp=window.webpackJsonp||[]).push([[70],{1036:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(8),r(5),r(9),r(31),r(10),r(4),r(19),r(37),r(322),r(1123),r(1070),r(1094),r(1726),r(1274),r(1275),r(328),r(371),r(28)],void 0===(i=function(e,t,r,n,i,s,o,u,a,l,d,c,p,f,y,h,g,m,v,b){Object.defineProperty(t,"__esModule",{value:!0});var F={hasAttachments:!1,capabilities:"query, editing, create, delete, update",useStandardizedQueries:!0,supportsCoordinatesQuantization:!0,supportsReturningQueryGeometry:!0,advancedQueryCapabilities:{supportsQueryAttachments:!1,supportsStatistics:!0,supportsReturningGeometryCentroid:!0,supportsQueryWithDistance:!0,supportsDistinct:!0,supportsReturningQueryExtent:!0,supportsReturningGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQueryWithResultType:!1,supportsSqlExpression:!0,supportsDisjointSpatialRel:!0}},I=function(){function e(){this._queryEngine=null}return e.prototype.destroy=function(){this._queryEngine&&this._queryEngine&&this._queryEngine.destroy(),this._queryEngine=this._requiredFields=this._fieldsIndex=this._createDefaultAttributes=null},e.prototype.load=function(e){return i(this,void 0,void 0,(function(){var t,i,u,a,g,I,j,E,w,_,T,S,x,q,O,P,R,G,D,k,M,N,A,J,Q,C;return r(this,(function(r){switch(r.label){case 0:return t=[],[4,this._checkProjection(e.spatialReference)];case 1:return r.sent(),i=null,e.url?[4,s(e.url,{responseType:"json"})]:[3,4];case 2:return u=r.sent(),i=u.data,[4,y.validateGeoJSON(i)];case 3:r.sent(),r.label=4;case 4:if(a=y.inferLayerProperties(i,{geometryType:e.geometryType}),g=e.fields||a.fields||[],I=null!=e.hasZ?e.hasZ:a.hasZ,j=a.geometryType,E=e.objectIdField||("number"===a.objectIdFieldType?a.objectIdFieldName:"OBJECTID")||"OBJECTID",w=e.spatialReference||l.WGS84,_=e.timeInfo,!j)throw new o("geojson-layer:missing-property","geometryType not set and couldn't be inferred from the provided features");for("string"===a.objectIdFieldType&&t.push({name:"geojson-layer:unsupported-id-type",message:"Feature ids are of type string and can't be honored."}),g===a.fields&&a.unknownFields.length>0&&t.push({name:"geojson-layer:unknown-field-types",message:"Some fields types couldn't be inferred from the features and were dropped",details:{unknownFields:a.unknownFields}}),E&&(T=null,g.some((function(e){return e.name===E&&(T=e,!0)}))?(T.type="esriFieldTypeOID",T.editable=!1,T.nullable=!1):g.unshift({alias:E,name:E,type:"esriFieldTypeOID",editable:!1,nullable:!1})),S=0,x=g;S<x.length;S++){if(null==(R=x[S]).name&&(R.name=R.alias),null==R.alias&&(R.alias=R.name),!R.name)throw new o("geojson-layer:invalid-field-name","field name is missing",{field:R});if(R.name===E&&(R.type="esriFieldTypeOID"),-1===v.kebabDict.jsonValues.indexOf(R.type))throw new o("geojson-layer:invalid-field-type",'invalid type for field "'+R.name+'"',{field:R})}for(q={},this._requiredFields=[],O=0,P=g;O<P.length;O++)"esriFieldTypeOID"!==(R=P[O]).type&&"esriFieldTypeGlobalID"!==R.type&&(R.editable=null==R.editable||!!R.editable,R.nullable=null==R.nullable||!!R.nullable,G=b.getFieldDefaultValue(R),R.nullable||void 0!==G?q[R.name]=G:this._requiredFields.push(R));if(this._fieldsIndex=new m(g),_&&(_.startTimeField&&((D=this._fieldsIndex.get(_.startTimeField))?(_.startTimeField=D.name,D.type="esriFieldTypeDate"):_.startTimeField=null),_.endTimeField&&((k=this._fieldsIndex.get(_.endTimeField))?(_.endTimeField=k.name,k.type="esriFieldTypeDate"):_.endTimeField=null),_.trackIdField&&((M=this._fieldsIndex.get(_.trackIdField))?_.trackIdField=M.name:(_.trackIdField=null,t.push({name:"geojson-layer:invalid-timeInfo-trackIdField",message:"trackIdField is missing",details:{timeInfo:_}}))),_.startTimeField||_.endTimeField||(t.push({name:"geojson-layer:invalid-timeInfo",message:"startTimeField and endTimeField are missing",details:{timeInfo:_}}),_=null)),N={warnings:t,featureErrors:[],layerDefinition:n({},F,{drawingInfo:h.createDrawingInfo(j),templates:h.createDefaultTemplate(q),extent:null,geometryType:j,objectIdField:E,fields:g,hasZ:!!I,timeInfo:_})},this._queryEngine=new f.default({fields:g,geometryType:j,hasM:!1,hasZ:I,objectIdField:E,spatialReference:w,timeInfo:_,featureStore:new c.default({geometryType:j,hasM:!1,hasZ:I})}),this._createDefaultAttributes=h.createDefaultAttributesFunction(q,E),this._nextObjectId=a.maxObjectId+1,A=y.createOptimizedFeatures(i,{geometryType:j,hasZ:I,objectIdFieldName:"number"===a.objectIdFieldType?E:null}),!l.equals(w,l.WGS84))for(J=0,Q=A;J<Q.length;J++)(C=Q[J]).geometry&&(C.geometry=d.convertFromGeometry(p.project(d.convertToGeometry(C.geometry,j,I,!1),l.WGS84,w)));return this._loadInitialFeatures(N,A),[2,N]}}))}))},e.prototype.applyEdits=function(e){return i(this,void 0,void 0,(function(){var t,n,i;return r(this,(function(r){switch(r.label){case 0:return t=this._queryEngine,n=t.spatialReference,i=t.geometryType,[4,u.all([g.loadGeometryEngineForSimplify(i),p.checkProjectionSupport(e.adds,n),p.checkProjectionSupport(e.updates,n)])];case 1:return r.sent(),[2,this._applyEdits(e)]}}))}))},e.prototype.queryFeatures=function(e,t){return void 0===e&&(e={}),void 0===t&&(t={}),i(this,void 0,void 0,(function(){return r(this,(function(r){return[2,this._queryEngine.executeQuery(e,t.signal)]}))}))},e.prototype.queryFeatureCount=function(e,t){return void 0===e&&(e={}),void 0===t&&(t={}),i(this,void 0,void 0,(function(){return r(this,(function(r){return[2,this._queryEngine.executeQueryForCount(e,t.signal)]}))}))},e.prototype.queryObjectIds=function(e,t){return void 0===e&&(e={}),void 0===t&&(t={}),i(this,void 0,void 0,(function(){return r(this,(function(r){return[2,this._queryEngine.executeQueryForIds(e,t.signal)]}))}))},e.prototype.queryExtent=function(e,t){return void 0===e&&(e={}),void 0===t&&(t={}),i(this,void 0,void 0,(function(){return r(this,(function(r){return[2,this._queryEngine.executeQueryForExtent(e,t.signal)]}))}))},e.prototype._loadInitialFeatures=function(e,t){for(var r=this._queryEngine,n=r.featureStore,i=r.objectIdField,s=[],o=0,u=t;o<u.length;o++){var a=u[o],l=this._createDefaultAttributes(),d=g.mixAttributes(this._fieldsIndex,this._requiredFields,l,a.attributes,!0,e.warnings);d?e.featureErrors.push(d):(this._assignObjectId(l,a.attributes,!0),a.attributes=l,a.objectId=l[i],s.push(a))}if(n.addMany(s),e.layerDefinition.extent=this._queryEngine.fullExtent,e.layerDefinition.timeInfo){var c=this._queryEngine.timeExtent,p=c.start,f=c.end;e.layerDefinition.timeInfo.timeExtent=[p,f]}return e},e.prototype._applyEdits=function(e){var t=e.adds,r=e.updates,n=e.deletes,i={addResults:[],deleteResults:[],updateResults:[],uidToObjectId:{}};if(t&&t.length&&this._applyAddEdits(i,t),r&&r.length&&this._applyUpdateEdits(i,r),n&&n.length){for(var s=0,o=n;s<o.length;s++){var u=o[s];i.deleteResults.push(g.createFeatureEditSuccessResult(u))}this._queryEngine.featureStore.removeManyById(n)}return{fullExtent:this._queryEngine.fullExtent,timeExtent:this._queryEngine.timeExtent,featureEditResults:i}},e.prototype._applyAddEdits=function(e,t){for(var r=e.addResults,n=this._queryEngine,i=n.geometryType,s=n.hasM,o=n.hasZ,u=n.objectIdField,l=n.spatialReference,c=n.featureStore,f=[],y=0,h=t;y<h.length;y++){var m=h[y];if(m.geometry&&i!==a.getJsonType(m.geometry))r.push(g.createFeatureEditErrorResult("Incorrect geometry type."));else{var v=this._createDefaultAttributes(),b=g.mixAttributes(this._fieldsIndex,this._requiredFields,v,m.attributes);if(b)r.push(b);else{if(this._assignObjectId(v,m.attributes),m.attributes=v,null!=m.uid){var F=m.attributes[u];e.uidToObjectId[m.uid]=F}m.geometry&&(m.geometry=p.project(g.simplify(m.geometry,l),m.geometry.spatialReference,l)),f.push(m),r.push(g.createFeatureEditSuccessResult(m.attributes[u]))}}}c.addMany(d.convertFromFeatures([],f,i,o,s,u))},e.prototype._applyUpdateEdits=function(e,t){for(var r=e.updateResults,n=this._queryEngine,i=n.geometryType,s=n.hasM,o=n.hasZ,u=n.objectIdField,l=n.spatialReference,c=n.featureStore,f=0,y=t;f<y.length;f++){var h=y[f],m=h.attributes,v=h.geometry,b=m&&m[u];if(null!=b)if(c.has(b)){var F=d.convertToFeature(c.getFeature(b),i,o,s);if(v){if(i!==a.getJsonType(v)){r.push(g.createFeatureEditErrorResult("Incorrect geometry type."));continue}F.geometry=p.project(g.simplify(v,l),v.spatialReference,l)}if(m){var I=g.mixAttributes(this._fieldsIndex,this._requiredFields,F.attributes,m);if(I){r.push(I);continue}}c.add(d.convertFromFeature(F,i,o,s,u)),r.push(g.createFeatureEditSuccessResult(b))}else r.push(g.createFeatureEditErrorResult("Feature with object id "+b+" missing"));else r.push(g.createFeatureEditErrorResult("Identifier field "+u+" missing"))}},e.prototype._assignObjectId=function(e,t,r){void 0===r&&(r=!1);var n=this._queryEngine.objectIdField;r&&isFinite(t[n])?e[n]=t[n]:e[n]=this._nextObjectId++},e.prototype._checkProjection=function(e){return i(this,void 0,void 0,(function(){return r(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,p.checkProjectionSupport(l.WGS84,e)];case 1:return t.sent(),[3,3];case 2:throw t.sent(),new o("geojson-layer","Projection not supported");case 3:return[2]}}))}))},e}();t.default=I}.apply(null,n))||(e.exports=i)},1275:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(8),r(9),r(28),r(38)],void 0===(i=function(e,t,n,i,s){Object.defineProperty(t,"__esModule",{value:!0});var o=function(){this.code=null,this.description=null},u=function(e){this.error=new o,this.globalId=null,this.objectId=null,this.success=!1,this.uniqueId=null,this.error.description=e};function a(e){return new u(e)}t.createFeatureEditErrorResult=a;var l=function(e){this.globalId=null,this.success=!0,this.objectId=this.uniqueId=e};t.createFeatureEditSuccessResult=function(e){return new l(e)};var d,c=new Set;function p(e,t){var r=t;return"string"==typeof t&&s.isNumericField(e)?r=parseFloat(t):null!=t&&s.isStringField(e)&&"string"!=typeof t&&(r=String(t)),s.sanitizeNullFieldValue(r)}function f(){return i(this,void 0,void 0,(function(){return n(this,(function(e){switch(e.label){case 0:return d?[2,d]:[4,new Promise((function(e,t){r.e(7).then(function(){var t=[r(1091)];e.apply(null,t)}.bind(this)).catch(t.bind(this))}))];case 1:return[2,d=e.sent()]}}))}))}t.mixAttributes=function(e,t,r,n,i,o){for(var u in void 0===i&&(i=!1),c.clear(),n){var l=e.get(u);if(l){var d=n[u],f=p(l,d);if(f!==d&&o&&o.push({name:"invalid-value-type",message:"attribute value was converted to match the field type",details:{field:l,originalValue:d,sanitizedValue:f}}),c.add(l.name),l&&(i||l.editable)){var y=s.validateFieldValue(l,f);if(y)return a(s.validationErrorToString(y,l,f));r[l.name]=f}}}for(var h=0,g=t;h<g.length;h++){var m=g[h];if(!c.has(m.name))return a('missing required field "'+m.name+'"')}return null},t.simplify=function(e,t){if(!e)return e;if("rings"in e||"paths"in e){if(!d)throw new TypeError("geometry engine not loaded");e.spatialReference||(e.spatialReference=t);var r=d.simplify(e);return r?r.toJSON():null}return e},t.loadGeometryEngine=f,t.loadGeometryEngineForSimplify=function(e){return i(this,void 0,void 0,(function(){return n(this,(function(t){switch(t.label){case 0:return"esriGeometryPolygon"!==e&&"esriGeometryPolyline"!==e?[3,2]:[4,f()];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}}.apply(null,n))||(e.exports=i)},1726:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(8),r(9),r(1727),r(10),r(205),r(196)],void 0===(i=function(e,t,r,n,i,s,o,u){Object.defineProperty(t,"__esModule",{value:!0});var a={LineString:"esriGeometryPolyline",MultiLineString:"esriGeometryPolyline",MultiPoint:"esriGeometryMultipoint",Point:"esriGeometryPoint",Polygon:"esriGeometryPolygon",MultiPolygon:"esriGeometryPolygon"};function l(e){var t,n,i;return r(this,(function(r){switch(r.label){case 0:switch(e.type){case"Feature":return[3,1];case"FeatureCollection":return[3,3]}return[3,7];case 1:return[4,e];case 2:return r.sent(),[3,7];case 3:t=0,n=e.features,r.label=4;case 4:return t<n.length?(i=n[t])?[4,i]:[3,6]:[3,7];case 5:r.sent(),r.label=6;case 6:return t++,[3,4];case 7:return[2]}}))}function d(e){for(var t=0,r=0;r<e.length;r++){var n=e[r],i=e[(r+1)%e.length];t+=n[0]*i[1]-i[0]*n[1]}return t<=0}function c(e){var t=e[0],r=e[e.length-1];return t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]||e.push(t),e}function p(e,t,r){var n=c(t);d(n)?y(e,n,r):h(e,n,r)}function f(e,t,r){var n=c(t);d(n)?h(e,n,r):y(e,n,r)}function y(e,t,r){for(var n=0,i=t;n<i.length;n++)g(e,i[n],r);e.lengths.push(t.length)}function h(e,t,r){for(var n=t.length-1;n>=0;n--)g(e,t[n],r);e.lengths.push(t.length)}function g(e,t,r){var n=t[0],i=t[1],s=t[2];e.coords.push(n,i),r.hasZ&&e.coords.push(s||0)}function m(e){switch(typeof e){case"string":return"esriFieldTypeString";case"number":return"esriFieldTypeDouble";default:return"unknown"}}t.validateGeoJSON=function(e){if(!e)throw new s("geojson-layer:empty","GeoJSON data is empty");if("Feature"!==e.type&&"FeatureCollection"!==e.type)throw new s("geojson-layer:unsupported-geojson-object","missing or not supported GeoJSON object type",{data:e});if(e.crs){var t=e.crs;if("link"===t.type||!["crs84","4326"].some((function(e){return-1!==t.properties.name.toLowerCase().indexOf(e)})))throw new s("geojson-layer:unsupported-crs","unsupported GeoJSON 'crs' member",{crs:t})}},t.inferLayerProperties=function(e,t){void 0===t&&(t={});for(var n=l(e),s=[],o=new Set,u=new Set,d=!1,c=Number.NEGATIVE_INFINITY,p=null,f=!1,y=void 0,h=t.geometryType,g=void 0===h?null:h,v=!1,b=function(){var e,t,l=n.next(),h=l.value;if(l.done){var b=p&&1===p.length&&p[0]||null;if(b)for(var F=0,I=s;F<I.length;F++){var j=I[F];j.name===b&&(j.type="esriFieldTypeOID")}return{value:{fields:s,geometryType:g,hasZ:d,maxObjectId:Math.max(0,c),objectIdFieldName:b,objectIdFieldType:y,unknownFields:(e=u,t=[],e.forEach((function(e){return t.push(e)})),t)}}}var E=h.geometry,w=h.properties,_=h.id;if(E&&(g||(g=a[E.type]),a[E.type]!==g))return"continue";if(!d){var T=function(e){var t,n,s,o,u,a,l,d,c;return r(this,(function(r){switch(r.label){case 0:if(!e)return[2,null];switch(e.type){case"Point":return[3,1];case"LineString":case"MultiPoint":return[3,3];case"MultiLineString":case"Polygon":return[3,5];case"MultiPolygon":return[3,10]}return[3,17];case 1:return[4,e.coordinates];case 2:return r.sent(),[3,17];case 3:return[5,i(e.coordinates)];case 4:return r.sent(),[3,17];case 5:t=0,n=e.coordinates,r.label=6;case 6:return t<n.length?(s=n[t],[5,i(s)]):[3,9];case 7:r.sent(),r.label=8;case 8:return t++,[3,6];case 9:return[3,17];case 10:o=0,u=e.coordinates,r.label=11;case 11:if(!(o<u.length))return[3,16];a=u[o],l=0,d=a,r.label=12;case 12:return l<d.length?(c=d[l],[5,i(c)]):[3,15];case 13:r.sent(),r.label=14;case 14:return l++,[3,12];case 15:return o++,[3,11];case 16:return[3,17];case 17:return[2]}}))}(E);d=function(e){for(;;){var t=e.next(),r=t.value;if(t.done)return!1;if(r.length>2)return!0}}(T)}if(f||(f=null!=_)&&"number"==(y=typeof _)&&(p=Object.keys(w).filter((function(e){return w[e]===_}))),f&&"number"===y&&null!=_&&(c=Math.max(c,_),p.length>1?p=p.filter((function(e){return w[e]===_})):1===p.length&&(p=w[p[0]]===_?p:[])),!v&&w){var S=!0;for(var x in w)if(!o.has(x)){var q=w[x];if(null!=q){var O=m(q);"unknown"!==O?(u.delete(x),o.add(x),s.push({name:x,alias:x,type:O})):u.add(x)}else S=!1,u.add(x)}v=S}};;){var F=b();if("object"==typeof F)return F.value}},t.createOptimizedFeatures=function(e,t){return function(e){for(var t=[];;){var r=e.next(),n=r.value;if(r.done)return t;t.push(n)}}(function(e,t){var n,i,s,l,d,c,h,m;return void 0===t&&(t={}),r(this,(function(r){switch(r.label){case 0:n=t.geometryType,i=t.objectIdFieldName,r.label=1;case 1:return s=e.next(),l=s.value,s.done?[2]:(d=l.geometry,c=l.properties,h=l.id,d&&a[d.type]!==n?[3,1]:(m=c||{},i&&null!=h&&(m[i]=h),[4,new o.default(d?function(e,t,r){switch(t.type){case"LineString":return function(e,t,r){return y(e,t.coordinates,r),e}(e,t,r);case"MultiLineString":return function(e,t,r){for(var n=0,i=t.coordinates;n<i.length;n++){y(e,i[n],r)}return e}(e,t,r);case"MultiPoint":return function(e,t,r){return y(e,t.coordinates,r),e}(e,t,r);case"MultiPolygon":return function(e,t,r){for(var n=0,i=t.coordinates;n<i.length;n++){var s=i[n];p(e,s[0],r);for(var o=1;o<s.length;o++)f(e,s[o],r)}return e}(e,t,r);case"Point":return function(e,t,r){return g(e,t.coordinates,r),e}(e,t,r);case"Polygon":return function(e,t,r){var n=t.coordinates;p(e,n[0],r);for(var i=1;i<n.length;i++)f(e,n[i],r);return e}(e,t,r)}}(new u.default,d,t):null,m)]));case 2:return r.sent(),[3,1];case 3:return[2]}}))}(l(e),t))}}.apply(null,n))||(e.exports=i)},1727:function(e,t,r){var n;void 0===(n=function(){return function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}}}.apply(null,[]))||(e.exports=n)}}]);