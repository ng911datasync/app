(function(){(this||window).webpackJsonp.registerAbsMids({"esri/views/2d/layers/GraphicsLayerView2D":1049,"esri/views/layers/support/ClipArea":1064,"esri/views/layers/LayerView":1071,"esri/views/2d/layers/LayerView2D":1072,"esri/views/layers/support/ClipRect":1073,"esri/views/layers/support/Geometry":1074,"esri/views/layers/support/Path":1075,"esri/core/libs/rbush/rbush":1076,"esri/core/libs/quickselect/quickselect":1083,"esri/views/2d/layers/features/support/Tile":1086,"esri/views/2d/layers/features/support/TileStore":1089,"esri/views/2d/engine/FeatureContainer":1090,"esri/views/2d/layers/graphics/GraphicsView2D":1098,"esri/core/MapPool":1099,"esri/views/2d/layers/graphics/GraphicContainer":1101,"esri/views/2d/layers/graphics/GraphicProcessingQueue":1102,"esri/views/2d/layers/graphics/GraphicStore":1103,"esri/views/2d/layers/graphics/GraphicStoreItem":1104,"esri/views/layers/GraphicsView":1105})})(),(window.webpackJsonp=window.webpackJsonp||[]).push([[50],{1049:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i(1),i(0),i(8),i(9),i(43),i(20),i(22),i(4),i(2),i(1137),i(1072),i(1098),i(1071)],void 0===(n=function(e,t,i,r,n,o,s,a,u,h,l,p,d,c,f){var y={remove:function(){},pause:function(){},resume:function(){}};return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._handles=new u,t.container=new p.Container,t}return i(t,e),t.prototype.initialize=function(){this.graphicsView=new c.default({view:this.view,graphics:this.layer.graphics})},t.prototype.attach=function(){var e=this;this.graphicsView.install(this.container),this._handles.add([this.layer.on("graphic-update",this.graphicsView.graphicUpdateHandler),this.clips.on("change",(function(){return e.graphicsView.container.setClips(e.clips)}))]),this.graphicsView.container.setClips(this.clips)},t.prototype.detach=function(){this.graphicsView.destroy(),this._handles.removeAll()},t.prototype.hitTest=function(e,t){return this.suspended||!this.graphicsView?h.resolve(null):this.graphicsView.hitTest(e,t)},t.prototype.fetchPopupFeatures=function(e){return o(this,void 0,void 0,(function(){return n(this,(function(t){return this.graphicsView?[2,this.graphicsView.searchFeatures(e).then((function(e){return e.filter((function(e){return!!e.popupTemplate}))}))]:[2,void 0]}))}))},t.prototype.update=function(e){this.graphicsView.update(e)},t.prototype.moveStart=function(){this.requestUpdate()},t.prototype.viewChange=function(){this.requestUpdate()},t.prototype.moveEnd=function(){this.requestUpdate()},t.prototype.isUpdating=function(){return!this.graphicsView||this.graphicsView.updating},t.prototype.highlight=function(e){var t,i=this;return"number"==typeof e?t=[e]:e instanceof s?t=[e.uid]:Array.isArray(e)&&e.length>0?t="number"==typeof e[0]?e:e.map((function(e){return e&&e.uid})):a.isCollection(e)&&(t=e.map((function(e){return e&&e.uid})).toArray()),(t=t.filter((function(e){return null!=e}))).length?(this.graphicsView.addHighlight(t),{remove:function(){return i.graphicsView.removeHighlight(t)},pause:function(){},resume:function(){}}):y},t.prototype.queryGraphics=function(){return h.resolve(this.graphicsView.graphics)},r([l.property()],t.prototype,"graphicsView",void 0),r([l.property({dependsOn:["graphicsView.updating"]})],t.prototype,"updating",void 0),r([l.subclass("esri.views.2d.layers.GraphicsLayerView2D")],t)}(l.declared(d.LayerView2D(f)))}.apply(null,r))||(e.exports=n)},1064:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i(0),i(1),i(3),i(2)],void 0===(n=function(e,t,i,r,n,o){return function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),i([o.subclass("esri.views.layers.support.ClipArea")],t)}(o.declared(n.JSONSupport))}.apply(null,r))||(e.exports=n)},1071:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i(1),i(0),i(11),i(52),i(132),i(133),i(6),i(98),i(2)],void 0===(n=function(e,t,i,r,n,o,s,a,u,h,l){return function(e){function t(t){var i=e.call(this,t)||this;return i.layer=null,i.parent=null,i}return i(t,e),t.prototype.initialize=function(){var e=this;this.when().catch((function(t){if("layerview:create-error"!==t.name){var i=e.layer&&e.layer.id||"no id",r=e.layer&&e.layer.title||"no title";throw u.getLogger(e.declaredClass).error("#resolve()","Failed to resolve layer view (layer title: '"+r+"', id: '"+i+"')",t),t}}))},t.prototype.destroy=function(){this.layer=this.parent=null},Object.defineProperty(t.prototype,"fullOpacity",{get:function(){var e=function(e){return null==e?1:e};return e(this.get("layer.opacity"))*e(this.get("parent.fullOpacity"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"suspended",{get:function(){return!this.canResume()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"suspendInfo",{get:function(){return this.getSuspendInfo()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"updating",{get:function(){return!!(this.updatingHandles&&this.updatingHandles.updating||this.isUpdating())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"visible",{get:function(){return!0===this.get("layer.visible")},set:function(e){void 0!==e?this._override("visible",e):this._clearOverride("visible")},enumerable:!0,configurable:!0}),t.prototype.canResume=function(){return!this.get("parent.suspended")&&this.get("view.ready")&&this.get("layer.loaded")&&this.visible||!1},t.prototype.getSuspendInfo=function(){var e=this.parent&&this.parent.suspended?this.parent.suspendInfo:{};return this.view&&this.view.ready||(e.viewNotReady=!0),this.layer&&this.layer.loaded||(e.layerNotLoaded=!0),this.visible||(e.layerInvisible=!0),e},t.prototype.isUpdating=function(){return!1},r([l.property({dependsOn:["layer.opacity","parent.fullOpacity"]})],t.prototype,"fullOpacity",null),r([l.property()],t.prototype,"layer",void 0),r([l.property()],t.prototype,"parent",void 0),r([l.property({readOnly:!0,dependsOn:["visible","layer.loaded","parent.suspended","view?.ready"]})],t.prototype,"suspended",null),r([l.property({readOnly:!0,dependsOn:["visible","layer.loaded","parent.suspended","view?.ready"]})],t.prototype,"suspendInfo",null),r([l.property({type:Boolean,dependsOn:["updatingHandles.updating"],readOnly:!0})],t.prototype,"updating",null),r([l.property({dependsOn:["layer.visible"]})],t.prototype,"visible",null),r([l.subclass("esri.views.layers.LayerView")],t)}(l.declared(s.HandleOwnerMixin(a.IdentifiableMixin(h.EsriPromiseMixin(o.EventedMixin(n))))))}.apply(null,r))||(e.exports=n)},1072:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i(1),i(0),i(20),i(102),i(16),i(2),i(1064),i(1073),i(1074),i(1075)],void 0===(n=function(e,t,i,r,n,o,s,a,u,h,l,p){Object.defineProperty(t,"__esModule",{value:!0});var d=n.ofType({key:"type",base:u,typeMap:{rect:h,path:p,geometry:l}});t.LayerView2D=function(e){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.clips=new d,t.moving=!1,t.attached=!1,t.lastUpdateId=-1,t.updateRequested=!1,t}return i(t,e),t.prototype.initialize=function(){var e=this;this.when((function(){e.requestUpdate()}),(function(){}));var t=function(){return e.notifyChange("rendering")};this.handles.add([s.init(this,"suspended",(function(t){e.container&&(e.container.visible=!t),e.view&&!t&&e.updateRequested&&e.view.requestLayerViewUpdate(e)}),!0),s.init(this,["fullOpacity","container"],(function(){e.container&&(e.container.opacity=e.fullOpacity)}),!0),s.on(this,"container","post-render",t),s.on(this,"container","will-render",t)])},t.prototype.destroy=function(){this.attached&&(this.attached=!1,this.detach()),this.handles.remove("initialize"),this.updateRequested=!1,this.layer=null,this.view=null},Object.defineProperty(t.prototype,"rendering",{get:function(){return this.attached&&!this.suspended&&(this.moving||this.container.renderRequested||this.isRendering())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"updating",{get:function(){return!this.suspended&&(!this.attached||this.updateRequested||this.isUpdating())},enumerable:!0,configurable:!0}),t.prototype.isVisibleAtScale=function(e){var t=!0,i=this.layer,r=i.minScale,n=i.maxScale;if(null!=r&&null!=n){var o=!r,s=!n;!o&&e<=r&&(o=!0),!s&&e>=n&&(s=!0),t=o&&s}return t},t.prototype.requestUpdate=function(){this.updateRequested||(this.updateRequested=!0,this.suspended||this.view.requestLayerViewUpdate(this))},t.prototype.processUpdate=function(e){!this.isFulfilled()||this.isResolved()?(this._set("updateParameters",e),this.updateRequested&&!this.suspended&&(this.updateRequested=!1,this.update(e))):this.updateRequested=!1},t.prototype.isUpdating=function(){return!1},t.prototype.isRendering=function(){return!1},t.prototype.canResume=function(){var e=this.inherited(arguments);return e&&(e=this.isVisibleAtScale(this.view.scale)),e},r([a.property({type:d,set:function(e){var t=o.referenceSetter(e,this._get("clips"),d);this._set("clips",t)}})],t.prototype,"clips",void 0),r([a.property()],t.prototype,"moving",void 0),r([a.property({dependsOn:["attached","suspended","moving"]})],t.prototype,"rendering",null),r([a.property()],t.prototype,"attached",void 0),r([a.property()],t.prototype,"container",void 0),r([a.property({dependsOn:["view.scale","layer.minScale","layer.maxScale"]})],t.prototype,"suspended",void 0),r([a.property({readOnly:!0})],t.prototype,"updateParameters",void 0),r([a.property()],t.prototype,"updateRequested",void 0),r([a.property({dependsOn:["updateRequested","attached","suspended"]})],t.prototype,"updating",null),r([a.property()],t.prototype,"view",void 0),r([a.subclass("esri.views.2d.layers.LayerView2D")],t)}(a.declared(e))}}.apply(null,r))||(e.exports=n)},1073:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i(0),i(1),i(2),i(1064)],void 0===(n=function(e,t,i,r,n,o){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="rect",t.left=null,t.right=null,t.top=null,t.bottom=null,t}var o;return r(t,e),o=t,t.prototype.clone=function(){return new o({left:this.left,right:this.right,top:this.top,bottom:this.bottom})},Object.defineProperty(t.prototype,"version",{get:function(){return(this._get("version")||0)+1},enumerable:!0,configurable:!0}),i([n.property({type:[Number,String],json:{write:!0}})],t.prototype,"left",void 0),i([n.property({type:[Number,String],json:{write:!0}})],t.prototype,"right",void 0),i([n.property({type:[Number,String],json:{write:!0}})],t.prototype,"top",void 0),i([n.property({type:[Number,String],json:{write:!0}})],t.prototype,"bottom",void 0),i([n.property({readOnly:!0,dependsOn:["left","right","top","bottom"]})],t.prototype,"version",null),o=i([n.subclass("esri.views.layers.support.ClipRect")],t)}(n.declared(o))}.apply(null,r))||(e.exports=n)},1074:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i(0),i(1),i(18),i(2),i(60),i(19),i(1064)],void 0===(n=function(e,t,i,r,n,o,s,a,u){var h={base:s,key:"type",typeMap:{extent:n.Extent,polygon:n.Polygon}};return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="geometry",t.geometry=null,t}var n;return r(t,e),n=t,Object.defineProperty(t.prototype,"version",{get:function(){return(this._get("version")||0)+1},enumerable:!0,configurable:!0}),t.prototype.clone=function(){return new n({geometry:this.geometry.clone()})},i([o.property({types:h,json:{read:a.fromJSON,write:!0}})],t.prototype,"geometry",void 0),i([o.property({readOnly:!0,dependsOn:["geometry"]})],t.prototype,"version",null),n=i([o.subclass("esri.views.layers.support.Geometry")],t)}(o.declared(u))}.apply(null,r))||(e.exports=n)},1075:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i(0),i(1),i(2),i(1064)],void 0===(n=function(e,t,i,r,n,o){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="path",t.path=[],t}return r(t,e),Object.defineProperty(t.prototype,"version",{get:function(){return(this._get("version")||0)+1},enumerable:!0,configurable:!0}),i([n.property({type:[[[Number]]],json:{write:!0}})],t.prototype,"path",void 0),i([n.property({readOnly:!0,dependsOn:["path"]})],t.prototype,"version",null),i([n.subclass("esri.views.layers.support.Path")],t)}(n.declared(o))}.apply(null,r))||(e.exports=n)},1076:function(e,t,i){var r,n;r=[i(1083)],void 0===(n=function(e){"use strict";function t(e,i){if(!(this instanceof t))return new t(e,i);this._maxEntries=Math.max(4,e||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),i&&("function"==typeof i?this.toBBox=i:this._initFormat(i)),this.clear()}function i(e,t,i){if(!i)return t.indexOf(e);for(var r=0;r<t.length;r++)if(i(e,t[r]))return r;return-1}function r(e,t){n(e,0,e.children.length,t,e)}function n(e,t,i,r,n){n||(n=d(null)),n.minX=1/0,n.minY=1/0,n.maxX=-1/0,n.maxY=-1/0;for(var s,a=t;a<i;a++)s=e.children[a],o(n,e.leaf?r(s):s);return n}function o(e,t){return e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY),e}function s(e,t){return e.minX-t.minX}function a(e,t){return e.minY-t.minY}function u(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function h(e){return e.maxX-e.minX+(e.maxY-e.minY)}function l(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function p(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function d(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function c(t,i,r,n,o){for(var s,a=[i,r];a.length;)(r=a.pop())-(i=a.pop())<=n||(s=i+Math.ceil((r-i)/n/2)*n,e(t,s,i,r,o),a.push(i,s,s,r))}return t.prototype={all:function(){return this._all(this.data,[])},search:function(e){var t=this.data,i=[],r=this.toBBox;if(!p(e,t))return i;for(var n,o,s,a,u=[];t;){for(n=0,o=t.children.length;n<o;n++)s=t.children[n],p(e,a=t.leaf?r(s):s)&&(t.leaf?i.push(s):l(e,a)?this._all(s,i):u.push(s));t=u.pop()}return i},collides:function(e){var t=this.data,i=this.toBBox;if(!p(e,t))return!1;for(var r,n,o,s,a=[];t;){for(r=0,n=t.children.length;r<n;r++)if(o=t.children[r],p(e,s=t.leaf?i(o):o)){if(t.leaf||l(e,s))return!0;a.push(o)}t=a.pop()}return!1},load:function(e){if(!e||!e.length)return this;if(e.length<this._minEntries){for(var t=0,i=e.length;t<i;t++)this.insert(e[t]);return this}var r=this._build(e.slice(),0,e.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var n=this.data;this.data=r,r=n}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},insert:function(e){return e&&this._insert(e,this.data.height-1),this},clear:function(){return this.data=d([]),this},remove:function(e,t){if(!e)return this;for(var r,n,o,s,a=this.data,u=this.toBBox(e),h=[],p=[];a||h.length;){if(a||(a=h.pop(),n=h[h.length-1],r=p.pop(),s=!0),a.leaf&&-1!==(o=i(e,a.children,t)))return a.children.splice(o,1),h.push(a),this._condense(h),this;s||a.leaf||!l(a,u)?n?(r++,a=n.children[r],s=!1):a=null:(h.push(a),p.push(r),r=0,n=a,a=a.children[0])}return this},toBBox:function(e){return e},compareMinX:s,compareMinY:a,toJSON:function(){return this.data},fromJSON:function(e){return this.data=e,this},_all:function(e,t){for(var i=[];e;)e.leaf?t.push.apply(t,e.children):i.push.apply(i,e.children),e=i.pop();return t},_build:function(e,t,i,n){var o,s=i-t+1,a=this._maxEntries;if(s<=a)return r(o=d(e.slice(t,i+1)),this.toBBox),o;n||(n=Math.ceil(Math.log(s)/Math.log(a)),a=Math.ceil(s/Math.pow(a,n-1))),(o=d([])).leaf=!1,o.height=n;var u,h,l,p,f=Math.ceil(s/a),y=f*Math.ceil(Math.sqrt(a));for(c(e,t,i,y,this.compareMinX),u=t;u<=i;u+=y)for(c(e,u,l=Math.min(u+y-1,i),f,this.compareMinY),h=u;h<=l;h+=f)p=Math.min(h+f-1,l),o.children.push(this._build(e,h,p,n-1));return r(o,this.toBBox),o},_chooseSubtree:function(e,t,i,r){for(var n,o,s,a,h,l,p,d,c,f;r.push(t),!t.leaf&&r.length-1!==i;){for(p=d=1/0,n=0,o=t.children.length;n<o;n++)h=u(s=t.children[n]),c=e,f=s,(l=(Math.max(f.maxX,c.maxX)-Math.min(f.minX,c.minX))*(Math.max(f.maxY,c.maxY)-Math.min(f.minY,c.minY))-h)<d?(d=l,p=h<p?h:p,a=s):l===d&&h<p&&(p=h,a=s);t=a||t.children[0]}return t},_insert:function(e,t,i){var r=this.toBBox,n=i?e:r(e),s=[],a=this._chooseSubtree(n,this.data,t,s);for(a.children.push(e),o(a,n);t>=0&&s[t].children.length>this._maxEntries;)this._split(s,t),t--;this._adjustParentBBoxes(n,s,t)},_split:function(e,t){var i=e[t],n=i.children.length,o=this._minEntries;this._chooseSplitAxis(i,o,n);var s=this._chooseSplitIndex(i,o,n),a=d(i.children.splice(s,i.children.length-s));a.height=i.height,a.leaf=i.leaf,r(i,this.toBBox),r(a,this.toBBox),t?e[t-1].children.push(a):this._splitRoot(i,a)},_splitRoot:function(e,t){this.data=d([e,t]),this.data.height=e.height+1,this.data.leaf=!1,r(this.data,this.toBBox)},_chooseSplitIndex:function(e,t,i){var r,o,s,a,h,l,p,d,c,f,y,g,v,m;for(l=p=1/0,r=t;r<=i-t;r++)c=o=n(e,0,r,this.toBBox),f=s=n(e,r,i,this.toBBox),void 0,void 0,void 0,void 0,y=Math.max(c.minX,f.minX),g=Math.max(c.minY,f.minY),v=Math.min(c.maxX,f.maxX),m=Math.min(c.maxY,f.maxY),a=Math.max(0,v-y)*Math.max(0,m-g),h=u(o)+u(s),a<l?(l=a,d=r,p=h<p?h:p):a===l&&h<p&&(p=h,d=r);return d},_chooseSplitAxis:function(e,t,i){var r=e.leaf?this.compareMinX:s,n=e.leaf?this.compareMinY:a;this._allDistMargin(e,t,i,r)<this._allDistMargin(e,t,i,n)&&e.children.sort(r)},_allDistMargin:function(e,t,i,r){e.children.sort(r);var s,a,u=this.toBBox,l=n(e,0,t,u),p=n(e,i-t,i,u),d=h(l)+h(p);for(s=t;s<i-t;s++)a=e.children[s],o(l,e.leaf?u(a):a),d+=h(l);for(s=i-t-1;s>=t;s--)a=e.children[s],o(p,e.leaf?u(a):a),d+=h(p);return d},_adjustParentBBoxes:function(e,t,i){for(var r=i;r>=0;r--)o(t[r],e)},_condense:function(e){for(var t,i=e.length-1;i>=0;i--)0===e[i].children.length?i>0?(t=e[i-1].children).splice(t.indexOf(e[i]),1):this.clear():r(e[i],this.toBBox)},_initFormat:function(e){var t=["return a"," - b",";"];this.compareMinX=new Function("a","b",t.join(e[0])),this.compareMinY=new Function("a","b",t.join(e[1])),this.toBBox=new Function("a","return {minX: a"+e[0]+", minY: a"+e[1]+", maxX: a"+e[2]+", maxY: a"+e[3]+"};")}},t}.apply(null,r))||(e.exports=n)},1083:function(e,t,i){var r;void 0===(r=function(){"use strict";function e(e,t,i){var r=e[t];e[t]=e[i],e[i]=r}function t(e,t){return e<t?-1:e>t?1:0}return function(i,r,n,o,s){!function t(i,r,n,o,s){for(;o>n;){if(o-n>600){var a=o-n+1,u=r-n+1,h=Math.log(a),l=.5*Math.exp(2*h/3),p=.5*Math.sqrt(h*l*(a-l)/a)*(u-a/2<0?-1:1);t(i,r,Math.max(n,Math.floor(r-u*l/a+p)),Math.min(o,Math.floor(r+(a-u)*l/a+p)),s)}var d=i[r],c=n,f=o;for(e(i,n,r),s(i[o],d)>0&&e(i,n,o);c<f;){for(e(i,c,f),c++,f--;s(i[c],d)<0;)c++;for(;s(i[f],d)>0;)f--}0===s(i[n],d)?e(i,n,f):e(i,++f,o),f<=r&&(n=f+1),r<=f&&(o=f-1)}}(i,r,n||0,o||i.length-1,s||t)}}.apply(null,[]))||(e.exports=r)},1086:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i(104),i(36),i(131),i(206),i(96)],void 0===(n=function(e,t,i,r,n,o,s){function a(e,t){var i=e.bounds,r=t.bounds;return e.key.id!==t.key.id&&e.key.world===t.key.world&&i[0]<=r[0]&&i[1]<=r[1]&&i[2]>=r[2]&&i[3]>=r[3]}Object.defineProperty(t,"__esModule",{value:!0}),t.isParentOf=a,t.isChildOf=function(e,t){return a(t,e)};var u=function(){function e(e,t){this.bounds=n.create(),this.key=new s(0,0,0,0),this.objectIds=new Set,this.key.set(t);var i=e.getLODInfoAt(this.key);this.tileInfoView=e,this.tileInfoView.getTileBounds(this.bounds,this.key,!0),this.resolution=i.resolution,this.scale=i.scale,this.level=i.level,this.needsClear=!0}return Object.defineProperty(e.prototype,"id",{get:function(){return this.key.id},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"extent",{get:function(){return r.fromBounds(this.bounds,this.tileInfoView.tileInfo.spatialReference)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"transform",{get:function(){return{originPosition:"upperLeft",scale:[this.resolution,this.resolution],translate:[this.bounds[0],this.bounds[3]]}},enumerable:!0,configurable:!0}),e.prototype.clone=function(){return new e(this.tileInfoView,this.id)},e.prototype.createChildTiles=function(){for(var t=this.key.getChildKeys(),r=i.acquire(),n=0;n<t.length;n++)r[n]=new e(this.tileInfoView,t[n]);return r},e.prototype.getQuantizationParameters=function(){return o.default.fromJSON({mode:"view",originPosition:"upperLeft",tolerance:this.resolution,extent:{xmin:this.bounds[0],ymin:this.bounds[1],xmax:this.bounds[2],ymax:this.bounds[3],spatialReference:this.tileInfoView.tileInfo.spatialReference}})},e}();t.Tile=u,t.default=u}.apply(null,r))||(e.exports=n)},1089:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i(17),i(0),i(52),i(15),i(1076),i(1086),i(202),i(96)],void 0===(n=function(e,t,i,r,n,o,s,a,u,h){Object.defineProperty(t,"__esModule",{value:!0});var l={added:[],removed:[]},p=new Set,d=new h(0,0,0,0),c=function(e){function t(t){var i=e.call(this)||this;return i._tiles=new Map,i._index=s(9,o("csp-restrictions")?function(e){return{minX:e.bounds[0],minY:e.bounds[1],maxX:e.bounds[2],maxY:e.bounds[3]}}:[".bounds[0]",".bounds[1]",".bounds[2]",".bounds[3]"]),i.tiles=[],i.tileScheme=t,i}return i(t,e),t.prototype.destroy=function(){this._tiles.clear()},t.prototype.clear=function(){this._tiles.clear(),this._index.clear()},t.prototype.has=function(e){return this._tiles.has(e)},t.prototype.get=function(e){return this._tiles.get(e)},t.prototype.findByKey=function(e){return this._tiles.get(e.id)},t.prototype.intersections=function(e,t){var i="string"==typeof e?this.get(e):e;if(!i)return[];for(var r=t*i.resolution,n=i.bounds[0]-r,o=i.bounds[1]-r,s=i.bounds[2]+r,a=i.bounds[3]+r,u=[],h=0,l=this._index.search({minX:n,minY:o,maxX:s,maxY:a});h<l.length;h++){var p=l[h],d=p.bounds.slice();d[0]=Math.max(d[0],n),d[1]=Math.max(d[1],o),d[2]=Math.min(d[2],s),d[3]=Math.min(d[3],a),d[2]-d[0]>0&&d[3]-d[1]>0&&u.push({bounds:d,tile:p})}return u},t.prototype.boundsIntersections=function(e){return this._index.search({minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]})},t.prototype.setViewState=function(e){var t=this.tileScheme.getTileCoverage(e,0);if(t){var i=t.spans,r=t.lodInfo,n=r.level;if(i.length>0)for(var o=0,s=i;o<s.length;o++)for(var h=s[o],c=h.row,f=h.colFrom,y=h.colTo,g=f;g<=y;g++){var v=d.set(n,c,r.normalizeCol(g),r.getWorldForColumn(g)).id;if(p.add(v),!this.has(v)){var m=new a.default(this.tileScheme,v);this._tiles.set(v,m),this._index.insert(m),this.tiles.push(m),l.added.push(m)}}for(var _=this.tiles.length-1;_>=0;_--)m=this.tiles[_],p.has(m.id)||(this._tiles.delete(m.id),this.tiles.splice(_,1),this._index.remove(m),l.removed.push(m));(l.added.length||l.removed.length)&&this.emit("update",l),u.pool.release(t),p.clear(),l.added.length=0,l.removed.length=0}},t}(n);t.default=c}.apply(null,r))||(e.exports=n)},1090:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i(8),i(9),i(17),i(5),i(4),i(4),i(131),i(320)],void 0===(n=function(e,t,i,r,n,o,s,a,u,h){Object.defineProperty(t,"__esModule",{value:!0});var l=function(e){function t(t,i){var r=e.call(this,t,i)||this;return r._rendererInfo=new h.WGLRendererInfo,r.attributeView=new h.AttributeStoreView,r}return n(t,e),t.prototype.destroy=function(){this.removeAllChildren(),this.children.forEach((function(e){return e.destroy()})),this.attributeView.destroy()},t.prototype.whenAttached=function(){var e=this;return this.attached?s.resolve():s.create((function(t){return e.once("attached",(function(){return t()}))}))},t.prototype.setRendererInfo=function(e,t,i){this._rendererInfo.setInfo(e,t,i),this.requestRender()},t.prototype.getMaterialItems=function(e,t){return r(this,void 0,void 0,(function(){var r,n;return i(this,(function(i){switch(i.label){case 0:return e&&0!==e.length?[4,this.whenAttached()]:[2,null];case 1:return i.sent(),r=this.stage.painter.textureManager,n=e.map((function(e){return r.rasterizeItem(e.symbol,e.glyphIds,t)})),[4,a.all(n)];case 2:return[2,i.sent().map((function(t,i){return{id:e[i].id,mosaicItem:t}}))]}}))}))},t.prototype.onTileData=function(e,t){if(t.addOrUpdate&&"tileDisplayData"in t.addOrUpdate)e.setData(t,this.hasLabels,this.labelsVisible);else{var i=t.addOrUpdate&&h.TileData.decode(t.addOrUpdate),r=o({},t,{addOrUpdate:i});e.setData(r,this.hasLabels,this.labelsVisible)}this.contains(e)||this.addChild(e),this.requestRender()},t.prototype.onTileError=function(e){e.clear(),this.contains(e)||this.addChild(e)},t.prototype.renderChildren=function(t){this._rendererInfo.update(t.state),this.attributeView.bindTextures(this.stage.context),e.prototype.renderChildren.call(this,t)},t.prototype.createTile=function(e){var t=this._tileInfoView.getTileBounds(u.create(),e);return new h.WGLTile(e,t)},t.prototype.destroyTile=function(e){this.removeChild(e),e.destroy()},t.prototype.attach=function(){return this._initializeExtensions(),e.prototype.attach.call(this)},t.prototype.createRenderParams=function(t){return o({},e.prototype.createRenderParams.call(this,t),{rendererInfo:this._rendererInfo,attributeView:this.attributeView})},t.prototype._initializeExtensions=function(){var e=this.stage.context.capabilities;e.textureFloat,e.vao},t}(h.TileContainer);t.FeatureContainer=l}.apply(null,r))||(e.exports=n)},1098:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i(1),i(0),i(5),i(8),i(9),i(11),i(132),i(133),i(1099),i(99),i(13),i(4),i(4),i(21),i(2),i(134),i(24),i(131),i(203),i(19),i(37),i(1070),i(338),i(339),i(320),i(1066),i(1133),i(1089),i(1101),i(1102),i(1103),i(1079),i(1105)],void 0===(n=function(e,t,i,r,n,o,s,a,u,h,l,p,d,c,f,y,g,v,m,_,b,w,x,G,S,P,M,O,I,T,C,q,R,U,B){function V(e,t,i){if(i.has(e))return i.get(e);var r={tile:t,addedOrModified:[],removed:[]};return i.set(e,r),r}Object.defineProperty(t,"__esModule",{value:!0});var A=function(e){function t(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];var r=e.apply(this,t)||this;return r._tiles=new Map,r._graphicStoreUpdate=!1,r._graphicsSet=new Set,r._matcher=c.resolve(null),r._tileUpdateSet=new Set,r._tilesToUpdate=new Map,r._graphicIdToAbortController=new Map,r._attached=!1,r._highlightIds=new Map,r._updatingGraphicsTimer=null,r.lastUpdateId=-1,r.updateRequested=!1,r.graphicUpdateHandler=r.graphicUpdateHandler.bind(r),r.addOrUpdateGraphic=r.addOrUpdateGraphic.bind(r),r._processAnalyzedGraphics=r._processAnalyzedGraphics.bind(r),r._graphicsChangeHandler=r._graphicsChangeHandler.bind(r),r}return i(t,e),t.prototype.initialize=function(){var e=this;this._tileStore=new T.default(this.view.featuresTilingScheme),this.container=new C.default(this.view.featuresTilingScheme,null),this._attributeStore=new I.default({type:"local",initialize:function(t){return c.resolve(e.container.attributeView.initialize(t))},update:function(t){return e.container.attributeView.requestUpdate(t)},render:function(){return e.container.requestRender()}}),this._graphicStore=new R.default(this.view.featuresTilingScheme,this.view.state.scale,this.uid,this.graphics,(function(t){e._attributeStore.createLocalId(t.uid),e._setFilterState(t.uid,t.visible)}),(function(t){e._attributeStore.freeLocalId(t.uid)})),this._graphicProcessingQueue=new q.default({process:this.addOrUpdateGraphic});var t=new M.WGLTemplateStore(this.container.getMaterialItems.bind(this.container),!0),i=this._tileStore.tileScheme.tileInfo;this._matcher=this.renderer?M.createMatcher(t,null,this.renderer):M.createMatcher(t,null),this._meshFactory=new M.WGLMeshFactory(null,this.uid,null,t,null,i),this._templateStore=t,this.watch("renderer",(function(i){i&&(e._matcher=e.renderer?M.createMatcher(t,null,e.renderer):M.createMatcher(t,null))})),this._tileStore.on("update",this._onTileUpdate.bind(this)),this.container.on("attach",(function(){e.graphics.items.length>0&&e._graphicsChangeHandler({target:e.graphics,added:e.graphics.items,removed:[],moved:[]}),e.handles.add(e.graphics.on("change",e._graphicsChangeHandler),"graphics"),e._attached=!0,e.notifyChange("updating")})),this.container.on("detach",(function(){e._graphicProcessingQueue&&e._graphicProcessingQueue.clear()}))},t.prototype.destroy=function(){this._updatingGraphicsTimer&&(clearTimeout(this._updatingGraphicsTimer),this._updatingGraphicsTimer=null,this.notifyChange("updating")),this.container.dispose(),this._set("graphics",null),this._graphicProcessingQueue&&(this._graphicProcessingQueue.destroy(),this._graphicProcessingQueue=null),this._graphicStore.clear(),this._tileStore.destroy(),this._attributeStore=null},Object.defineProperty(t.prototype,"updating",{get:function(){return!this._attached||null!==this._updatingGraphicsTimer||this._graphicProcessingQueue.updating||this._tileUpdateSet.size>0||this._tilesToUpdate.size>0},enumerable:!0,configurable:!0}),t.prototype.install=function(e){e.addChild(this.container)},t.prototype.uninstall=function(e){e.removeChild(this.container)},t.prototype.hitTest=function(e,t){if(!this.view||!this.view.position)return c.resolve();var i=this.view.toMap(y.createScreenPoint(e,t));return this.searchFeatures(i).then((function(e){return e&&e.length?e[0]:null}))},t.prototype.searchFeatures=function(e,t){var i=this;return void 0===t&&(t=2),c.create((function(r){r(i._graphicStore.hitTest(e.x,e.y,t,i.view.state.resolution,i.view.state.rotation))}))},t.prototype.update=function(e){var t=e.state,i=this.view.featuresTilingScheme.getClosestInfoForScale(t.scale).level;this._graphicStore.updateLevel(i),this._tileStore.setViewState(t),this._graphicStoreUpdate=!0,this.updateRequested=!1},t.prototype.viewChange=function(){this.requestUpdate()},t.prototype.requestUpdate=function(){this.updateRequested||(this.updateRequested=!0,this.view.requestUpdate(this))},t.prototype.processUpdate=function(e){this.updateRequested&&(this.updateRequested=!1,this.update(e))},t.prototype.graphicUpdateHandler=function(e){var t=e.graphic,i=e.property,r=e.newValue,n=t;switch(i){case"attributes":break;case"geometry":case"symbol":this._graphicProcessingQueue.push(n,"update");break;case"visible":this._setFilterState(n.uid,r),this._attributeStore.sendUpdates()}},t.prototype.addHighlight=function(e){for(var t=0,i=e;t<i.length;t++){var r=i[t];if(this._highlightIds.has(r)){var n=this._highlightIds.get(r);this._highlightIds.set(r,n+1)}else this._highlightIds.set(r,1)}this._updateHighlight()},t.prototype.removeHighlight=function(e){for(var t=0,i=e;t<i.length;t++){var r=i[t];if(this._highlightIds.has(r)){var n=this._highlightIds.get(r)-1;0===n?this._highlightIds.delete(r):this._highlightIds.set(r,n)}}this._updateHighlight()},t.prototype._updateHighlight=function(){this._attributeStore.setHighlight(p.keysOfMap(this._highlightIds))},t.prototype._getIntersectingTiles=function(e){var t=this._graphicStore.getBounds(e);return t&&0!==_.width(t)&&0!==_.height(t)?this._tileStore.boundsIntersections(t):[]},t.prototype._updateTile=function(e){var t=this,i=e.tile,r=this._getGraphicsData(this._templateStore,i,e.addedOrModified);return this._processGraphics(i.key,r).then((function(r){return t._patchTile(i.key,{addOrUpdate:r,remove:e.removed}),r}))},t.prototype._patchTile=function(e,t){if(this._tiles.has(e)){var i=this._tiles.get(e);this.container.onTileData(i,t),this.container.requestRender()}},t.prototype._graphicsChangeHandler=function(e){var t=this;if(!this._graphicStoreUpdate){var i=this.view.state,r=this.view.featuresTilingScheme.getClosestInfoForScale(i.scale).level;this._graphicStore.updateLevel(r),this._tileStore.setViewState(i)}for(var n=e.added,o=e.removed,s=e.moved,a=this._tilesToUpdate,u=[],h=new Array(n.length),l=0;l<n.length;l++){var p=n[l];h[l]=p,this._graphicsSet.add(p),u.push(this.addGraphic(p))}for(var d=0,f=o;d<f.length;d++){var y=f[d];this._abortProcessingGraphic(y.uid);for(var g=0,v=this._getIntersectingTiles(y);g<v.length;g++){var m=v[g];V(m.key.id,m,a).removed.push(this._attributeStore.getLocalId(y.uid))}this._graphicsSet.delete(y),this._graphicStore.remove(y)}for(var _=0,b=s;_<b.length;_++)for(var w=b[_],x=0,G=this._getIntersectingTiles(w);x<G.length;x++)V((m=G[x]).key.id,m,a).addedOrModified.push(w);this._flipUpdatingGraphics(),c.all(u).then((function(){for(var e,i=0;i<h.length;i++){e=h[i];for(var r=0,n=t._getIntersectingTiles(e);r<n.length;r++){var o=n[r];V(o.key.id,o,a).addedOrModified.push(e)}}t._graphicStore.updateZ();var s=[];return a.forEach((function(e){return s.push(t._updateTile(e))})),c.all(s).then((function(){a.clear(),t.notifyChange("updating")}))})).catch((function(){a.clear(),t.notifyChange("updating")}))},t.prototype._getArcadeInfo=function(e){var t=(e.attributes?Object.keys(e.attributes):[]).map((function(t){return{name:t,alias:t,type:"string"==typeof e.attributes[t]?"esriFieldTypeString":"esriFieldTypeDouble"}}));return d.isNone(e.geometry)?null:{geometryType:w.getJsonType(e.geometry),spatialReference:m.fromJSON(e.geometry.spatialReference),fields:t}},t.prototype._getSymbolForGraphic=function(e,t){return s(this,void 0,void 0,(function(){return o(this,(function(i){return d.isSome(e.symbol)?[2,e.symbol]:this.renderer?[2,this.renderer.getSymbolAsync(e,{scale:this.view.scale,abortOptions:t})]:[2,this._getNullSymbol(e)]}))}))},t.prototype._getSymbolResources=function(e,t){return s(this,void 0,void 0,(function(){var i,r,n,s,a,u,h,l,p;return o(this,(function(o){switch(o.label){case 0:return this.container.attached?(i=this._getArcadeInfo(e),n=S.expandSymbol,[4,this._getSymbolForGraphic(e,t)]):[2,c.resolve(null)];case 1:return[4,n.apply(void 0,[o.sent(),null,i,t])];case 2:if("text"!==(r=o.sent()).type)return[3,4];for(s=[],a=r,u=M.bidiText(a.text)[0],h=0;h<u.length;h++)s.push(u.charCodeAt(h));return l={symbol:r.toJSON(),id:0,glyphIds:s},[4,this.container.getMaterialItems([l])];case 3:return p=o.sent()[0].mosaicItem,[2,{symbol:r,mosaicItem:p}];case 4:return[2,{symbol:r,mosaicItem:null}]}}))}))},t.prototype._projectAndNormalizeGeometry=function(e){return s(this,void 0,void 0,(function(){var t,i,r,n=this;return o(this,(function(o){return d.isNone(e.geometry)?[2,c.resolve(null)]:(t=e.geometry,w.isPolygon(t)?(i=t.rings,t.rings=i):w.isPolyline(t)?(r=t.paths,t.paths=r):w.isExtent(t)&&(t=v.fromExtent(t)),[2,G.checkProjectionSupport(t.spatialReference,this.view.spatialReference).then((function(){var e=U.normalizeCentralMeridian(t),i=G.project(e,t.spatialReference,n.view.spatialReference);return b.closeRingsAndFixWinding(i),i}))])}))}))},t.prototype._onTileUpdate=function(e){var t=x.getInfo(this.view.spatialReference);if(e.added&&e.added.length>0)for(var i=0,r=e.added;i<r.length;i++){var n=r[i];this._addNewTile(n,t)}if(e.removed&&e.removed.length>0)for(var o=0,s=e.removed;o<s.length;o++){var a=s[o];this._removeTile(a.key)}},t.prototype.addOrUpdateGraphic=function(e,t,i){return this._addOrUpdateGraphic(e,t,i)},t.prototype.addGraphic=function(e){var t=this;this._abortProcessingGraphic(e.uid);var i=f.createAbortController();this._graphicIdToAbortController.set(e.uid,i);var r={signal:i.signal};return this._addOrUpdateGraphic(e,"add",r).then((function(){t._graphicIdToAbortController.delete(e.uid)})).catch((function(i){if(t._graphicIdToAbortController.delete(e.uid),!c.isAbortError(i))throw i}))},t.prototype._addOrUpdateGraphic=function(e,t,i){var r=this,n=this._projectAndNormalizeGeometry(e),o=this._getSymbolResources(e,i);return c.all([n,o]).then((function(n){var o=n[0],s=n[1];return"add"===t?r._addProjectedGraphic(e,s,o):r._updateGraphic(e,s,o,i)}))},t.prototype._addProjectedGraphic=function(e,t,i){this._graphicsSet.has(e)&&this._graphicStore.add(e,t,i)},t.prototype._updateGraphic=function(e,t,i,r){var n=this;if(!this._graphicStore.has(e)||c.isAborted(r))return c.resolve();for(var o=this._graphicStore.update(e,t,i),s=o.oldBounds,a=o.newBounds,u=0===_.width(s)&&0===_.height(s),h=0===_.width(a)&&0===_.height(a),p=u?[]:this._tileStore.boundsIntersections(s),d=h?[]:this._tileStore.boundsIntersections(a),f=l.acquire(),y=0,g=p;y<g.length;y++){var v=g[y];f.set(v.key,{addOrUpdate:null,remove:[this._attributeStore.getLocalId(e.uid)]})}for(var m=0,b=d;m<b.length;m++){v=b[m];var w=this._getGraphicData(this._templateStore,v,e);if(f.has(v.key)){var x=f.get(v.key);x.remove.length=0,x.addOrUpdate=w}else f.set(v.key,{addOrUpdate:w,remove:null})}var G=[];return f.forEach((function(e,t){var i=n._processGraphics(t,e.addOrUpdate,r).then((function(i){n._patchTile(t,{addOrUpdate:i,remove:e.remove})}));G.push(i)})),l.release(f),c.all(G).then((function(){}))},t.prototype._addTile=function(e,t){var i=_.create();this.view.featuresTilingScheme.getTileBounds(i,e);var r=new M.WGLTile(e,i,!0),n={clear:!0,addOrUpdate:t,remove:[]};this._tiles.set(e,r),this.container.addChild(r),r.setData(n,!1,!1)},t.prototype._addNewTile=function(e,t){var i=this,r=this._graphicStore.queryTileData(this._templateStore,e);if(t)for(var n=Math.round((t.valid[1]-t.valid[0])/e.resolution),o=0,s=r;o<s.length;o++){var a=s[o];a.geometry&&w.isPoint(a.geometry)&&this._wrapPoints(a,n)}var u=e.key;this._tileUpdateSet.add(e.key),this.notifyChange("updating"),this._processGraphics(u,r).then((function(e){i._addTile(u,e),i._tileUpdateSet.delete(u),i.notifyChange("updating")})).catch((function(e){if(i._tileUpdateSet.delete(u),i.notifyChange("updating"),!c.isAbortError(e))throw e}))},t.prototype._removeTile=function(e){if(this._tiles.has(e)){var t=this._tiles.get(e);this.container.removeChild(t),t.destroy(),this._tiles.delete(e)}},t.prototype._setFilterState=function(e,t){var i=this._attributeStore.getLocalId(e),r=this._attributeStore.getHighlightFlag(e);this._attributeStore.setData(i,0,0,r|(t?O.FILTER_FLAG_0:0))},t.prototype._getGraphicsData=function(e,t,i){var r=x.getInfo(this.view.spatialReference),n=this._graphicStore.getGraphicsData(e,t,i);if(r)for(var o=Math.round((r.valid[1]-r.valid[0])/t.resolution),s=0,a=n;s<a.length;s++){var u=a[s];u.geometry&&w.isPoint(u.geometry)&&this._wrapPoints(u,o)}return n.sort((function(e,t){return e.insertAfter-t.insertAfter})),n},t.prototype._getGraphicData=function(e,t,i){var r=this._graphicStore.getGraphicData(e,t,i),n=[r],o=x.getInfo(this.view.spatialReference);if(o){var s=Math.round((o.valid[1]-o.valid[0])/t.resolution);r.geometry&&w.isPoint(r.geometry)&&this._wrapPoints(r,s)}return n},t.prototype._wrapPoints=function(e,t){var i=e.geometry;512===t?i.x<20?e.geometry={points:[[i.x,i.y],[t,0]]}:i.x>492&&(e.geometry={points:[[i.x,i.y],[-t,0]]}):i.x<-20?e.geometry={points:[[i.x,i.y],[t,0]]}:i.x>532&&(e.geometry={points:[[i.x,i.y],[-t,0]]})},t.prototype._processGraphics=function(e,t,i){return s(this,void 0,void 0,(function(){var r,n;return o(this,(function(o){switch(o.label){case 0:return t&&t.length&&this._meshFactory?(r=this._meshFactory,[4,this._matcher.then((function(e){return r.analyze(t,e,null,null,i)}))]):[2,null];case 1:return n=o.sent(),this._attributeStore.sendUpdates(),[2,this._processAnalyzedGraphics(e,n)]}}))}))},t.prototype._processAnalyzedGraphics=function(e,t){for(var i=this._meshFactory,r=i.createMeshData(t.length),n=this._attributeStore,o=0,s=t;o<s.length;o++){var a=s[o];a.insertAfter=-1===a.insertAfter?-1:n.getLocalId(a.insertAfter),a.localId=n.getLocalId(a.attributes[this.uid]),i.write(r,a,null,null,e.level,null)}return M.TileData.fromMeshData(r)},t.prototype._abortProcessingGraphic=function(e){this._graphicIdToAbortController.has(e)&&this._graphicIdToAbortController.get(e).abort()},t.prototype._getNullSymbol=function(e){var t=e.geometry;return w.isPolyline(t)?P.errorPolylineSymbol2D:w.isPolygon(t)||w.isExtent(t)?P.errorPolygonSymbol2D:P.errorPointSymbol2D},t.prototype._flipUpdatingGraphics=function(){var e=this;this._updatingGraphicsTimer&&clearTimeout(this._updatingGraphicsTimer),this._updatingGraphicsTimer=setTimeout((function(){e._updatingGraphicsTimer=null,e.notifyChange("updating")}),160),this.notifyChange("updating")},r([g.property()],t.prototype,"_graphicProcessingQueue",void 0),r([g.property({constructOnly:!0})],t.prototype,"graphics",void 0),r([g.property({dependsOn:["_graphicProcessingQueue.updating"]})],t.prototype,"updating",null),r([g.property()],t.prototype,"view",void 0),r([g.property()],t.prototype,"updateRequested",void 0),r([g.subclass("esri.views.2d.layers.support.GraphicsView2D")],t)}(g.declared(B.GraphicsView(u.HandleOwnerMixin(h.IdentifiableMixin(a)))));t.default=A}.apply(null,r))||(e.exports=n)},1099:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i(62)],void 0===(n=function(e,t,i){var r=function(){function e(e,t){void 0===e&&(e=50),void 0===t&&(t=50),this._pool=new i(Map,!1,(function(e){return e.clear()}),t,e)}return e.prototype.acquire=function(){return this._pool.acquire()},e.prototype.release=function(e){this._pool.release(e)},e.acquire=function(){return n.acquire()},e.release=function(e){return n.release(e)},e}(),n=new r(100);return r}.apply(null,r))||(e.exports=n)},1101:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i(5),i(17),i(8),i(9),i(1090)],void 0===(n=function(e,t,i,r,n,o,s){Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),Object.defineProperty(t.prototype,"hasLabels",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"labelsVisible",{get:function(){return!1},enumerable:!0,configurable:!0}),t.prototype._renderGraphics=function(e,t){for(var i=0,r=this.children;i<r.length;i++){var n=r[i];n.isReady&&n.hasData&&(n.commitChanges(),e.context.setStencilFunction(514,n.stencilRef,255),n._displayList.replay(e,n,t))}},t.prototype.renderChildren=function(t){var i=t.painter;if(this.children.some((function(e){return e.hasData}))){e.prototype.renderChildren.call(this,t),this._renderGraphics(t);var r=i.effects.highlight;r.bind(t),this._renderGraphics(t,r.defines),r.draw(t),r.unbind()}},t}(s.FeatureContainer);t.default=a}.apply(null,r))||(e.exports=n)},1102:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i(1),i(0),i(11),i(4),i(39),i(2)],void 0===(n=function(e,t,i,r,n,o,s,a){Object.defineProperty(t,"__esModule",{value:!0});var u=function(e){function t(t){var i=e.call(this,t)||this;return i._queue=new Map,i._queueArray=[],i._onGoingGraphic=null,i._onGoingPromise=null,i._scheduledNextHandle=null,i._next=i._next.bind(i),i._finalize=i._finalize.bind(i),i}return i(t,e),Object.defineProperty(t.prototype,"length",{get:function(){return this._queueArray.length},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"updating",{get:function(){return this._queueArray.length>0||null!==this._onGoingPromise},enumerable:!0,configurable:!0}),t.prototype.cancel=function(e){if(this._onGoingGraphic&&this._onGoingGraphic.graphic===e&&(this._ongoingAbortController.abort(),this._onGoingGraphic=this._onGoingPromise=null),this._queue.has(e)){var t=this._queue.get(e);this._queue.delete(e);var i=this._queueArray.indexOf(t);this._queueArray.slice(i,1)}this._scheduleNext(),this.notifyChange("updating")},t.prototype.clear=function(){this._queue.clear(),this._queueArray.length=0,this._onGoingPromise&&(this._ongoingAbortController.abort(),this._onGoingGraphic=this._onGoingPromise=null),this._cancelNext(),this.notifyChange("updating")},t.prototype.has=function(e){return this._queue.has(e)},t.prototype.isOngoing=function(e){return this._onGoingGraphic&&this._onGoingGraphic.graphic===e},t.prototype.push=function(e,t){if(!this._queue.has(e)){var i={graphic:e,addOrUpdate:t};this._queueArray.push(i),this._queue.set(e,i),this._scheduleNext(),this.notifyChange("updating")}},t.prototype.refresh=function(){this.reset()},t.prototype.reset=function(){var e=this._onGoingGraphic;if(e){var t=e.graphic,i=e.addOrUpdate;this.push(t,i)}},t.prototype._finalize=function(){this._onGoingGraphic=null,this._ongoingAbortController=null,this._onGoingPromise=null,this.notifyChange("updating"),this._scheduleNext()},t.prototype._cancelNext=function(){this._scheduledNextHandle&&(this._scheduledNextHandle.remove(),this._scheduledNextHandle=null)},t.prototype._scheduleNext=function(){this._scheduledNextHandle||0===this._queue.size||null!=this._onGoingGraphic||(this._scheduledNextHandle=s.schedule(this._next))},t.prototype._next=function(){if(null==this._scheduledNextHandle||0===this._queue.size||this._onGoingGraphic)this._scheduledNextHandle=null;else{this._scheduledNextHandle=null;var e=this._peek(),t=e.graphic,i=e.addOrUpdate,r=o.createAbortController();this._queue.delete(t),this._onGoingGraphic=e,this._onGoingPromise=this.process(t,i,{signal:r.signal}),this._ongoingAbortController=r,this._onGoingPromise.then(this._finalize,this._finalize),this.notifyChange("updating")}},t.prototype._peek=function(){return 0===this._queueArray.length?null:this._queueArray.pop()},r([a.property({readOnly:!0})],t.prototype,"length",null),r([a.property({readOnly:!0})],t.prototype,"updating",null),r([a.property({constructOnly:!0})],t.prototype,"process",void 0),r([a.subclass("esri.views.2d.layers.graphics.GraphicProcessingQueue")],t)}(a.declared(n));t.default=u}.apply(null,r))||(e.exports=n)},1103:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i(5),i(15),i(21),i(53),i(1076),i(131),i(103),i(201),i(19),i(329),i(1104),i(1079)],void 0===(n=function(e,t,i,r,n,o,s,a,u,h,l,p,d,c){Object.defineProperty(t,"__esModule",{value:!0});var f={minX:0,minY:0,maxX:0,maxY:0},y=a.create(),g=[];function v(e,t,i,r,n){return f.minX=t,f.minY=i,f.maxX=r,f.maxY=n,e.search(f)}var m=function(){function e(e,t,i,n,a,u){this._graphics=n,this._onAdd=a,this._onRemove=u,this._index=s(9,r("csp-restrictions")?function(e){return{minX:e.bounds[0],minY:e.bounds[1],maxX:e.bounds[2],maxY:e.bounds[3]}}:[".bounds[0]",".bounds[1]",".bounds[2]",".bounds[3]"]),this._itemByGraphic=new Map,this._currentLevel=-1/0,this._tileInfoView=e,this._uidFieldName=i;var h=e.getClosestInfoForScale(t);h&&(this._currentLevel=h.level,this._resolution=this._tileInfoView.getTileResolution(h.level)),this._metersPerUnit=o.getMetersPerUnit(e.spatialReference)}return e.prototype.hitTest=function(e,t,i,r,o){e=p.normalizeMapX(e,this._tileInfoView.spatialReference);var s=.5*r*i;y[0]=e-s,y[1]=t-s,y[2]=e+s,y[3]=t+s;var d=.5*r*(i+50),f=v(this._index,e-d,t-d,e+d,t+d);if(!f||0===f.length)return[];for(var g,m={x:e,y:t},_=[],b=0,w=f;b<w.length;b++){var x=w[b];if(x.graphic.visible)switch(l.getJsonType(x.geometry)){case"esriGeometryPoint":var G=x.symbol;if(!G)continue;var S=x.geometry,P=void 0;switch(G.type){case"text":P=c.getTextSymbolBounds(S.x,S.y,G,x.size,r,o);break;case"cim":case"expanded-cim":P=c.getCIMMarkerBounds(S.x,S.y,G,r,r*this._metersPerUnit,o);break;default:P=c.getMarkerSymbolBounds(S.x,S.y,G,r,r*this._metersPerUnit,o)}u.polygonContainsPoint(P,m)&&_.push(x);break;case"esriGeometryPolyline":var M=x.symbol;if(!M)continue;g=1.5*r*window.devicePixelRatio*n.pt2px(M.width),c.isPointOnPolyline(x.geometry,e,t,g)&&_.push(x);break;case"esriGeometryEnvelope":var O=x.geometry,I=a.fromValues(O.xmin,O.ymin,O.xmax,O.ymax);a.intersects(I,y)&&_.push(x);break;case"esriGeometryPolygon":if(u.polygonContainsPoint(x.geometry,m)){_.push(x);break}var T=h.getPolygonExtent(x.geometry);if(Math.abs(T.ymax-T.ymin)<5*r||Math.abs(T.xmax-T.xmin)<5*r){var C=a.fromValues(T.xmin,T.ymin,T.xmax,T.ymax);a.intersects(C,y)&&_.push(x)}break;case"esriGeometryMultipoint":var q=x.symbol;if(!q)continue;for(var R=x.geometry.points,U=void 0,B=0;B<R.length;B++){if("text"===q.type){var V=q;U=c.getTextSymbolBounds(R[B][0],R[B][1],V,x.size,r,o)}else U=c.getMarkerSymbolBounds(R[B][0],R[B][1],q,r,r*this._metersPerUnit,o);if(u.polygonContainsPoint(U,m)){_.push(x);break}}}}return _.sort((function(e,t){var i=c.graphicGeometryToNumber(e.graphic),r=c.graphicGeometryToNumber(t.graphic);return i===r?t.zorder-e.zorder:i-r})),_.map((function(e){return e.graphic}))},e.prototype.getGraphicsData=function(e,t,r){var n=v(this._index,t.bounds[0],t.bounds[1],t.bounds[2],t.bounds[3]);if(0===n.length||0===r.length)return[];n.sort((function(e,t){return e.zorder-t.zorder})),n[0].insertAfter=-1;for(var o=1;o<n.length;o++)n[o].insertAfter=n[o-1].graphic.uid;n.sort((function(e,t){return e.graphic.uid-t.graphic.uid})),r.sort((function(e,t){return e.uid-t.uid}));for(var s,a=0,u=0,h=[],l={originPosition:"upperLeft",scale:[t.resolution,t.resolution],translate:[t.bounds[0],t.bounds[3]]},p=0,c=r;p<c.length;p++){var f=c[p];for(u=-2;a<n.length;)if(s=n[a],a++,f.uid===s.graphic.uid){u=s.insertAfter;break}if(s.geometry&&-2!==u){var y=s.getGeometryQuantized(l),g=i({},s.graphic.attributes);g[this._uidFieldName]=f.uid,null==s.groupId&&(s.groupId=e.createTemplateGroup(s.symbol,null,null)),h.push({centroid:d.default.getCentroidQuantized(s,l),geometry:y,attributes:g,symbol:s.symbol,groupId:s.groupId,insertAfter:u})}}return h},e.prototype.getGraphicData=function(e,t,r){var n=this._itemByGraphic.get(r);if(!n)return null;var o=v(this._index,t.bounds[0],t.bounds[1],t.bounds[2],t.bounds[3]);o.sort((function(e,t){return e.zorder-t.zorder}));var s=o.indexOf(n),a=0===s||-1===s?-1:o[s-1].graphic.uid,u={originPosition:"upperLeft",scale:[t.resolution,t.resolution],translate:[t.bounds[0],t.bounds[3]]},h=n.getGeometryQuantized(u),l=i({},n.graphic.attributes);return l[this._uidFieldName]=r.uid,null==n.groupId&&(n.groupId=e.createTemplateGroup(n.symbol,null,null)),{centroid:d.default.getCentroidQuantized(n,u),geometry:h,attributes:l,symbol:n.symbol,groupId:n.groupId,insertAfter:a}},e.prototype.queryTileData=function(e,t){var i=50*t.resolution,r=a.pad(t.bounds,i,a.create()),n=v(this._index,r[0],r[1],r[2],r[3]),o=[];return this._createTileGraphics(o,e,n,{originPosition:"upperLeft",scale:[t.resolution,t.resolution],translate:[t.bounds[0],t.bounds[3]]}),o},e.prototype.has=function(e){return this._itemByGraphic.has(e)},e.prototype.getBounds=function(e){return this._itemByGraphic.has(e)?this._itemByGraphic.get(e).bounds:null},e.prototype.add=function(e,t,i){if(e){this._onAdd(e);var r=d.default.acquire(e,t,i,this._resolution,this._resolution*this._metersPerUnit,this._tileInfoView.spatialReference);return this._itemByGraphic.set(e,r),i&&this._index.insert(r),r.bounds}},e.prototype.remove=function(e){if(this._itemByGraphic.has(e)){this._onRemove(e);var t=this._itemByGraphic.get(e);this._index.remove(t),this._itemByGraphic.delete(e)}},e.prototype.updateZ=function(){for(var e,t,i=this._graphics.items,r=0;r<i.length;r++)t=i[r],(e=this._itemByGraphic.get(t))&&(e.zorder=r)},e.prototype.update=function(e,t,i){var r=this._itemByGraphic.get(e);r.groupId=null;var n=a.clone(r.bounds);return r.size[0]=r.size[1]=0,this._index.remove(r),r.set(e,t,i,this._resolution,this._resolution*this._metersPerUnit,this._tileInfoView.spatialReference),i&&this._index.insert(r),{oldBounds:n,newBounds:r.bounds}},e.prototype.updateLevel=function(e){var t=this;if(this._currentLevel!==e){this._currentLevel=e;var i=this._tileInfoView.getTileResolution(e);this._resolution=i,this._index.clear(),g.length=0,this._itemByGraphic.forEach((function(e){e.updateBounds(t._resolution,t._resolution*t._metersPerUnit,t._tileInfoView.spatialReference),e.geometry&&g.push(e)})),this._index.load(g)}},e.prototype.clear=function(){this._itemByGraphic.clear(),this._index.clear()},e.prototype._createTileGraphics=function(e,t,r,n){var o,s,a,u,h=this._uidFieldName;r.sort((function(e,t){return e.zorder-t.zorder}));for(var l=0;l<r.length;l++){o=(a=r[l]).graphic,s=a.getGeometryQuantized(n),u=0===l?-1:r[l-1].graphic.uid;var p=i({},a.graphic.attributes);p[h]=o.uid,null==a.groupId&&(a.groupId=t.createTemplateGroup(a.symbol,null,null)),e.push({centroid:d.default.getCentroidQuantized(a,n),geometry:s,attributes:p,symbol:a.symbol,groupId:a.groupId,insertAfter:u})}},e}();t.default=m}.apply(null,r))||(e.exports=n)},1104:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i(13),i(131),i(341),i(19),i(137),i(322),i(196),i(1079)],void 0===(n=function(e,t,i,r,n,o,s,a,u,h){Object.defineProperty(t,"__esModule",{value:!0});var l=new u.default,p=new u.default;function d(e){e.coords.length=0,e.lengths.length=0}var c=function(){function e(){this.bounds=r.create(),this.graphic=null,this.size=[0,0,0,0]}return e.acquire=function(t,i,r,n,o,s){var a;return void 0===t&&(t=null),0===e._pool.length?a=new e:(a=e._pool.pop(),this._set.delete(a)),a.acquire(t,i,r,n,o,s),a},e.release=function(e){e&&!this._set.has(e)&&(e.release(),this._pool.push(e),this._set.add(e))},e.getCentroidQuantized=function(e,t){if(o.isPolygon(e.geometry)){var r=e.symbol;if(i.isNone(r))return null;if(h.isMarkerSymbol(r.type)){var a=n.polygonCentroid(e.geometry);return s.quantizePoint(t,{},{x:a[0],y:a[1]},!1,!1)}}return null},e.prototype.acquire=function(e,t,i,r,n,o){void 0===e&&(e=null),e&&this.set(e,t,i,r,n,o)},e.prototype.release=function(){this.graphic=null,this.symbolResource=null,this.geometry=null},Object.defineProperty(e.prototype,"symbol",{get:function(){return this.symbolResource.symbol},enumerable:!0,configurable:!0}),e.prototype.set=function(e,t,i,r,n,o){this.graphic=e,this.geometry=i,this.symbolResource=t,this.updateBounds(r,n,o)},e.prototype.updateBounds=function(e,t,i){h.getBounds(this.bounds,this.size,this.symbolResource,this.geometry,e,t,i)},e.prototype.getGeometryQuantized=function(e){if(o.isPolygon(this.geometry)){var t=this.geometry.rings;if(1===t.length&&2===t[0].length)return s.quantizeGeometry(e,{paths:[[t[0][0],t[0][1]]]})}else if(o.isPolyline(this.geometry))return d(l),d(p),a.convertFromPolyline(l,this.geometry),a.generalizeOptimizedGeometry(p,l,this.geometry.hasZ,this.geometry.hasM,"esriGeometryPolyline",e.scale[0]),a.quantizeOptimizedGeometry(l,p,this.geometry.hasZ,this.geometry.hasM,"esriGeometryPolyline",e),a.convertToPolyline(l,this.geometry.hasZ,this.geometry.hasM);return s.quantizeGeometry(e,this.geometry)},e._pool=[],e._set=new Set,e}();t.default=c}.apply(null,r))||(e.exports=n)},1105:function(e,t,i){var r,n;r=[i.dj.c(e.i),t,i(1),i(0),i(2)],void 0===(n=function(e,t,i,r,n){Object.defineProperty(t,"__esModule",{value:!0}),t.GraphicsView=function(e){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.graphics=null,t.renderer=null,t.view=null,t}return i(t,e),r([n.property()],t.prototype,"graphics",void 0),r([n.property()],t.prototype,"renderer",void 0),r([n.property()],t.prototype,"updating",void 0),r([n.property()],t.prototype,"view",void 0),r([n.subclass("esri.views.layers.GraphicsView")],t)}(n.declared(e))}}.apply(null,r))||(e.exports=n)}}]);