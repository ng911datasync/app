(function(){(this||window).webpackJsonp.registerAbsMids({"esri/views/2d/layers/TileImageryLayerView2D":1052,"esri/views/layers/support/ClipArea":1064,"esri/layers/graphics/data/projectionSupport":1070,"esri/views/layers/LayerView":1071,"esri/views/2d/layers/LayerView2D":1072,"esri/views/layers/support/ClipRect":1073,"esri/views/layers/support/Geometry":1074,"esri/views/layers/support/Path":1075,"esri/geometry/projection":1100,"esri/renderers/support/clickToleranceUtils":1114,"esri/geometry/pe":1119,"esri/geometry/support/GeographicTransformation":1120,"esri/geometry/support/GeographicTransformationStep":1121,"esri/views/support/drapedUtils":1147,"esri/layers/support/rasterFunctions/rasterProjectionHelper":1197,"esri/layers/support/rasterDatasets/RawBlockCache":1308,"esri/views/layers/TileImageryLayerView":1944})})(),(window.webpackJsonp=window.webpackJsonp||[]).push([[54],{1052:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(1),r(0),r(8),r(9),r(18),r(43),r(10),r(22),r(15),r(6),r(13),r(4),r(21),r(16),r(2),r(1070),r(1110),r(324),r(1308),r(1130),r(1197),r(320),r(1072),r(334),r(348),r(353),r(1071),r(336),r(1944),r(1147)],void 0===(i=function(e,t,r,n,i,o,s,a,p,u,l,c,_,f,h,d,y,g,v,P,m,b,E,w,T,S,x,R,O,M,I,N){var j=c.getLogger("esri.views.2d.layers.TileImageryLayerView2D"),G=[0,0];return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._handles=new u,t._tileStrategy=null,t._tileInfoView=null,t._fetchQueue=null,t._blockCacheRegistryUrl=null,t._blockCacheRegistryId=null,t._tileInfo=null,t._fullExtent=null,t._bitmapView=null,t._emptyTilePixelBlock=null,t._previousSrcResolution=null,t._needBlockCacheUpdate=!1,t._globalSymbolizerParams=null,t._abortController=null,t._globalUpdateRequested=!1,t.useWebGLForProcessing=null,t.container=new w.Container,t.datumTransformation=null,t.layer=null,t._redrawDebounced=f.debounce((function(e){return t._redrawImage(e)}),2e3),t}return r(t,e),t.prototype.initialize=function(){var e,t=this.layer.tileInfo;t&&t.spatialReference||(e=new p("layerview:tiling-information-missing","The layer doesn't provide tiling information",{layer:this.layer}));var r=this.view.spatialReference;g.doesBrowserSupportProjection(r,this.layer.spatialReference)?(this._fullExtent=E.projectExtent(this.layer.fullExtent,r,this.datumTransformation),null==this._fullExtent&&(e=new p("layerview:projection-not-supported","The layer extent cannot be projected to the view's spatial reference",{layer:this.layer}))):e=new p("layerview:projection-not-supported","The layer requires projection engine, which is not supported in current browser",{layer:this.layer}),e&&this.addResolvingPromise(f.reject(e))},Object.defineProperty(t.prototype,"useProgressiveUpdate",{get:function(){return null==this._get("useProgressiveUpdate")||this._get("useProgressiveUpdate")},set:function(e){var t=this;this._tileStrategy&&this.useProgressiveUpdate!==e&&(this._tileStrategy.destroy(),this._bitmapView.removeAllChildren(),this._tileStrategy=new R({cachePolicy:e?"keep":"purge",resampling:!1,acquireTile:function(e){return t.acquireTile(e)},releaseTile:function(e){return t.releaseTile(e)},cacheSize:e?40:0,tileInfoView:this._tileInfoView}),this._set("useProgressiveUpdate",e),this.requestUpdate())},enumerable:!0,configurable:!0}),t.prototype.hitTest=function(e,t){if(this.suspended)return f.resolve(null);var r=this.view.toMap(h.createScreenPoint(e,t));return f.resolve(new a({attributes:{},geometry:r}))},t.prototype.update=function(e){this._fetchQueue.pause(),this._fetchQueue.state=e.state,this._tileStrategy.update(e),this._fetchQueue.resume();var t=!this.useProgressiveUpdate||this._needBlockCacheUpdate;if(this.layer.raster&&t){var r=e.state.extent,n=this._previousViewResolution===e.state.resolution?this._previousSrcResolution:E.projectResolution(new s.Point({x:e.state.resolution,y:e.state.resolution,spatialReference:this.view.spatialReference}),this.layer.spatialReference,this._fullExtent,this.datumTransformation);m.update(this._blockCacheRegistryUrl,this._blockCacheRegistryId,r.toJSON?r:s.Extent.fromJSON(r),e.state.resolution,n,this.layer.raster.ioConfig.sampling),this._previousViewResolution=e.state.resolution,this._previousSrcResolution=n,this._needBlockCacheUpdate=!1}this.notifyChange("updating")},t.prototype.attach=function(){var e=this;this.layer.increaseRasterJobHandlerUsage(),null==this.useWebGLForProcessing&&(this.useWebGLForProcessing=this.layer._symbolizer.canRenderInWebGL),l("esri-webgl-texture-float")&&l("esri-webgl-color-buffer-float")||(this.useWebGLForProcessing=!1),this.useWebGLForProcessing&&(this.container.stage.context.gl.getExtension("WEBGL_color_buffer_float"),this.container.stage.context.gl.getExtension("OES_texture_float")),this._tileInfo=this._createTileInfo(),this._tileInfoView=new S(this._tileInfo,this._fullExtent),this._fetchQueue=new x({tileInfoView:this._tileInfoView,concurrency:10,process:function(t,r){return e.fetchTile(t,r)}}),this._tileStrategy=new R({cachePolicy:this.useProgressiveUpdate?"keep":"purge",resampling:!1,acquireTile:function(t){return e.acquireTile(t)},releaseTile:function(t){return e.releaseTile(t)},cacheSize:this.useProgressiveUpdate?40:0,tileInfoView:this._tileInfoView}),this._bitmapView=new w.RasterTileContainer(this._tileInfoView,this.clips),this.container.addChild(this._bitmapView),this._handles.add([d.watch(this,["layer.interpolation","layer.bandIds","layer.renderer"],(function(){return e._redrawDebounced().catch((function(e){f.isAbortError(e)||j.error(e)}))})),d.watch(this,["layer.multidimensionalDefinition"],this.refreshDebounced),this.clips.on("change",(function(){e._bitmapView.setClips(e.clips)}))]),this._updateBlockCacheRegistry()},t.prototype.detach=function(){this.layer.decreaseRasterJobHandlerUsage(),this._tileStrategy.destroy(),this._fetchQueue.clear(),this.container.removeAllChildren(),this._fetchQueue=this._tileStrategy=this._tileInfoView=null,m.unregister(this._blockCacheRegistryUrl,this._blockCacheRegistryId)},t.prototype.moveStart=function(){this.requestUpdate()},t.prototype.viewChange=function(){this.requestUpdate()},t.prototype.moveEnd=function(){var e=this;!this.hasTilingEffects&&this.useProgressiveUpdate||(this._abortController&&this._abortController.abort(),this._abortController=f.createAbortController(),0===this._fetchQueue.length&&this._redrawImage(this._abortController.signal).then((function(){e._globalUpdateRequested=!1,e.requestUpdate()}))),this.requestUpdate()},t.prototype.createFetchPopupFeaturesQueryGeometry=function(e,t){return N.createQueryGeometry(e,t,this.view)},t.prototype.doRefresh=function(){return o(this,void 0,void 0,(function(){var e=this;return i(this,(function(t){return this.updateRequested||this.suspended||(this._updateBlockCacheRegistry(),this._fetchQueue.reset(),this._tileStrategy.tiles.forEach((function(t){return e._enqueueTileFetch(t)})),this.notifyChange("updating")),[2]}))}))},t.prototype.isUpdating=function(){return this._fetchQueue.length>0||this._globalUpdateRequested},t.prototype.acquireTile=function(e){var t,r,n=this._bitmapView.createTile(e),i=n.bitmap;return t=this._tileInfoView.getTileCoords(G,n.key),i.x=t[0],i.y=t[1],i.resolution=this._tileInfoView.getTileResolution(n.key),r=this._tileInfoView.tileInfo.size,i.width=r[0],i.height=r[1],this._enqueueTileFetch(n),this.requestUpdate(),this._needBlockCacheUpdate=!0,this._globalUpdateRequested=this.hasTilingEffects||!this.useProgressiveUpdate,n},t.prototype.releaseTile=function(e){var t=this;this._fetchQueue.abort(e.key.id),this._bitmapView.removeChild(e),e.once("detach",(function(){e.destroy(),t.requestUpdate()})),this.requestUpdate()},t.prototype.fetchTile=function(e,t){return o(this,void 0,void 0,(function(){var r,n,o,s;return i(this,(function(i){switch(i.label){case 0:r=!_.isNone(t)&&t.signal,n={tileInfo:this._tileInfo,signal:_.unwrap(r),registryId:this._blockCacheRegistryId,requestRawData:this.useWebGLForProcessing,srcResolution:this._previousSrcResolution,datumTransformation:this.datumTransformation},i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this.layer.fetchTile(e.level,e.row,e.col,n)];case 2:return null===(o=i.sent())?[2,null]:[2,o];case 3:if(s=i.sent(),!f.isAbortError(s))return[2,null];throw s;case 4:return[2]}}))}))},t.prototype._createTileInfo=function(){var e=this.view.spatialReference,t=new s.Point({x:this._fullExtent.xmin,y:this._fullExtent.ymax,spatialReference:e}),r=P.create({spatialReference:e,size:512});return(0===r.origin.x||r.origin.x>t.x)&&(r.origin=t),r},t.prototype._enqueueTileFetch=function(e,t){return o(this,void 0,void 0,(function(){var t,r,n,o,s,a,p,u,l,c=this;return i(this,(function(i){switch(i.label){case 0:if(this._fetchQueue.has(e.key.id))return[2];i.label=1;case 1:return i.trys.push([1,13,,14]),[4,this._fetchQueue.push(e.key)];case 2:if(t=i.sent(),r=this.layer,n=r.bandIds,o=r.interpolation,s=!this.useProgressiveUpdate||this.hasTilingEffects&&!this._globalSymbolizerParams,!this._globalUpdateRequested||this.moving||0!==this._fetchQueue.length)return[3,7];s=!1,i.label=3;case 3:return i.trys.push([3,5,,6]),[4,this._redrawImage(this._abortController&&this._abortController.signal)];case 4:return i.sent(),[3,6];case 5:return a=i.sent(),f.isAbortError(a)&&j.error(a),[3,6];case 6:this._globalUpdateRequested=!1,i.label=7;case 7:return t&&t.pixelBlock?this.useWebGLForProcessing?[3,9]:[4,this.layer.applyRenderer(t.pixelBlock,this.hasTilingEffects?this._globalSymbolizerParams:null)]:[3,11];case 8:return p=i.sent(),e.bitmap.rawPixelBlock=t.pixelBlock,e.bitmap.source=p,[3,10];case 9:e.bitmap.source=t.pixelBlock,i.label=10;case 10:return e.bitmap.symbolizerParameters=this.useWebGLForProcessing?this._globalSymbolizerParams||this.layer._symbolizer.generateWebGLParameters(b.extractBands(t.pixelBlock,n)):null,!e.bitmap.transformGrid&&this.useWebGLForProcessing&&(e.bitmap.transformGrid=t.transformGrid),[3,12];case 11:u=this._createEmptyTilePixelBlock(),e.bitmap.source=u,e.bitmap.symbolizerParameters=this.useWebGLForProcessing?this.layer._symbolizer.generateWebGLParameters(u):null,e.bitmap.transformGrid=null,i.label=12;case 12:return e.bitmap.bandIds=n,e.bitmap.width=this._tileInfoView.tileInfo.size[0],e.bitmap.height=this._tileInfoView.tileInfo.size[1],e.bitmap.interpolation=o,e.bitmap.suspended=s,e.attached&&e.bitmap.updateTexture(),e.once("attach",(function(){return c.requestUpdate()})),this._bitmapView.addChild(e),[3,14];case 13:return l=i.sent(),f.isAbortError(l)||j.error(l),[3,14];case 14:return this.requestUpdate(),[2]}}))}))},t.prototype._redrawImage=function(e){return o(this,void 0,void 0,(function(){var t,r,n,s,a=this;return i(this,(function(p){switch(p.label){case 0:return this.layer.updateRenderer(),this.hasTilingEffects?[4,this._updateGlobalSymbolizerParams(e)]:[3,2];case 1:return p.sent(),[3,3];case 2:this._globalSymbolizerParams=null,p.label=3;case 3:return t=this.layer,r=t.bandIds,n=t.interpolation,s=this._bitmapView.children.map((function(e){return o(a,void 0,void 0,(function(){var t;return i(this,(function(i){switch(i.label){case 0:return this.useWebGLForProcessing?[3,2]:(t=e.bitmap,[4,this.layer.applyRenderer(e.bitmap.rawPixelBlock,this.hasTilingEffects?this._globalSymbolizerParams:null)]);case 1:t.source=i.sent(),i.label=2;case 2:return e.bitmap.symbolizerParameters=this.useWebGLForProcessing?this._globalSymbolizerParams||this.layer._symbolizer.generateWebGLParameters(b.extractBands(e.bitmap.source,r)):null,e.bitmap.bandIds=r,e.bitmap.interpolation=n,e.bitmap.suspended=!1,[2]}}))}))})),[4,f.eachAlways(s)];case 4:return p.sent(),this.container.requestRender(),[2]}}))}))},t.prototype._createEmptyTilePixelBlock=function(){if(!this._emptyTilePixelBlock){var e=this._tileInfoView.tileInfo.size[0],t=this._tileInfoView.tileInfo.size[1];this._emptyTilePixelBlock=new v({width:e,height:t,pixels:[new Uint8Array(e*t)],mask:new Uint8Array(e*t),pixelType:"u8"})}return this._emptyTilePixelBlock},t.prototype._updateGlobalSymbolizerParams=function(e){return o(this,void 0,void 0,(function(){var t,r,n;return i(this,(function(i){switch(i.label){case 0:return t={srcResolution:this._previousSrcResolution,registryId:this._blockCacheRegistryId,signal:e},[4,this.layer.fetchPixels(this.view.extent,this.view.width,this.view.height,t)];case 1:return(r=i.sent())&&r.pixelBlock?(n=this.layer._symbolizer.generateWebGLParameters(b.extractBands(r.pixelBlock,this.layer.bandIds)),!this.useWebGLForProcessing&&n&&this.layer.renderer&&"raster-stretch"===this.layer.renderer.type&&(n.factor=n.factor.map((function(e){return 255*e})),n.outMin=Math.round(255*n.outMin),n.outMax=Math.round(255*n.outMax)),this._globalSymbolizerParams=n,[2]):[2]}}))}))},t.prototype._updateBlockCacheRegistry=function(){var e=this.layer,t=e.url,r=e.rasterInfo,n=e.multidimensionalDefinition,i=e.raster,o=n&&r&&r.multidimensionalInfo?t+"?sliceId="+i.getSliceIndex(n):t;o!==this._blockCacheRegistryUrl&&(null==this._blockCacheRegistryUrl&&m.unregister(this._blockCacheRegistryUrl,this._blockCacheRegistryId),this._blockCacheRegistryId=m.register(o,this.layer.raster.rasterInfo),this._blockCacheRegistryUrl=o)},n([y.property()],t.prototype,"useProgressiveUpdate",null),n([y.subclass("esri.views.2d.layers.TileImageryLayerView2D")],t)}(y.declared(I.TileImageryLayerView(M.RefreshableLayerView(T.LayerView2D(O)))))}.apply(null,n))||(e.exports=i)},1064:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(0),r(1),r(3),r(2)],void 0===(i=function(e,t,r,n,i,o){return function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),r([o.subclass("esri.views.layers.support.ClipArea")],t)}(o.declared(i.JSONSupport))}.apply(null,n))||(e.exports=i)},1070:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(8),r(9),r(10),r(4),r(1100),r(37),r(35)],void 0===(i=function(e,t,r,n,i,o,s,a,p){Object.defineProperty(t,"__esModule",{value:!0});var u=[0,0];function l(e,t){var r,n,i;if(!t)return null;if("x"in t){var o={x:0,y:0};return r=e(t.x,t.y,u),o.x=r[0],o.y=r[1],null!=t.z&&(o.z=t.z),null!=t.m&&(o.m=t.m),o}return"xmin"in t?(o={xmin:0,ymin:0,xmax:0,ymax:0},n=e(t.xmin,t.ymin,u),o.xmin=n[0],o.ymin=n[1],i=e(t.xmax,t.ymax,u),o.xmax=i[0],o.ymax=i[1],t.hasZ&&(o.zmin=t.zmin,o.zmax=t.zmax,o.hasZ=!0),t.hasM&&(o.mmin=t.mmin,o.mmax=t.mmax,o.hasM=!0),o):"rings"in t?{rings:c(t.rings,e),hasM:t.hasM,hasZ:t.hasZ}:"paths"in t?{paths:c(t.paths,e),hasM:t.hasM,hasZ:t.hasZ}:"points"in t?{points:_(t.points,e),hasM:t.hasM,hasZ:t.hasZ}:void 0}function c(e,t){for(var r=[],n=0,i=e;n<i.length;n++){var o=i[n];r.push(_(o,t))}return r}function _(e,t){for(var r=[],n=0,i=e;n<i.length;n++){var o=i[n],s=t(o[0],o[1],[0,0]);r.push(s),o.length>2&&s.push(o[2]),o.length>3&&s.push(o[3])}return r}function f(e,t){return!(!a.isValid(e)||!a.isValid(t)||a.equals(e,t)||p.canProject(e,t))}t.doesBrowserSupportProjection=function(e,t){return!f(e,t)||s.isSupported()},t.checkProjectionSupport=function(e,t){return n(this,void 0,void 0,(function(){var n,o,a;return r(this,(function(r){if(!t)return[2];if(Array.isArray(e)){for(n=0,o=e;n<o.length;n++)if(f((a=o[n]).geometry&&a.geometry.spatialReference,t)){if(s.isSupported())return[2,s.load()];throw new i("feature-store:unsupported-query","projection not supported",{inSpatialReference:e,outSpatialReference:t})}return[2]}if(!f(e,t))return[2];if(s.isSupported())return[2,s.load()];throw new i("feature-store:unsupported-query","projection not supported",{inSpatialReference:e,outSpatialReference:t})}))}))};var h=l.bind(null,p.lngLatToXY),d=l.bind(null,p.xyToLngLat);t.project=function(e,t,r){return e?(r||(r=t,t=e.spatialReference),a.isValid(t)&&a.isValid(r)&&!a.equals(t,r)?p.canProject(t,r)?a.isWebMercator(r)?h(e):d(e):s.projectMany([e],t,r,null,!0)[0]:e):e};var y=new(function(){function e(){this._jobs=[],this._timer=null,this._process=this._process.bind(this)}return e.prototype.push=function(e,t,i){return n(this,void 0,void 0,(function(){var n,s=this;return r(this,(function(r){return e&&e.length&&t&&i&&!a.equals(t,i)||o.resolve(e),n={geometries:e,inSpatialReference:t,outSpatialReference:i,resolve:null},this._jobs.push(n),[2,o.create((function(e){n.resolve=e,null===s._timer&&(s._timer=setTimeout(s._process,10))}))]}))}))},e.prototype._process=function(){this._timer=null;var e=this._jobs.shift();if(e){var t=e.geometries,r=e.inSpatialReference,n=e.outSpatialReference,i=e.resolve;p.canProject(r,n)?a.isWebMercator(n)?i(t.map(h)):i(t.map(d)):i(s.projectMany(t,r,n,null,!0)),this._jobs.length>0&&(this._timer=setTimeout(this._process,10))}},e}());t.projectMany=function(e,t,i){return n(this,void 0,void 0,(function(){return r(this,(function(r){return[2,y.push(e,t,i)]}))}))}}.apply(null,n))||(e.exports=i)},1071:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(1),r(0),r(11),r(52),r(132),r(133),r(6),r(98),r(2)],void 0===(i=function(e,t,r,n,i,o,s,a,p,u,l){return function(e){function t(t){var r=e.call(this,t)||this;return r.layer=null,r.parent=null,r}return r(t,e),t.prototype.initialize=function(){var e=this;this.when().catch((function(t){if("layerview:create-error"!==t.name){var r=e.layer&&e.layer.id||"no id",n=e.layer&&e.layer.title||"no title";throw p.getLogger(e.declaredClass).error("#resolve()","Failed to resolve layer view (layer title: '"+n+"', id: '"+r+"')",t),t}}))},t.prototype.destroy=function(){this.layer=this.parent=null},Object.defineProperty(t.prototype,"fullOpacity",{get:function(){var e=function(e){return null==e?1:e};return e(this.get("layer.opacity"))*e(this.get("parent.fullOpacity"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"suspended",{get:function(){return!this.canResume()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"suspendInfo",{get:function(){return this.getSuspendInfo()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"updating",{get:function(){return!!(this.updatingHandles&&this.updatingHandles.updating||this.isUpdating())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"visible",{get:function(){return!0===this.get("layer.visible")},set:function(e){void 0!==e?this._override("visible",e):this._clearOverride("visible")},enumerable:!0,configurable:!0}),t.prototype.canResume=function(){return!this.get("parent.suspended")&&this.get("view.ready")&&this.get("layer.loaded")&&this.visible||!1},t.prototype.getSuspendInfo=function(){var e=this.parent&&this.parent.suspended?this.parent.suspendInfo:{};return this.view&&this.view.ready||(e.viewNotReady=!0),this.layer&&this.layer.loaded||(e.layerNotLoaded=!0),this.visible||(e.layerInvisible=!0),e},t.prototype.isUpdating=function(){return!1},n([l.property({dependsOn:["layer.opacity","parent.fullOpacity"]})],t.prototype,"fullOpacity",null),n([l.property()],t.prototype,"layer",void 0),n([l.property()],t.prototype,"parent",void 0),n([l.property({readOnly:!0,dependsOn:["visible","layer.loaded","parent.suspended","view?.ready"]})],t.prototype,"suspended",null),n([l.property({readOnly:!0,dependsOn:["visible","layer.loaded","parent.suspended","view?.ready"]})],t.prototype,"suspendInfo",null),n([l.property({type:Boolean,dependsOn:["updatingHandles.updating"],readOnly:!0})],t.prototype,"updating",null),n([l.property({dependsOn:["layer.visible"]})],t.prototype,"visible",null),n([l.subclass("esri.views.layers.LayerView")],t)}(l.declared(s.HandleOwnerMixin(a.IdentifiableMixin(u.EsriPromiseMixin(o.EventedMixin(i))))))}.apply(null,n))||(e.exports=i)},1072:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(1),r(0),r(20),r(102),r(16),r(2),r(1064),r(1073),r(1074),r(1075)],void 0===(i=function(e,t,r,n,i,o,s,a,p,u,l,c){Object.defineProperty(t,"__esModule",{value:!0});var _=i.ofType({key:"type",base:p,typeMap:{rect:u,path:c,geometry:l}});t.LayerView2D=function(e){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.clips=new _,t.moving=!1,t.attached=!1,t.lastUpdateId=-1,t.updateRequested=!1,t}return r(t,e),t.prototype.initialize=function(){var e=this;this.when((function(){e.requestUpdate()}),(function(){}));var t=function(){return e.notifyChange("rendering")};this.handles.add([s.init(this,"suspended",(function(t){e.container&&(e.container.visible=!t),e.view&&!t&&e.updateRequested&&e.view.requestLayerViewUpdate(e)}),!0),s.init(this,["fullOpacity","container"],(function(){e.container&&(e.container.opacity=e.fullOpacity)}),!0),s.on(this,"container","post-render",t),s.on(this,"container","will-render",t)])},t.prototype.destroy=function(){this.attached&&(this.attached=!1,this.detach()),this.handles.remove("initialize"),this.updateRequested=!1,this.layer=null,this.view=null},Object.defineProperty(t.prototype,"rendering",{get:function(){return this.attached&&!this.suspended&&(this.moving||this.container.renderRequested||this.isRendering())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"updating",{get:function(){return!this.suspended&&(!this.attached||this.updateRequested||this.isUpdating())},enumerable:!0,configurable:!0}),t.prototype.isVisibleAtScale=function(e){var t=!0,r=this.layer,n=r.minScale,i=r.maxScale;if(null!=n&&null!=i){var o=!n,s=!i;!o&&e<=n&&(o=!0),!s&&e>=i&&(s=!0),t=o&&s}return t},t.prototype.requestUpdate=function(){this.updateRequested||(this.updateRequested=!0,this.suspended||this.view.requestLayerViewUpdate(this))},t.prototype.processUpdate=function(e){!this.isFulfilled()||this.isResolved()?(this._set("updateParameters",e),this.updateRequested&&!this.suspended&&(this.updateRequested=!1,this.update(e))):this.updateRequested=!1},t.prototype.isUpdating=function(){return!1},t.prototype.isRendering=function(){return!1},t.prototype.canResume=function(){var e=this.inherited(arguments);return e&&(e=this.isVisibleAtScale(this.view.scale)),e},n([a.property({type:_,set:function(e){var t=o.referenceSetter(e,this._get("clips"),_);this._set("clips",t)}})],t.prototype,"clips",void 0),n([a.property()],t.prototype,"moving",void 0),n([a.property({dependsOn:["attached","suspended","moving"]})],t.prototype,"rendering",null),n([a.property()],t.prototype,"attached",void 0),n([a.property()],t.prototype,"container",void 0),n([a.property({dependsOn:["view.scale","layer.minScale","layer.maxScale"]})],t.prototype,"suspended",void 0),n([a.property({readOnly:!0})],t.prototype,"updateParameters",void 0),n([a.property()],t.prototype,"updateRequested",void 0),n([a.property({dependsOn:["updateRequested","attached","suspended"]})],t.prototype,"updating",null),n([a.property()],t.prototype,"view",void 0),n([a.subclass("esri.views.2d.layers.LayerView2D")],t)}(a.declared(e))}}.apply(null,n))||(e.exports=i)},1073:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(0),r(1),r(2),r(1064)],void 0===(i=function(e,t,r,n,i,o){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="rect",t.left=null,t.right=null,t.top=null,t.bottom=null,t}var o;return n(t,e),o=t,t.prototype.clone=function(){return new o({left:this.left,right:this.right,top:this.top,bottom:this.bottom})},Object.defineProperty(t.prototype,"version",{get:function(){return(this._get("version")||0)+1},enumerable:!0,configurable:!0}),r([i.property({type:[Number,String],json:{write:!0}})],t.prototype,"left",void 0),r([i.property({type:[Number,String],json:{write:!0}})],t.prototype,"right",void 0),r([i.property({type:[Number,String],json:{write:!0}})],t.prototype,"top",void 0),r([i.property({type:[Number,String],json:{write:!0}})],t.prototype,"bottom",void 0),r([i.property({readOnly:!0,dependsOn:["left","right","top","bottom"]})],t.prototype,"version",null),o=r([i.subclass("esri.views.layers.support.ClipRect")],t)}(i.declared(o))}.apply(null,n))||(e.exports=i)},1074:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(0),r(1),r(18),r(2),r(60),r(19),r(1064)],void 0===(i=function(e,t,r,n,i,o,s,a,p){var u={base:s,key:"type",typeMap:{extent:i.Extent,polygon:i.Polygon}};return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="geometry",t.geometry=null,t}var i;return n(t,e),i=t,Object.defineProperty(t.prototype,"version",{get:function(){return(this._get("version")||0)+1},enumerable:!0,configurable:!0}),t.prototype.clone=function(){return new i({geometry:this.geometry.clone()})},r([o.property({types:u,json:{read:a.fromJSON,write:!0}})],t.prototype,"geometry",void 0),r([o.property({readOnly:!0,dependsOn:["geometry"]})],t.prototype,"version",null),i=r([o.subclass("esri.views.layers.support.Geometry")],t)}(o.declared(p))}.apply(null,n))||(e.exports=i)},1075:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(0),r(1),r(2),r(1064)],void 0===(i=function(e,t,r,n,i,o){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="path",t.path=[],t}return n(t,e),Object.defineProperty(t.prototype,"version",{get:function(){return(this._get("version")||0)+1},enumerable:!0,configurable:!0}),r([i.property({type:[[[Number]]],json:{write:!0}})],t.prototype,"path",void 0),r([i.property({readOnly:!0,dependsOn:["path"]})],t.prototype,"version",null),r([i.subclass("esri.views.layers.support.Path")],t)}(i.declared(o))}.apply(null,n))||(e.exports=i)},1100:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(4),r(1119),r(24),r(1120)],void 0===(i=function(e,t,n,i,o,s){Object.defineProperty(t,"__esModule",{value:!0});var a=null;t.isLoaded=function(){return!!a&&i.isLoaded()},t.isSupported=function(){return i.isSupported()};var p=null;t.load=function(){return p||(p=n.create((function(e,t){var n=i.load();r.e(7).then((function(){var o=[r(1091)];(function(r){a=r,n.then((function(){a._enableProjection(i),e()}),(function(e){t(e)}))}).apply(null,o)})).catch(r.oe)})))},t.project=function(e,t,r){return void 0===r&&(r=null),e instanceof Array?0===e.length?[]:l(e,e[0].spatialReference,t,r):l([e],e.spatialReference,t,r)[0]};var u={};function l(e,t,r,n,i){if(void 0===n&&(n=null),void 0===i&&(i=!1),null===n){var p=s.cacheKey(t,r);void 0!==u[p]?n=u[p]:(null===(n=c(t,r,null))&&(n=new s),u[p]=n)}return a._project(e,t,r instanceof o||!1===i?r:new o(r),n,i)}function c(e,t,r){void 0===r&&(r=null);var n=a._getTransformation(e,t,r);return null!==n?s.fromGE(n):null}t.projectMany=l,t.getTransformation=c,t.getTransformations=function(e,t,r){void 0===r&&(r=null);var n=a._getTransformationBySuitability(e,t,r);if(null!==n){for(var i=[],o=0,p=n;o<p.length;o++){var u=p[o];i.push(s.fromGE(u))}return i}return[]}}.apply(null,n))||(e.exports=i)},1114:function(e,t,r){var n,i;n=[r.dj.c(e.i),t],void 0===(i=function(e,t){function r(e,t){return t?"xoffset"in t&&t.xoffset?Math.max(e,Math.abs(t.xoffset)):"yoffset"in t&&t.yoffset?Math.max(e,Math.abs(t.yoffset||0)):e:e}function n(e,t){return"number"==typeof e?e:e&&e.stops&&e.stops.length?function(e){for(var t=0,r=0,n=0;n<e.length;n++){var i=e[n].size;"number"==typeof i&&(t+=i,r++)}return t/r}(e.stops):t}Object.defineProperty(t,"__esModule",{value:!0}),t.calculateTolerance=function(e){var t=e&&e.renderer,i="touch"===(e&&e.event&&e.event.pointerType)?9:6;if(!t)return i;var o="visualVariables"in t?function(e,t){if(!t)return e;var r=t.filter((function(e){return"size"===e.type})).map((function(t){var r=t.maxSize,i=t.minSize;return(n(r,e)+n(i,e))/2})),i=0,o=r.length;if(0===o)return e;for(var s=0;s<o;s++)i+=r[s];var a=Math.floor(i/o);return Math.max(a,e)}(i,t.visualVariables):i;if("simple"===t.type)return r(o,t.symbol);if("unique-value"===t.type){var s=o;return t.uniqueValueInfos.forEach((function(e){s=r(s,e.symbol)})),s}if("class-breaks"===t.type){var a=o;return t.classBreakInfos.forEach((function(e){a=r(a,e.symbol)})),a}return t.type,o}}.apply(null,n))||(e.exports=i)},1119:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(17),r(15),r(4)],void 0===(i=function(e,t,n,i,o){var s,a,p,u,l,c;function _(e){function r(e,t,r){e[t]=r(e[t])}t._pe=e,a.init(),p.init(),u.init(),l.init(),c.init(),t.PeGCSExtent=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return n(r,e),r.prototype.destroy=function(){t._pe.destroy(this)},r}(t._pe.PeGCSExtent);for(var i=0,o=[t._pe.PeDatum,t._pe.PeGeogcs,t._pe.PeGeogtran,t._pe.PeObject,t._pe.PeParameter,t._pe.PePrimem,t._pe.PeProjcs,t._pe.PeSpheroid,t._pe.PeUnit];i<o.length;i++)r(o[i].prototype,"getName",(function(e){return function(){return e.call(this,new Array(a.PE_NAME_MAX))}}));for(var s=0,_=[t._pe.PeGeogtran,t._pe.PeProjcs];s<_.length;s++)r(_[s].prototype,"getParameters",(function(e){return function(){for(var r=new Array(a.PE_PARM_MAX),n=e.call(this),i=0;i<r.length;i++){var o=t._pe.getValue(n,"*");r[i]=o?t._pe.wrapPointer(o,t._pe.PeParameter):null,n+=Int32Array.BYTES_PER_ELEMENT}return r}}));r(t._pe.PeHorizon.prototype,"getCoord",(function(e){return function(){var t=this.getSize();if(!t)return null;var r=[];return y(r,t,e.call(this)),r}})),r(t._pe.PeGTlistExtendedEntry.prototype,"getEntries",(function(e){var r=t._pe._pe_getPeGTlistExtendedGTsSize();return function(){var n=null,i=e.call(this);if(!t._pe.compare(i,t._pe.NULL)){n=[i];var o=this.getSteps();if(o>1)for(var s=t._pe.getPointer(i),a=1;a<o;a++)n.push(t._pe.wrapPointer(s+r*a,t._pe.PeGTlistExtendedGTs))}return n}}));var f=t._pe._pe_getPeHorizonSize(),h=function(e){return function(){var r=this._cache;if(r||(r=new Map,this._cache=r),r.has(e))return r.get(e);var n=null,i=e.call(this);if(!t._pe.compare(i,t._pe.NULL)){n=[i];var o=i.getNump();if(o>1)for(var s=t._pe.getPointer(i),a=1;a<o;a++)n.push(t._pe.wrapPointer(s+f*a,t._pe.PeHorizon))}return r.set(e,n),n}};r(t._pe.PeProjcs.prototype,"horizonGcsGenerate",h),r(t._pe.PeProjcs.prototype,"horizonPcsGenerate",h),t._pe.PeObject.prototype.toString=function(e){void 0===e&&(e=a.PE_STR_OPTS_NONE),t._pe.ensureCache.prepare();var r=t._pe.getPointer(this),n=t._pe.ensureInt8(new Array(a.PE_BUFFER_MAX));return t._pe.UTF8ToString(t._pe._pe_object_to_string_ext(r,e,n))}}function f(e){if(e){var r=t._pe.getClass(e);if(r){var n=t._pe.getCache(r);if(n){var i=t._pe.getPointer(e);i&&delete n[i]}}}}function h(e,r){for(var n=[],i=new Array(r),o=0;o<e;o++)n.push(t._pe.ensureInt8(i));return n}function d(e){var t;return Array.isArray(e[0])?(t=[],e.forEach((function(e){t.push(e[0],e[1])}))):t=e,t}function y(e,r,n,i){if(void 0===i&&(i=!1),i)for(var o=0;o<2*r;o++)e[o]=t._pe.getValue(n+o*Float64Array.BYTES_PER_ELEMENT,"double");else{var s=0===e.length;for(o=0;o<r;o++)s&&(e[o]=new Array(2)),e[o][0]=t._pe.getValue(n,"double"),e[o][1]=t._pe.getValue(n+Float64Array.BYTES_PER_ELEMENT,"double"),n+=2*Float64Array.BYTES_PER_ELEMENT}}Object.defineProperty(t,"__esModule",{value:!0}),t._pe=null,t.isLoaded=function(){return!!t._pe},t.isSupported=function(){return!!i("esri-wasm")},t.load=function(){return s||(s=o.create((function(t,n){Promise.all([r.e(36),r.e(71)]).then((function(){var i=[r(1200)];(function(r){r({locateFile:function(t){return e.toUrl("./support/"+t)},onAbort:function(e){n(new Error(e))}}).then((function(e){_(e),t()}))}).apply(null,i)})).catch(r.oe)})))},function(e){function r(e,r,n){t._pe.ensureCache.prepare();var i=d(n),o=n===i,s=t._pe.ensureFloat64(i),a=t._pe._pe_geog_to_proj(t._pe.getPointer(e),r,s);return a&&y(n,r,s,o),a}function n(e,t,r){return i(e,t,r,0)}function i(e,r,n,i){t._pe.ensureCache.prepare();var o=d(n),s=n===o,a=t._pe.ensureFloat64(o),p=t._pe._pe_proj_to_geog_center(t._pe.getPointer(e),r,a,i);return p&&y(n,r,a,s),p}e.geogToProj=r,e.projGeog=function(e,t,i,o){switch(o){case a.PE_TRANSFORM_P_TO_G:return n(e,t,i);case a.PE_TRANSFORM_G_TO_P:return r(e,t,i)}return 0},e.projToGeog=n,e.projToGeogCenter=i}(t.PeCSTransformations||(t.PeCSTransformations={})),function(e){e.init=function(){e.PE_BUFFER_MAX=t._pe.PeDefs.prototype.PE_BUFFER_MAX,e.PE_NAME_MAX=t._pe.PeDefs.prototype.PE_NAME_MAX,e.PE_MGRS_MAX=t._pe.PeDefs.prototype.PE_MGRS_MAX,e.PE_USNG_MAX=t._pe.PeDefs.prototype.PE_USNG_MAX,e.PE_DD_MAX=t._pe.PeDefs.prototype.PE_DD_MAX,e.PE_DDM_MAX=t._pe.PeDefs.prototype.PE_DDM_MAX,e.PE_DMS_MAX=t._pe.PeDefs.prototype.PE_DMS_MAX,e.PE_UTM_MAX=t._pe.PeDefs.prototype.PE_UTM_MAX,e.PE_PARM_MAX=t._pe.PeDefs.prototype.PE_PARM_MAX,e.PE_TYPE_NONE=t._pe.PeDefs.prototype.PE_TYPE_NONE,e.PE_TYPE_GEOGCS=t._pe.PeDefs.prototype.PE_TYPE_GEOGCS,e.PE_TYPE_PROJCS=t._pe.PeDefs.prototype.PE_TYPE_PROJCS,e.PE_TYPE_GEOGTRAN=t._pe.PeDefs.prototype.PE_TYPE_GEOGTRAN,e.PE_TYPE_COORDSYS=t._pe.PeDefs.prototype.PE_TYPE_COORDSYS,e.PE_TYPE_UNIT=t._pe.PeDefs.prototype.PE_TYPE_UNIT,e.PE_STR_OPTS_NONE=t._pe.PeDefs.prototype.PE_STR_OPTS_NONE,e.PE_STR_AUTH_NONE=t._pe.PeDefs.prototype.PE_STR_AUTH_NONE,e.PE_STR_AUTH_TOP=t._pe.PeDefs.prototype.PE_STR_AUTH_TOP,e.PE_STR_NAME_CANON=t._pe.PeDefs.prototype.PE_STR_NAME_CANON,e.PE_PARM_X0=t._pe.PeDefs.prototype.PE_PARM_X0,e.PE_PARM_ND=t._pe.PeDefs.prototype.PE_PARM_ND,e.PE_TRANSFORM_1_TO_2=t._pe.PeDefs.prototype.PE_TRANSFORM_1_TO_2,e.PE_TRANSFORM_2_TO_1=t._pe.PeDefs.prototype.PE_TRANSFORM_2_TO_1,e.PE_TRANSFORM_P_TO_G=t._pe.PeDefs.prototype.PE_TRANSFORM_P_TO_G,e.PE_TRANSFORM_G_TO_P=t._pe.PeDefs.prototype.PE_TRANSFORM_G_TO_P,e.PE_HORIZON_RECT=t._pe.PeDefs.prototype.PE_HORIZON_RECT,e.PE_HORIZON_POLY=t._pe.PeDefs.prototype.PE_HORIZON_POLY,e.PE_HORIZON_LINE=t._pe.PeDefs.prototype.PE_HORIZON_LINE,e.PE_HORIZON_DELTA=t._pe.PeDefs.prototype.PE_HORIZON_DELTA}}(a=t.PeDefs||(t.PeDefs={})),function(e){var r={},n={};function i(e,n){var i=null,s=r[e];if(s||(s={},r[e]=s),s.hasOwnProperty(String(n)))i=s[n];else{var a=t._pe.PeFactory.prototype.factoryByType(e,n);t._pe.compare(a,t._pe.NULL)||(i=a,s[n]=i)}return o(i)}function o(e){if(e){var r=e.getType();switch(r){case a.PE_TYPE_GEOGCS:e=t._pe.castObject(e,t._pe.PeGeogcs);break;case a.PE_TYPE_PROJCS:e=t._pe.castObject(e,t._pe.PeProjcs);break;case a.PE_TYPE_GEOGTRAN:e=t._pe.castObject(e,t._pe.PeGeogtran);break;default:r&a.PE_TYPE_UNIT&&(e=t._pe.castObject(e,t._pe.PeUnit))}}return e}e.initialize=function(){t._pe.PeFactory.prototype.initialize(null)},e.coordsys=function(e){return i(a.PE_TYPE_COORDSYS,e)},e.factoryByType=i,e.fromString=function(e,r){var i=null,s=n[e];if(s||(s={},n[e]=s),s.hasOwnProperty(r))i=s[r];else{var a=t._pe.PeFactory.prototype.fromString(e,r);t._pe.compare(a,t._pe.NULL)||(i=a,s[r]=i)}return o(i)},e.geogcs=function(e){return i(a.PE_TYPE_GEOGCS,e)},e.geogtran=function(e){return i(a.PE_TYPE_GEOGTRAN,e)},e.getCode=function(e){return t._pe.PeFactory.prototype.getCode(e)},e.projcs=function(e){return i(a.PE_TYPE_PROJCS,e)},e.unit=function(e){return i(a.PE_TYPE_UNIT,e)}}(t.PeFactory||(t.PeFactory={})),t.PeGCSExtent=null,function(e){var r;e.init=function(){e.PE_GTLIST_OPTS_COMMON=t._pe.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON,r=t._pe._pe_getPeGTlistExtendedEntrySize()},e.getGTlist=function(e,n,i,o,s,a){var p=null,u=new t._pe.PeInteger(a);try{var l=t._pe.PeGTlistExtended.prototype.getGTlist(e,n,i,o,s,u);if((a=u.val)&&(p=[l],a>1))for(var c=t._pe.getPointer(l),_=1;_<a;_++)p.push(t._pe.wrapPointer(c+r*_,t._pe.PeGTlistExtendedEntry))}finally{t._pe.destroy(u)}return p}}(p=t.PeGTlistExtended||(t.PeGTlistExtended={})),function(e){e.destroy=function(e){if(e&&e.length){for(var r=0,n=e;r<n.length;r++){var i=n[r];f(i),i.getEntries().forEach((function(e){f(e);var t=e.getGeogtran();f(t),t.getParameters().forEach(f),[t.getGeogcs1(),t.getGeogcs2()].forEach((function(e){f(e);var t=e.getDatum();f(t),f(t.getSpheroid()),f(e.getPrimem()),f(e.getUnit())}))}))}t._pe.PeGTlistExtendedEntry.prototype.Delete(e[0])}}}(t.PeGTlistExtendedEntry||(t.PeGTlistExtendedEntry={})),function(e){e.geogToGeog=function(e,r,n,i,o){t._pe.ensureCache.prepare();var s=d(n),a=n===s,p=t._pe.ensureFloat64(s),u=0;i&&(u=t._pe.ensureFloat64(i));var l=t._pe._pe_geog_to_geog(t._pe.getPointer(e),r,p,u,o);return l&&y(n,r,p,a),l}}(t.PeGTTransformations||(t.PeGTTransformations={})),function(e){function r(e,r,n,i,o,s){var p,u;switch(t._pe.ensureCache.prepare(),e){case"dd":p=t._pe._pe_geog_to_dd,u=a.PE_DD_MAX;break;case"ddm":p=t._pe._pe_geog_to_ddm,u=a.PE_DDM_MAX;break;case"dms":p=t._pe._pe_geog_to_dms,u=a.PE_DMS_MAX}var l=0;r&&(l=t._pe.getPointer(r));var c=d(i),_=t._pe.ensureFloat64(c),f=h(n,u),y=p(l,n,_,o,t._pe.ensureInt32(f));if(y)for(var g=0;g<n;g++)s[g]=t._pe.UTF8ToString(f[g]);return y}function n(e,r,n,i,o){var s;switch(t._pe.ensureCache.prepare(),e){case"dd":s=t._pe._pe_dd_to_geog;break;case"ddm":s=t._pe._pe_ddm_to_geog;break;case"dms":s=t._pe._pe_dms_to_geog}var a=0;r&&(a=t._pe.getPointer(r));var p=i.map((function(e){return t._pe.ensureString(e)})),u=t._pe.ensureInt32(p),l=t._pe.ensureFloat64(new Array(2*n)),c=s(a,n,u,l);return c&&y(o,n,l),c}e.geog_to_dms=function(e,t,n,i,o){return r("dms",e,t,n,i,o)},e.dms_to_geog=function(e,t,r,i){return n("dms",e,t,r,i)},e.geog_to_ddm=function(e,t,n,i,o){return r("ddm",e,t,n,i,o)},e.ddm_to_geog=function(e,t,r,i){return n("ddm",e,t,r,i)},e.geog_to_dd=function(e,t,n,i,o){return r("dd",e,t,n,i,o)},e.dd_to_geog=function(e,t,r,i){return n("dd",e,t,r,i)}}(t.PeNotationDms||(t.PeNotationDms={})),function(e){e.init=function(){e.PE_MGRS_STYLE_NEW=t._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW,e.PE_MGRS_STYLE_OLD=t._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD,e.PE_MGRS_STYLE_AUTO=t._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO,e.PE_MGRS_180_ZONE_1_PLUS=t._pe.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS,e.PE_MGRS_ADD_SPACES=t._pe.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES},e.geog_to_mgrs_extended=function(e,r,n,i,o,s,p){t._pe.ensureCache.prepare();var u=0;e&&(u=t._pe.getPointer(e));var l=d(n),c=t._pe.ensureFloat64(l),_=h(r,a.PE_MGRS_MAX),f=t._pe.ensureInt32(_),y=t._pe._pe_geog_to_mgrs_extended(u,r,c,i,o,s,f);if(y)for(var g=0;g<r;g++)p[g]=t._pe.UTF8ToString(_[g]);return y},e.mgrs_to_geog_extended=function(e,r,n,i,o){t._pe.ensureCache.prepare();var s=0;e&&(s=t._pe.getPointer(e));var a=n.map((function(e){return t._pe.ensureString(e)})),p=t._pe.ensureInt32(a),u=t._pe.ensureFloat64(new Array(2*r)),l=t._pe._pe_mgrs_to_geog_extended(s,r,p,i,u);return l&&y(o,r,u),l}}(u=t.PeNotationMgrs||(t.PeNotationMgrs={})),function(e){e.geog_to_usng=function(e,r,n,i,o,s,p){t._pe.ensureCache.prepare();var u=0;e&&(u=t._pe.getPointer(e));var l=d(n),c=t._pe.ensureFloat64(l),_=h(r,a.PE_MGRS_MAX),f=t._pe.ensureInt32(_),y=t._pe._pe_geog_to_usng(u,r,c,i,o,s,f);if(y)for(var g=0;g<r;g++)p[g]=t._pe.UTF8ToString(_[g]);return y},e.usng_to_geog=function(e,r,n,i){t._pe.ensureCache.prepare();var o=0;e&&(o=t._pe.getPointer(e));var s=n.map((function(e){return t._pe.ensureString(e)})),a=t._pe.ensureInt32(s),p=t._pe.ensureFloat64(new Array(2*r)),u=t._pe._pe_usng_to_geog(o,r,a,p);return u&&y(i,r,p),u}}(t.PeNotationUsng||(t.PeNotationUsng={})),function(e){e.init=function(){e.PE_UTM_OPTS_NONE=t._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NONE,e.PE_UTM_OPTS_ADD_SPACES=t._pe.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES,e.PE_UTM_OPTS_NS=t._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NS},e.geog_to_utm=function(e,r,n,i,o){t._pe.ensureCache.prepare();var s=0;e&&(s=t._pe.getPointer(e));var p=d(n),u=t._pe.ensureFloat64(p),l=h(r,a.PE_UTM_MAX),c=t._pe.ensureInt32(l),_=t._pe._pe_geog_to_utm(s,r,u,i,c);if(_)for(var f=0;f<r;f++)o[f]=t._pe.UTF8ToString(l[f]);return _},e.utm_to_geog=function(e,r,n,i,o){t._pe.ensureCache.prepare();var s=0;e&&(s=t._pe.getPointer(e));var a=n.map((function(e){return t._pe.ensureString(e)})),p=t._pe.ensureInt32(a),u=t._pe.ensureFloat64(new Array(2*r)),l=t._pe._pe_utm_to_geog(s,r,p,i,u);return l&&y(o,r,u),l}}(l=t.PeNotationUtm||(t.PeNotationUtm={})),function(e){var r=new Map;e.init=function(){e.PE_PCSINFO_OPTION_NONE=t._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE,e.PE_PCSINFO_OPTION_DOMAIN=t._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN,e.PE_POLE_OUTSIDE_BOUNDARY=t._pe.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY,e.PE_POLE_POINT=t._pe.PePCSInfo.prototype.PE_POLE_POINT},e.generate=function(n,i){var o,s;return void 0===i&&(i=e.PE_PCSINFO_OPTION_DOMAIN),r.has(n)&&(s=r.get(n))[i]&&(o=s[i]),o||(o=t._pe.PePCSInfo.prototype.generate(n,i),s||(s=[],r.set(n,s)),s[i]=o),o}}(c=t.PePCSInfo||(t.PePCSInfo={})),function(e){e.version_string=function(){return t._pe.PeVersion.prototype.version_string()}}(t.PeVersion||(t.PeVersion={})),t._init=_}.apply(null,n))||(e.exports=i)},1120:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(1121)],void 0===(i=function(e,t,r){return function(){function e(e){if(this.steps=[],this._cached_projection={},this._chain="",this._gtlistentry=null,e&&e.steps)for(var t=0,n=e.steps;t<n.length;t++){var i=n[t];i instanceof r?this.steps.push(i):this.steps.push(new r({wkid:i.wkid,wkt:i.wkt,isInverse:i.isInverse}))}}return e.cacheKey=function(e,t){return[void 0!==e.wkid&&null!==e.wkid?e.wkid.toString():"-1",void 0!==e.wkt&&null!==e.wkt?e.wkt.toString():"",void 0!==t.wkid&&null!==t.wkid?t.wkid.toString():"-1",void 0!==t.wkt&&null!==t.wkt?t.wkt.toString():""].join(",")},e.fromGE=function(t){for(var n=new e,i="",o=0,s=t.steps;o<s.length;o++){var a=s[o],p=r.fromGE(a);n.steps.push(p),i+=p.uid.toString()+","}return n._cached_projection={},n._gtlistentry=null,n._chain=i,n},e.prototype.getInverse=function(){var t=new e;t.steps=[];for(var r=this.steps.length-1;r>=0;r--){var n=this.steps[r];t.steps.push(n.getInverse())}return t},e.prototype.getGTListEntry=function(){for(var e="",t=0,r=this.steps;t<r.length;t++)e+=r[t].uid.toString()+",";return e!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=e),this._gtlistentry},e.prototype.assignCachedGe=function(t,r,n){this._cached_projection[e.cacheKey(t,r)]=n},e.prototype.getCachedGeTransformation=function(t,r){for(var n="",i=0,o=this.steps;i<o.length;i++)n+=o[i].uid.toString()+",";n!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=n);var s=this._cached_projection[e.cacheKey(t,r)];return void 0===s?null:s},e}()}.apply(null,n))||(e.exports=i)},1121:function(e,t,r){var n,i;n=[r.dj.c(e.i),t],void 0===(i=function(e,t){var r=0;return function(){function e(e){void 0===e&&(e=null),this.uid=r++,e?(this._wkt=void 0!==e.wkt?e.wkt:null,this._wkid=void 0!==e.wkid?e.wkid:-1,this._isInverse=void 0!==e.isInverse&&!0===e.isInverse):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}return e.fromGE=function(t){var r=new e;return r._wkt=t.wkt,r._wkid=t.wkid,r._isInverse=t.isInverse,r},Object.defineProperty(e.prototype,"wkt",{get:function(){return this._wkt},set:function(e){this._wkt=e,this.uid=r++},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"wkid",{get:function(){return this._wkid},set:function(e){this._wkid=e,this.uid=r++},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isInverse",{get:function(){return this._isInverse},set:function(e){this._isInverse=e,this.uid=r++},enumerable:!0,configurable:!0}),e.prototype.getInverse=function(){var t=new e;return t._wkt=this.wkt,t._wkid=this._wkid,t._isInverse=!this.isInverse,t},e}()}.apply(null,n))||(e.exports=i)},1147:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(18),r(13),r(53),r(1114)],void 0===(i=function(e,t,r,n,i,o){function s(e,t,n,o){var s;if(void 0===o&&(o=new r.Extent),"2d"===n.type)s=t*n.resolution;else if("3d"===n.type){var a=n.basemapTerrain,p=a.overlayManager,u=p?p.overlayPixelSizeInMapUnits(e):1;s=a&&!a.spatialReference.equals(n.spatialReference)?i.getMetersPerUnitForSR(a.spatialReference)/i.getMetersPerUnitForSR(n.spatialReference):t*u}var l=e.x-s,c=e.y-s,_=e.x+s,f=e.y+s,h=n.spatialReference;return o.xmin=Math.min(l,_),o.ymin=Math.min(c,f),o.xmax=Math.max(l,_),o.ymax=Math.max(c,f),o.spatialReference=h,o}Object.defineProperty(t,"__esModule",{value:!0}),t.createQueryGeometry=s,t.intersectsDrapedGeometry=function(e,t,r){var i=r.toMap(e);return n.isNone(i)?null:s(i,o.calculateTolerance(),r,a).intersects(t)?i:null};var a=new r.Extent}.apply(null,n))||(e.exports=i)},1197:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(1),r(0),r(8),r(9),r(5),r(18),r(10),r(1100),r(37),r(35)],void 0===(i=function(e,t,r,n,i,o,s,a,p,u,l,c){Object.defineProperty(t,"__esModule",{value:!0});var _=function(e,t){var r=(e.isWGS84||e.isWebMercator)&&(t.isWGS84||t.isWebMercator);return!(e.equals(t)||r)};t.defaultGridSpacing=32,t.load=function(){return o(this,void 0,void 0,(function(){return i(this,(function(e){switch(e.label){case 0:return u.isLoaded()||!u.isSupported()?[2,null]:[4,u.load()];case 1:return e.sent(),[2]}}))}))},t.projectResolution=function(e,t,r,n){if(void 0===n&&(n=null),e.spatialReference.equals(t))return e;var i=_(e.spatialReference,t);if(i&&!u.isLoaded())throw new p("rasterprojectionhelper-projectResolution","projection engine is not loaded");var o=r.center,s=new a.Extent({xmin:o.x-e.x/2,xmax:o.x+e.x/2,ymin:o.y-e.y/2,ymax:o.y+e.y/2,spatialReference:e.spatialReference}),l=i?u.project(s,t,n):c.project(s,t);return null==l?null:new a.Point(l.xmax-l.xmin,l.ymax-l.ymin,t)},t.projectPoint=function(e,t,r){if(void 0===r&&(r=null),e.spatialReference.equals(t))return e;var n=_(e.spatialReference,t);if(n&&!u.isLoaded())throw new p("rasterprojectionhelper-projectResolution","projection engine is not loaded");return n?u.project(e,t,r):c.project(e,t)},t.projectExtent=function(e,t,r){if(void 0===r&&(r=null),e.spatialReference.equals(t))return e;var n=_(e.spatialReference,t);if(n&&!u.isLoaded())throw new p("rasterprojectionhelper-projectExtent","projection engine is not loaded");return n?u.project(e,t,r):c.project(e,t)},t.getProjectionOffsetGrid=function(e,r,n,i,o,s){void 0===i&&(i=null),void 0===o&&(o=!1),void 0===s&&(s=[t.defaultGridSpacing,t.defaultGridSpacing]);var f=r.spatialReference.equals(e.spatialReference),h=_(e.spatialReference,r.spatialReference);if(h&&!u.isLoaded())throw new p("rasterprojectionhelper-projectResolution","projection engine is not loaded");if(!(e&&r&&n))return null;for(var d,y,g,v=e.xmin,P=e.ymin,m=e.xmax,b=e.ymax,E=e.spatialReference,w=r.spatialReference,T=l.getInfo(E),S=T&&T.valid[0],x=T&&T.valid[1],R={x:s[0]*n.x,y:s[1]*n.y},O={cols:Math.ceil((m-v)/R.x-.1)+1,rows:Math.ceil((b-P)/R.y-.1)+1},M=R.x,I=R.y,N=[],j=!1,G=0;G<O.cols;G++){for(var A=[],U=0;U<O.rows;U++)d=new a.Point({x:v+M*G,y:b-I*U,spatialReference:E}),y=f?d:h?u.project(d,w,i):c.project(d,w),A.push(y),G>0&&o&&y&&g[U]&&T&&y.x<g[U].x&&(y.x+=x-S),y?(N.push((y.x-r.xmin)/(r.xmax-r.xmin)),N.push((r.ymax-y.y)/(r.ymax-r.ymin))):(N.push(NaN),N.push(NaN),j=!0);g=A}var C=function(e,t){var r=(e[0]+e[4]+e[4*t.cols]+e[4*t.cols+4])/4,n=(e[1]+e[5]+e[4*t.rows+1]+e[4*t.rows+5])/4;return[Math.abs(r-e[2*t.rows+2]),Math.abs(n-e[2*t.rows+3])]}(N,O),k=new Float32Array((O.cols-1)*(O.rows-1)*2*6),D=new Float32Array([-0,-1,1,-1,1,-0,1,-0,-0]),L=new Float32Array([-1,1,0,0,-1,1,1,0,0]);for(G=0;G<O.cols-1;G++){for(U=0;U<O.rows-1;U++){for(var F=G*O.rows*2+2*U,V=N[F],z=N[F+1],q=N[F+2],B=N[F+3],Y=N[F+=2*O.rows],X=N[F+1],W=N[F+2],H=N[F+3],Z=0,Q=12*(U*(O.cols-1)+G),J=0;J<3;J++)k[Q++]=D[Z++]*V+D[Z++]*q+D[Z++]*W;for(Z=0,J=0;J<3;J++)k[Q++]=D[Z++]*z+D[Z++]*B+D[Z++]*H;for(Z=0,J=0;J<3;J++)k[Q++]=L[Z++]*V+L[Z++]*Y+L[Z++]*W;for(Z=0,J=0;J<3;J++)k[Q++]=L[Z++]*z+L[Z++]*X+L[Z++]*H}if(j)for(var K=0;K<k.length;K++)isNaN(k[K])&&(k[K]=-1)}return{offsets:N,error:C,coefficients:k,spacing:s,size:[O.cols-1,O.rows-1]}},t.snapPyramid=function(e,t,r){var n=Math.log(e.x/t.pixelSize.x)/Math.LN2,i=Math.log(e.y/t.pixelSize.y)/Math.LN2,o=t.storageInfo.maximumPyramidLevel||0,s="down"===r?Math.floor(Math.min(n,i)):"up"===r?Math.ceil(Math.max(n,i)):Math.round((n+i)/2),p=!1;s<0?s=0:s>o&&(p=s>o+3,s=o);var u=Math.pow(2,s);return{pyramidLevel:s,pyramidResolution:new a.Point({x:u*t.pixelSize.x,y:u*t.pixelSize.y,spatialReference:t.spatialReference}),excessiveReading:p}}}.apply(null,n))||(e.exports=i)},1308:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(18),r(1197)],void 0===(i=function(e,t,r,n){Object.defineProperty(t,"__esModule",{value:!0});var i=new Map;t.register=function(e,t){var r={extent:null,rasterInfo:t,cache:new Map};if(i.has(e)){var n=i.get(e);return n.push(r),n.length-1}return i.set(e,[r]),0},t.unregister=function(e,t){i.has(e)&&(i.get(e)[t]=null)},t.deleteRaster=function(e){i.delete(e)},t.getBlock=function(e,t,r){if(!i.has(e))return null;var n=i.get(e);if(null==n[t]){for(var o=0;o<n.length;o++)if(n[o].cache.has(r))return n[o].cache.get(r);return null}var s=n[t].cache;if(s.has(r))return s.get(r);for(o=0;o<n.length;o++)if(o!==t&&n[o]&&n[o].cache.has(r)){var a=n[o].cache.get(r);return s.set(r,a),a}return null},t.putBlock=function(e,t,r,n){if(!i.has(e))return null;var o=i.get(e);if(null==o[t])return null;o[t].cache.set(r,n)},t.update=function(e,t,o,s,a,p,u){void 0===u&&(u=null);var l=function(e,t){if(!i.has(e))return null;var r=i.get(e);return null==r[t]?null:r[t]}(e,t),c=l.extent,_=l.cache,f=l.rasterInfo,h=o.clone().normalize();if(o=h[0],!c||c.xmin!==o.xmin||c.xmax!==o.xmax||c.ymin!==o.ymin||c.ymax!==o.ymax){var d=f.spatialReference,y=n.projectExtent(o,d,u),g=new r.Point({x:s,y:s,spatialReference:o.spatialReference});if(null!==a||(a=n.projectResolution(g,d,o,u))){var v=n.snapPyramid(a,f,p||"closest"),P=v.pyramidLevel,m=v.pyramidResolution;if(!v.excessiveReading){for(var b=Math.floor((y.xmin-f.storageInfo.origin.x)/m.x),E=Math.floor((f.storageInfo.origin.y-y.ymax)/m.y),w=Math.ceil((y.xmax-y.xmin)/m.x-.1),T=Math.ceil((y.ymax-y.ymin)/m.y-.1),S=P>0?f.storageInfo.pyramidBlockWidth:f.storageInfo.blockWidth,x=P>0?f.storageInfo.pyramidBlockHeight:f.storageInfo.blockHeight,R=Math.floor(b/S),O=Math.floor(E/x),M=Math.floor((b+w-1)/S),I=Math.floor((E+T-1)/x),N=new Set,j=O-1;j<=I+1;j++)for(var G=R-1;G<=M+1;G++)N.add(P+"/"+j+"/"+G);_.forEach((function(e,t){N.has(t)||_.delete(t)})),l.extent={xmin:o.xmin,ymin:o.ymin,xmax:o.xmax,ymax:o.ymax}}}}}}.apply(null,n))||(e.exports=i)},1944:function(e,t,r){var n,i;n=[r.dj.c(e.i),t,r(1),r(0),r(8),r(9),r(10),r(2)],void 0===(i=function(e,t,r,n,i,o,s,a){Object.defineProperty(t,"__esModule",{value:!0}),t.TileImageryLayerView=function(e){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.layer=null,t.view=null,t.datumTransformation=null,t}return r(t,e),Object.defineProperty(t.prototype,"hasTilingEffects",{get:function(){return this.layer.renderer&&"dynamicRangeAdjustment"in this.layer.renderer&&this.layer.renderer.dynamicRangeAdjustment},enumerable:!0,configurable:!0}),t.prototype.fetchPopupFeatures=function(e,t){return o(this,void 0,void 0,(function(){return i(this,(function(e){throw new s("rasterlayerview:fetchpopupfeatures","not implemented")}))}))},n([a.property()],t.prototype,"layer",void 0),n([a.property()],t.prototype,"view",void 0),n([a.property({readOnly:!0,dependsOn:["layer.renderer"]})],t.prototype,"hasTilingEffects",null),n([a.subclass("esri.views.layers.TileImageryLayerView")],t)}(a.declared(e))}}.apply(null,n))||(e.exports=i)}}]);