(function(){(this||window).webpackJsonp.registerAbsMids({"esri/support/arcadeUtils":1021,"esri/arcade/languageUtils":1077,"esri/arcade/Dictionary":1108,"esri/arcade/Feature":1134,"esri/arcade/ImmutablePointArray":1163,"esri/arcade/ArcadePortal":1193,"esri/arcade/ImmutableArray":1194,"esri/arcade/treeAnalysis":1195,"esri/core/number":1217,"esri/arcade/ImmutablePathArray":1229,"esri/arcade/Attachment":1230,"esri/arcade/kernel":1231,"esri/arcade/FunctionWrapper":1297,"esri/arcade/functions/date":1298,"esri/arcade/functions/geometry":1299,"esri/arcade/functions/centroid":1300,"esri/arcade/functions/geomsync":1301,"esri/arcade/functions/maths":1302,"esri/arcade/functions/stats":1303,"esri/arcade/functions/fieldStats":1304,"esri/arcade/functions/string":1305,"esri/arcade/arcade":1928,"esri/arcade/arcadeCompiler":1929,"esri/arcade/arcadeRuntime":1930,"esri/arcade/parser":1931,"esri/arcade/lib/esprima":1932,"esri/intl/moment":1933})})(),(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{1021:function(e,t,n){var r,i;r=[n.dj.c(e.i),t,n(1928),n(1108),n(1134),n(7),n(4),n(222)],void 0===(i=function(e,t,n,r,i,a,o,s){Object.defineProperty(t,"__esModule",{value:!0}),t.arcade=n,t.Dictionary=r,t.arcadeFeature=i;var u=/^\$feature\./i,l={vars:{$feature:"any",$view:"any"},spatialReference:null};function c(e){if(!e)return null;try{return n.parseScript(e)}catch(e){}return null}function f(e){var t=c(e);return!!t&&n.scriptUsesGeometryEngine(t)}t.createSyntaxTree=c,t.createFunction=function(e,t){var r="string"==typeof e?c(e):e;if(!r)return null;try{return t=t||a.clone(l),n.compileScript(r,t)}catch(e){}return null},t.createExecContext=function(e,t){return{vars:{$feature:null==e?new i:i.createFromGraphic(e),$view:t&&t.view},spatialReference:t&&t.sr}},t.createFeature=function(e,t,n){return i.createFromGraphicLikeObject(t,e,n)},t.updateExecContext=function(e,t){e.vars.$feature=t},t.evalSyntaxTree=function(e,t){var r;try{r=n.executeScript(e,t)}catch(e){r=null}return r},t.executeFunction=function(e,t){var n;try{n=e?e(t):null}catch(e){n=null}return n},t.executeAsyncFunction=function(e,t){try{return e?e(t):o.resolve(null)}catch(e){return o.resolve(null)}},t.extractFieldNames=function(e){if(!e)return[];var t="string"==typeof e?c(e):e;if(!t)return[];var r=n.extractFieldLiterals(t),i=new Array;return r.forEach((function(e){u.test(e)&&(e=e.replace(u,""),i.push(e))})),i.sort(),i.filter((function(e,t){return 0===t||i[t-1]!==e}))},t.dependsOnView=function(e){return n.referencesMember(e,"$view")},t.hasVariable=function(e,t){return!!e&&n.referencesMember(e,t)},t.getViewInfo=function(e){if(e&&(null!=e.spatialReference||null!=e.scale&&null!=e.viewingMode))return{view:e.viewingMode&&null!=e.scale?new r({viewingMode:e.viewingMode,scale:e.scale}):null,sr:e.spatialReference}},t.convertServiceUrlToWorkspace=function(e,t){var r=n.featureSetUtils();return r?r.createFeatureSetCollectionFromService(e,t):null},t.convertFeatureLayerToFeatureSet=function(e,t){if(null===e)return null;var r=n.featureSetUtils();return r?r.constructFeatureSet(e,t):null},t.convertMapToFeatureSetCollection=function(e){if(null===e||null===e.map)return null;var t=n.featureSetUtils();return t?t.createFeatureSetCollectionFromMap(e.map,e.spatialReference):null},t.loadScriptDependencies=function(e,t,r){return void 0===r&&(r=[]),n.loadScriptDependencies(e,t,r)},t.enableGeometryOperations=function(){return n.enableGeometrySupport()},t.enableFeatureSetOperations=function(){return n.enableFeatureSetSupport()},t.applyTextFormattingHTML=function(e){return"string"==typeof e?e.replace(/(\n)/gi,'<br class="esri-text-new-line" />'):e},t.hasGeometryOperations=function(e){if(!e)return!1;if("string"==typeof e)return f(e);var t,n=e;if("simple"===(t=n).type||"class-breaks"===t.type||"unique-value"===t.type||"dot-density"===t.type||"dictionary"===t.type){if("dot-density"===n.type){var r=n.attributes.some((function(e){return f(e.valueExpression)}));if(r)return r}var i=n.visualVariables,a=!!i&&i.some((function(e){var t=f(e.valueExpression);return"size"===e.type&&(s.isSizeVariable(e.minSize)&&(t=t||f(e.minSize.valueExpression)),s.isSizeVariable(e.maxSize)&&(t=t||f(e.maxSize.valueExpression))),t}));return!!("valueExpression"in n&&f(n.valueExpression))||a}if("esri.layers.support.LabelClass"===n.declaredClass){var o=n.labelExpressionInfo&&n.labelExpressionInfo.expression;return!(!o||!f(o))||!1}return"esri.PopupTemplate"===n.declaredClass&&!!n.expressionInfos&&n.expressionInfos.some((function(e){return f(e.expression)}))}}.apply(null,r))||(e.exports=i)},1077:function(e,t,n){var r,i;r=[n.dj.c(e.i),t,n(1297),n(1194),n(1229),n(1163),n(1217),n(4),n(36),n(60),n(200),n(44),n(134),n(135),n(203),n(13)],void 0===(i=function(e,t,n,r,i,a,o,s,u,l,c,f,p,m,h,d){Object.defineProperty(t,"__esModule",{value:!0});var g=function(e){this.value=e};t.ReturnResultE=g;var y=function(e){this.value=e};t.ImplicitResultE=y;var v=function(e){this.fn=e};t.NativeFunctionE=v;var b=function(e){this.fn=e};function S(e,t,n){return""===t||null==t||t===n||t===n?e:e=e.split(t).join(n)}function w(e){return e instanceof v||e instanceof n||e instanceof b}function N(e){return!!(E(e)||I(e)||A(e)||x(e)||null===e||e===t.voidOperation||"number"==typeof e)}function E(e){return"string"==typeof e||e instanceof String}function x(e){return"boolean"==typeof e}function I(e){return"number"==typeof e}function C(e){return e instanceof Array}function O(e){return e instanceof r}function A(e){return e instanceof Date}function T(e,t){return!1===isNaN(e)?null==t||""===t?e.toString():(t=S(t,"‰",""),t=S(t,"¤",""),o.format(e,{pattern:t})):e.toString()}function R(e,n){var r=t.MomentLibrary.Moment(e);return null==n||""===n?r.format():r.format(k(n))}function k(e){return e.replace(/(LTS)|L|l/g,(function(e){return"["+e+"]"}))}function M(e,t,n){switch(n){case">":return e>t;case"<":return e<t;case">=":return e>=t;case"<=":return e<=t}return!1}function F(e,n){if(e===n)return!0;if(null===e&&n===t.voidOperation||null===n&&e===t.voidOperation)return!0;if(A(e)&&A(n))return e.getTime()===n.getTime();if(e instanceof i)return e.equalityTest(n);if(e instanceof a)return e.equalityTest(n);var r,o;if(e instanceof f&&n instanceof f&&(r=e.cache._arcadeCacheId,o=n.cache._arcadeCacheId,null!=r))return r===o;if(void 0!==e&&void 0!==n&&null!==e&&null!==n&&"object"==typeof e&&"object"==typeof n){if(e._arcadeCacheId===n._arcadeCacheId&&void 0!==e._arcadeCacheId&&null!==e._arcadeCacheId)return!0;if(e._underlyingGraphic===n._underlyingGraphic&&void 0!==e._underlyingGraphic&&null!==e._underlyingGraphic)return!0}return!1}function P(e,n){if(E(e))return e;if(null===e)return"";if(I(e))return T(e,n);if(x(e))return e.toString();if(A(e))return R(e,n);if(e instanceof l)return JSON.stringify(e.toJSON());if(C(e)){for(var i=[],a=0;a<e.length;a++)i[a]=D(e[a]);return"["+i.join(",")+"]"}if(e instanceof r){for(i=[],a=0;a<e.length();a++)i[a]=D(e.get(a));return"["+i.join(",")+"]"}return null!==e&&"object"==typeof e&&void 0!==e.castToText?e.castToText():w(e)?"object, Function":(t.voidOperation,"")}function L(e,n){if(E(e))return e;if(null===e)return"";if(I(e))return T(e,n);if(x(e))return e.toString();if(A(e))return R(e,n);if(e instanceof l)return e instanceof u?'{"xmin":'+e.xmin.toString()+',"ymin":'+e.ymin.toString()+","+(e.hasZ?'"zmin":'+e.zmin.toString()+",":"")+(e.hasM?'"mmin":'+e.mmin.toString()+",":"")+'"xmax":'+e.xmax.toString()+',"ymax":'+e.ymax.toString()+","+(e.hasZ?'"zmax":'+e.zmax.toString()+",":"")+(e.hasM?'"mmax":'+e.mmax.toString()+",":"")+'"spatialReference":'+G(e.spatialReference)+"}":G(e.toJSON(),(function(e,t){return e.key===t.key?0:"spatialReference"===e.key?1:"spatialReference"===t.key||e.key<t.key?-1:e.key>t.key?1:0}));if(C(e)){for(var i=[],a=0;a<e.length;a++)i[a]=D(e[a]);return"["+i.join(",")+"]"}if(e instanceof r){for(i=[],a=0;a<e.length();a++)i[a]=D(e.get(a));return"["+i.join(",")+"]"}return null!==e&&"object"==typeof e&&void 0!==e.castToText?e.castToText():w(e)?"object, Function":(t.voidOperation,"")}function D(e){if(null===e)return"null";if(x(e)||I(e)||E(e))return JSON.stringify(e);if(e instanceof l)return L(e);if(e instanceof r)return L(e);if(e instanceof Array)return L(e);if(e instanceof Date)return JSON.stringify(R(e,""));if(null!==e&&"object"==typeof e){if(void 0!==e.castToText)return e.castToText()}else if(e===t.voidOperation)return"null";return"null"}function U(e,n){return I(e)?e:null===e||""===e?0:A(e)?NaN:x(e)?e?1:0:C(e)||""===e||void 0===e?NaN:void 0!==n&&E(e)?(n=S(n,"‰",""),n=S(n,"¤",""),o.parse(e,{pattern:n})):e===t.voidOperation?0:Number(e)}function _(e,t){var n;return t.fields.some((function(t){return t.name===e&&(n=t.domain),!!n})),n}function G(e,t){t||(t={}),"function"==typeof t&&(t={cmp:t});var n,r="boolean"==typeof t.cycles&&t.cycles,i=t.cmp&&(n=t.cmp,function(e){return function(t,r){var i={key:t,value:e[t]},a={key:r,value:e[r]};return n(i,a)}}),a=[];return function e(t){if(t&&t.toJSON&&"function"==typeof t.toJSON&&(t=t.toJSON()),void 0!==t){if("number"==typeof t)return isFinite(t)?""+t:"null";if("object"!=typeof t)return JSON.stringify(t);var n,o;if(Array.isArray(t)){for(o="[",n=0;n<t.length;n++)n&&(o+=","),o+=e(t[n])||"null";return o+"]"}if(null===t)return"null";if(-1!==a.indexOf(t)){if(r)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var s=a.push(t)-1,u=Object.keys(t).sort(i&&i(t));for(o="",n=0;n<u.length;n++){var l=u[n],c=e(t[l]);c&&(o&&(o+=","),o+=JSON.stringify(l)+":"+c)}return a.splice(s,1),"{"+o+"}"}}(e)}function B(e,t){if(!(t instanceof f))throw new Error("Invalid Argument");e.push(t.hasZ?t.hasM?[t.x,t.y,t.z,t.m]:[t.x,t.y,t.z]:[t.x,t.y])}t.SizzleFunctionE=b,t.NativeFunction=v,t.ImplicitResult=y,t.ReturnResult=g,t.SizzleFunction=b,t.voidOperation={type:"VOID"},t.breakResult={type:"BREAK"},t.continueResult={type:"CONTINUE"},t.multiReplace=S,t.isFunctionParameter=w,t.isSimpleType=N,t.defaultUndefined=function(e,t){return void 0===e?t:e},t.isString=E,t.isBoolean=x,t.isNumber=I,t.isArray=C,t.isFeatureSet=function(e){return!0===(e&&e.declaredRootClass&&"esri.arcade.featureset.support.FeatureSet"===e.declaredRootClass)},t.isFeatureSetCollection=function(e){return!0===(e&&e.declaredRootClass&&"esri.arcade.featureSetCollection"===e.declaredRootClass)},t.isImmutableArray=O,t.isDate=A,t.pcCheck=function(e,t,n){if(e.length<t||e.length>n)throw new Error("Function called with wrong number of Parameters")},t.generateUUID=function(){var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?n:3&n|8).toString(16)}))},t.formatNumber=T,t.formatDate=R,t.standardiseDateFormat=k,t.greaterThanLessThan=function(e,n,r){if(null===e){if(null===n||n===t.voidOperation)return M(null,null,r);if(I(n))return M(0,n,r);if(E(n))return M(0,U(n),r);if(x(n))return M(0,U(n),r);if(A(n))return M(0,n.getTime(),r)}if(e===t.voidOperation){if(null===n||n===t.voidOperation)return M(null,null,r);if(I(n))return M(0,n,r);if(E(n))return M(0,U(n),r);if(x(n))return M(0,U(n),r);if(A(n))return M(0,n.getTime(),r)}else if(I(e)){if(I(n))return M(e,n,r);if(x(n))return M(e,U(n),r);if(null===n||n===t.voidOperation)return M(e,0,r);if(E(n))return M(e,U(n),r);if(A(n))return M(e,n.getTime(),r)}else if(E(e)){if(E(n))return M(P(e),P(n),r);if(A(n))return M(U(e),n.getTime(),r);if(I(n))return M(U(e),n,r);if(null===n||n===t.voidOperation)return M(U(e),0,r);if(x(n))return M(U(e),U(n),r)}else if(A(e)){if(A(n))return M(e,n,r);if(null===n||n===t.voidOperation)return M(e.getTime(),0,r);if(I(n))return M(e.getTime(),n,r);if(x(n))return M(e.getTime(),U(n),r);if(E(n))return M(e.getTime(),U(n),r)}else if(x(e)){if(x(n))return M(e,n,r);if(I(n))return M(U(e),U(n),r);if(A(n))return M(U(e),n.getTime(),r);if(null===n||n===t.voidOperation)return M(U(e),0,r);if(E(n))return M(U(e),U(n),r)}return!!F(e,n)&&("<="===r||">="===r)},t.equalityTest=F,t.toString=P,t.toNumberArray=function(e){var t=[];if(!1===C(e))return null;if(e instanceof r){for(var n=0;n<e.length();n++)t[n]=U(e.get(n));return t}for(n=0;n<e.length;n++)t[n]=U(e[n]);return t},t.toStringExplicit=L,t.toNumber=U,t.toDate=function(e,n){if(A(e))return e;if(E(e)){var r=t.MomentLibrary.Moment(e,[null==n||""===n?t.MomentLibrary.Moment.ISO_8601:n]);if(r.isValid())return r.toDate()}return null},t.toDateM=function(e,n){if(A(e))return t.MomentLibrary.Moment(e);if(E(e)){var r=t.MomentLibrary.Moment(e,[null==n||""===n?t.MomentLibrary.Moment.ISO_8601:n]);if(r.isValid())return r}return null},t.toBoolean=function(e){return x(e)?e:E(e)?"true"===(e=e.toLowerCase()):!!I(e)&&0!==e&&!isNaN(e)},t.fixSpatialReference=function(e,t){return d.isNone(e)?null:(null!==e.spatialReference&&void 0!==e.spatialReference||(e.spatialReference=t),e)},t.fixNullGeometry=function(e){return null===e?null:e instanceof f?"NaN"===e.x||null===e.x||isNaN(e.x)?null:e:e instanceof p?0===e.rings.length?null:e:e instanceof m?0===e.paths.length?null:e:e instanceof c?0===e.points.length?null:e:e instanceof u?"NaN"===e.xmin||null===e.xmin||isNaN(e.xmin)?null:e:null},t.getDomainValue=function(e,t){if(!e)return t;if(!e.domain)return t;var n=null;if("string"===e.field.type||"esriFieldTypeString"===e.field.type)t=P(t);else{if(null==t)return null;if(""===t)return t;t=U(t)}for(var r=0;r<e.domain.codedValues.length;r++){var i=e.domain.codedValues[r];i.code===t&&(n=i)}return null===n?t:n.name},t.getDomainCode=function(e,t){if(!e)return t;if(!e.domain)return t;var n=null;t=P(t);for(var r=0;r<e.domain.codedValues.length;r++){var i=e.domain.codedValues[r];i.name===t&&(n=i)}return null===n?t:n.code},t.getDomain=function(e,t,n,r){if(void 0===n&&(n=null),!t)return null;if(!t.fields)return null;for(var i,a,o=null,s=0;s<t.fields.length;s++){var u=t.fields[s];u.name.toLowerCase()===e.toString().toLowerCase()&&(o=u)}if(null===o)throw new Error("Field not found");return r||(r=n&&t.typeIdField&&n._field(t.typeIdField)),null!=r&&t.types.some((function(e){return e.id===r&&((i=e.domains&&e.domains[o.name])&&"inherited"===i.type&&(i=_(o.name,t),a=!0),!0)})),a||i||(i=_(e,t)),{field:o,domain:i}},t.stableStringify=G,t.autoCastFeatureToGeometry=function(e){if(null===e)return null;for(var t=[],n=0,r=e;n<r.length;n++){var i=r[n];i&&i.declaredClass&&"esri.arcade.Feature"===i.declaredClass?t.push(i.geometry()):t.push(i)}return t},t.autoCastArrayOfPointsToPolygon=function(e,t){if(C(e)||O(e)){var n=!1,r=!1,i=[],o=t;if(C(e)){for(var s=0,u=e;s<u.length;s++)B(i,u[s]);i.length>0&&(o=e[0].spatialReference,n=e[0].hasZ,r=e[0].hasM)}else if(e instanceof a)(i=e._elements).length>0&&(n=e._hasZ,r=e._hasM,o=e.get(0).spatialReference);else{if(!O(e))throw new Error("Invalid Argument");for(var l=0,c=e.toArray();l<c.length;l++)B(i,c[l]);i.length>0&&(o=e.get(0).spatialReference,n=!0===e.get(0).hasZ,r=!0===e.get(0).hasM)}return 0===i.length?null:(!1===h.isClockwise(i,r,n)&&(i=i.slice(0).reverse()),new p({rings:[i],spatialReference:o,hasZ:n,hasM:r}))}return e},t.autoCastArrayOfPointsToPolyline=function(e,t){if(C(e)||O(e)){var n=!1,r=!1,i=[],o=t;if(C(e)){for(var s=0,u=e;s<u.length;s++)B(i,u[s]);i.length>0&&(o=e[0].spatialReference,n=!0===e[0].hasZ,r=!0===e[0].hasM)}else if(e instanceof a)(i=e._elements).length>0&&(n=e._hasZ,r=e._hasM,o=e.get(0).spatialReference);else if(O(e)){for(var l=0,c=e.toArray();l<c.length;l++)B(i,c[l]);i.length>0&&(o=e.get(0).spatialReference,n=!0===e.get(0).hasZ,r=!0===e.get(0).hasM)}return 0===i.length?null:new m({paths:[i],spatialReference:o,hasZ:n,hasM:r})}return e},t.autoCastArrayOfPointsToMultiPoint=function(e,t){if(C(e)||O(e)){var n=!1,r=!1,i=[],o=t;if(C(e)){for(var s=0,u=e;s<u.length;s++)B(i,u[s]);i.length>0&&(o=e[0].spatialReference,n=!0===e[0].hasZ,r=!0===e[0].hasM)}else if(e instanceof a)(i=e._elements).length>0&&(n=e._hasZ,r=e._hasM,o=e.get(0).spatialReference);else if(O(e)){for(var l=0,f=e.toArray();l<f.length;l++)B(i,f[l]);i.length>0&&(o=e.get(0).spatialReference,n=!0===e.get(0).hasZ,r=!0===e.get(0).hasM)}return 0===i.length?null:new c({points:i,spatialReference:o,hasZ:n,hasM:r})}return e},t.toStringArray=function(e,t){void 0===t&&(t=!1);var n=[];if(null===e)return n;if(!0===C(e)){for(var i=0;i<e.length;i++)""===(a=P(e[i]))&&!0!==t||n.push(a);return n}if(e instanceof r){for(i=0;i<e.length();i++){var a;""===(a=P(e.get(i)))&&!0!==t||n.push(a)}return n}return N(e)?(""===(a=P(e))&&!0!==t||n.push(a),n):[]};var j=0;t.tick=function(e){return++j%100==0?(j=0,s.create((function(t){setTimeout((function(){t(e)}),0)}))):e},t.MomentLibrary={Moment:null}}.apply(null,r))||(e.exports=i)},1108:function(e,t,n){var r,i;r=[n.dj.c(e.i),t,n(1194),n(1077),n(60)],void 0===(i=function(e,t,n,r,i){function a(e){var t=null;if(null===e);else if(r.isNumber(e))t=r.toNumber(e);else if(r.isBoolean(e))t=r.toBoolean(e);else if(r.isString(e))t=r.toString(e);else if(r.isDate(e))t=r.toDate(e);else if(r.isArray(e)){t=[];for(var n=0,i=e;n<i.length;n++){var s=i[n];t.push(a(s))}}else{if(0===Object.keys(e).length)return null;var u=new o;u.immutable=!1;for(var l=0,c=Object.keys(e);l<c.length;l++){var f=c[l];u.setField(f,a(e[f]))}u.immutable=!0,t=u}return t}var o=function(){function e(t){this.declaredClass="esri.arcade.Dictionary",this.attributes=null,this.plain=!1,this.immutable=!0,this.attributes=t instanceof e?t.attributes:null==t?{}:t}return e.prototype.field=function(e){var t=e.toLowerCase(),n=this.attributes[e];if(void 0!==n)return n;for(var r in this.attributes)if(r.toLowerCase()===t)return this.attributes[r];throw new Error("Field not Found")},e.prototype.setField=function(e,t){if(this.immutable)throw new Error("Dictionary is Immutable");var n=e.toLowerCase();if(void 0===this.attributes[e]){for(var r in this.attributes)if(r.toLowerCase()===n)return void(this.attributes[r]=t);this.attributes[e]=t}else this.attributes[e]=t},e.prototype.hasField=function(e){var t=e.toLowerCase();if(void 0!==this.attributes[e])return!0;for(var n in this.attributes)if(n.toLowerCase()===t)return!0;return!1},e.prototype.keys=function(){var e=[];for(var t in this.attributes)e.push(t);return e.sort()},e.prototype.castToText=function(){var e="";for(var t in this.attributes){""!==e&&(e+=",");var a=this.attributes[t];null==a?e+=JSON.stringify(t)+":null":r.isBoolean(a)||r.isNumber(a)||r.isString(a)?e+=JSON.stringify(t)+":"+JSON.stringify(a):a instanceof i||a instanceof n||a instanceof Array?e+=JSON.stringify(t)+":"+r.toStringExplicit(a):a instanceof Date?e+=JSON.stringify(t)+":"+JSON.stringify(a):null!==a&&"object"==typeof a&&void 0!==a.castToText&&(e+=JSON.stringify(t)+":"+a.castToText())}return"{"+e+"}"},e.convertObjectToArcadeDictionary=function(t){var n=new e;for(var r in n.immutable=!1,t)n.setField(r.toString(),a(t[r]));return n.immutable=!0,n},e}();return o}.apply(null,r))||(e.exports=i)},1134:function(e,t,n){var r,i;r=[n.dj.c(e.i),t,n(5),n(1108),n(1194),n(1077),n(60),n(44),n(19),n(322),n(13)],void 0===(i=function(e,t,n,r,i,a,o,s,u,l,c){return function(){function e(){this.declaredClass="esri.arcade.Feature",this._optimizedGeomDefinition=null,this._geometry=null,this.attributes=null,this._layer=null,this._datesfixed=!0,this.immutable=!0,this._datefields=null,this.immutable=!0}return e.createFromGraphic=function(t){var n=new e;return n._geometry=c.isSome(t.geometry)?t.geometry:null,void 0===t.attributes||null===t.attributes?n.attributes={}:n.attributes=t.attributes,t._sourceLayer?(n._layer=t._sourceLayer,n._datesfixed=!1):t._layer?(n._layer=t._layer,n._datesfixed=!1):t.layer?(n._layer=t.layer,n._datesfixed=!1):t.sourceLayer&&(n._layer=t.sourceLayer,n._datesfixed=!1),n},e.createFromArcadeFeature=function(t){var n=new e;return n._datesfixed=t._datesfixed,n.attributes=t.attributes,n._geometry=t._geometry,n._optimizedGeomDefinition=t._optimizedGeomDefinition,t._layer&&(n._layer=t._layer),n},e.createFromOptimisedFeature=function(t,n,r){var i=new e;return i._geometry=t.geometry?{geometry:t.geometry}:null,i._optimizedGeomDefinition=r,i.attributes=t.attributes||{},i._layer=n,i._datesfixed=!1,i},e.createFromArcadeDictionary=function(t){var n=new e;return n.attributes=t.field("attributes"),null!==n.attributes&&n.attributes instanceof r?(n.attributes=n.attributes.attributes,null===n.attributes&&(n.attributes={})):n.attributes={},n._geometry=t.field("geometry"),null!==n._geometry&&(n._geometry instanceof r?n._geometry=e.parseGeometryFromDictionary(n._geometry):n._geometry instanceof o||(n._geometry=null)),n},e.createFromGraphicLikeObject=function(t,n,r){void 0===r&&(r=null);var i=new e;return null===n&&(n={}),i.attributes=n,i._geometry=c.isSome(t)?t:null,i._layer=r,i._layer&&(i._datesfixed=!1),i},e.prototype.repurposeFromGraphicLikeObject=function(e,t,n){void 0===n&&(n=null),null===t&&(t={}),this.attributes=t,this._geometry=e||null,this._layer=n,this._layer?this._datesfixed=!1:this._datesfixed=!0},e.prototype.castToText=function(){var e="";for(var t in this.attributes){""!==e&&(e+=",");var n=this.attributes[t];null==n?e+=JSON.stringify(t)+":null":a.isBoolean(n)||a.isNumber(n)||a.isString(n)?e+=JSON.stringify(t)+":"+JSON.stringify(n):n instanceof o||n instanceof i||n instanceof Array?e+=JSON.stringify(t)+":"+a.toStringExplicit(n):n instanceof Date?e+=JSON.stringify(t)+":"+JSON.stringify(n):null!==n&&"object"==typeof n&&void 0!==n.castToText&&(e+=JSON.stringify(t)+":"+n.castToText())}return'{"geometry":'+(null===this.geometry()?"null":a.toStringExplicit(this.geometry()))+',"attributes":{'+e+"}}"},e.prototype._fixDates=function(){if(null!==this._datefields)return this._datefields.length>0&&this._fixDateFields(this._datefields),void(this._datesfixed=!0);for(var e=[],t=0;t<this._layer.fields.length;t++){var n=this._layer.fields[t];"date"!==n.type&&"esriFieldTypeDate"!==n.type||e.push(n.name)}this._datefields=e,e.length>0&&this._fixDateFields(e),this._datesfixed=!0},e.prototype._fixDateFields=function(e){this.attributes=n({},this.attributes);for(var t=0;t<e.length;t++){var r=this.attributes[e[t]];if(null===r);else if(void 0===r){for(var i in this.attributes)if(i.toLowerCase()===e[t].toLowerCase()){null!==(r=this.attributes[i])&&(r instanceof Date||(this.attributes[i]=new Date(r)));break}}else r instanceof Date||(this.attributes[e[t]]=new Date(r))}},e.prototype.geometry=function(){return null===this._geometry||this._geometry instanceof o||(this._optimizedGeomDefinition?(this._geometry=c.unwrap(u.fromJSON(l.convertToGeometry(this._geometry,this._optimizedGeomDefinition.geometryType,this._optimizedGeomDefinition.hasZ,this._optimizedGeomDefinition.hasM))),this._geometry.spatialReference=this._optimizedGeomDefinition.spatialReference):this._geometry=c.unwrap(u.fromJSON(this._geometry))),this._geometry},e.prototype.field=function(e){!1===this._datesfixed&&this._fixDates();var t=this.attributes[e];if(void 0!==t)return t;var n=e.toLowerCase();for(var r in this.attributes)if(r.toLowerCase()===n)return this.attributes[r];if(this._hasFieldDefinition(n))return null;throw new Error("Field not Found")},e.prototype._hasFieldDefinition=function(e){if(null===this._layer)return!1;for(var t=0;t<this._layer.fields.length;t++)if(this._layer.fields[t].name.toLowerCase()===e)return!0;return!1},e.prototype._field=function(e){!1===this._datesfixed&&this._fixDates();var t=e.toLowerCase(),n=this.attributes[e];if(void 0!==n)return n;for(var r in this.attributes)if(r.toLowerCase()===t)return this.attributes[r];return null},e.prototype.setField=function(e,t){if(this.immutable)throw new Error("Feature is Immutable");if(!1===a.isSimpleType(t))throw new Error("Illegal Value Assignment to Feature");var n=e.toLowerCase();if(void 0===this.attributes[e]){for(var r in this.attributes)if(r.toLowerCase()===n)return void(this.attributes[r]=t);this.attributes[e]=t}else this.attributes[e]=t},e.prototype.hasField=function(e){var t=e.toLowerCase();if(void 0!==this.attributes[e])return!0;for(var n in this.attributes)if(n.toLowerCase()===t)return!0;return!!this._hasFieldDefinition(t)},e.prototype.keys=function(){var e=[],t={};for(var n in this.attributes)e.push(n),t[n.toLowerCase()]=1;if(null!==this._layer)for(var r=0;r<this._layer.fields.length;r++){var i=this._layer.fields[r];1!==t[i.name.toLowerCase()]&&e.push(i.name)}return e.sort()},e.parseGeometryFromDictionary=function(t){var n=e.convertDictionaryToJson(t,!0);return void 0!==n.spatialreference&&(n.spatialReference=n.spatialreference,delete n.spatialreference),void 0!==n.rings&&(n.rings=this.fixPathArrays(n.rings,!0===n.hasZ,!0===n.hasM)),void 0!==n.paths&&(n.paths=this.fixPathArrays(n.paths,!0===n.hasZ,!0===n.hasM)),void 0!==n.points&&(n.points=this.fixPointArrays(n.points,!0===n.hasZ,!0===n.hasM)),u.fromJSON(n)},e.fixPathArrays=function(e,t,n){var r=[];if(e instanceof Array)for(var a=0;a<e.length;a++)r.push(this.fixPointArrays(e[a],t,n));else if(e instanceof i)for(a=0;a<e.length();a++)r.push(this.fixPointArrays(e.get(a),t,n));return r},e.fixPointArrays=function(e,t,n){var r=[];if(e instanceof Array)for(var a=0;a<e.length;a++)(o=e[a])instanceof s?t&&n?r.push([o.x,o.y,o.z,o.m]):t?r.push([o.x,o.y,o.z]):n?r.push([o.x,o.y,o.m]):r.push([o.x,o.y]):o instanceof i?r.push(o.toArray()):r.push(o);else if(e instanceof i)for(a=0;a<e.length();a++){var o;(o=e.get(a))instanceof s?t&&n?r.push([o.x,o.y,o.z,o.m]):t?r.push([o.x,o.y,o.z]):n?r.push([o.x,o.y,o.m]):r.push([o.x,o.y]):o instanceof i?r.push(o.toArray()):r.push(o)}return r},e.convertDictionaryToJson=function(t,n){void 0===n&&(n=!1);var i={};for(var a in t.attributes){var o=t.attributes[a];o instanceof r&&(o=e.convertDictionaryToJson(o)),n?i[a.toLowerCase()]=o:i[a]=o}return i},e.parseAttributesFromDictionary=function(e){var t={};for(var n in e.attributes){var r=e.attributes[n];if(!a.isSimpleType(r))throw new Error("Illegal Argument");t[n]=r}return t},e.fromJson=function(t){var n=null;null!==t.geometry&&void 0!==t.geometry&&(n=u.fromJSON(t.geometry));var r={};if(null!==t.attributes&&void 0!==t.attributes)for(var i in t.attributes){var o=t.attributes[i];if(null===o)r[i]=o;else{if(!(a.isString(o)||a.isNumber(o)||a.isBoolean(o)||a.isDate(o)))throw new Error("Illegal Argument");r[i]=o}}return e.createFromGraphicLikeObject(n,r,null)},e.prototype.domainValueLookup=function(e,t,n){if(null===this._layer)return null;if(!this._layer.fields)return null;var r=a.getDomain(e,this._layer,this,n);if(void 0===t)try{t=this.field(e)}catch(e){return null}return a.getDomainValue(r,t)},e.prototype.domainCodeLookup=function(e,t,n){if(null===this._layer)return null;if(!this._layer.fields)return null;if(void 0===t){try{t=this.field(e)}catch(e){return null}return t}var r=a.getDomain(e,this._layer,this,n);return a.getDomainCode(r,t)},e}()}.apply(null,r))||(e.exports=i)},1163:function(e,t,n){var r,i;r=[n.dj.c(e.i),t,n(17),n(1194),n(44)],void 0===(i=function(e,t,n,r,i){return function(e){function t(t,n,r,i,a,o){var s=e.call(this,t)||this;return s._lazyPt=[],s._hasZ=!1,s._hasM=!1,s._spRef=n,s._hasZ=r,s._hasM=i,s._cacheId=a,s._partId=o,s}return n(t,e),t.prototype.get=function(e){if(void 0===this._lazyPt[e]){var t=this._elements[e];if(void 0===t)return;var n=this._hasZ,r=this._hasM,a=null;(a=n&&!r?new i(t[0],t[1],t[2],void 0,this._spRef):r&&n?new i(t[0],t[1],void 0,t[2],this._spRef):n&&r?new i(t[0],t[1],t[2],t[3],this._spRef):new i(t[0],t[1],this._spRef)).cache._arcadeCacheId=this._cacheId.toString()+"-"+this._partId.toString()+"-"+e.toString(),this._lazyPt[e]=a}return this._lazyPt[e]},t.prototype.equalityTest=function(e){return e===this||null!==e&&e instanceof t!=0&&e.getUniqueHash()===this.getUniqueHash()},t.prototype.getUniqueHash=function(){return this._cacheId.toString()+"-"+this._partId.toString()},t}(r)}.apply(null,r))||(e.exports=i)},1193:function(e,t,n){var r,i;r=[n.dj.c(e.i),t,n(17),n(1108)],void 0===(i=function(e,t,n,r){return function(e){function t(t){var n=e.call(this)||this;return n.immutable=!1,n.setField("url",t),n.immutable=!0,n}return n(t,e),t}(r)}.apply(null,r))||(e.exports=i)},1194:function(e,t,n){var r,i;r=[n.dj.c(e.i),t],void 0===(i=function(e,t){return function(){function e(e){void 0===e&&(e=[]),this._elements=e}return e.prototype.length=function(){return this._elements.length},e.prototype.get=function(e){return this._elements[e]},e.prototype.toArray=function(){for(var e=[],t=0;t<this.length();t++)e.push(this.get(t));return e},e}()}.apply(null,r))||(e.exports=i)},1195:function(e,t,n){var r,i;r=[n.dj.c(e.i),t],void 0===(i=function(e,t){for(var n in Object.defineProperty(t,"__esModule",{value:!0}),t.functionDecls={concatenate:{min:"0",max:"*"},split:{min:"2",max:"4"},guid:{min:"0",max:"1"},today:{min:"0",max:"0"},angle:{min:"2",max:"3"},bearing:{min:"2",max:"3"},urlencode:{min:"1",max:"1"},now:{min:"0",max:"0"},timestamp:{min:"0",max:"0"},day:{min:"1",max:"1"},month:{min:"1",max:"1"},year:{min:"1",max:"1"},hour:{min:"1",max:"1"},second:{min:"1",max:"1"},millisecond:{min:"1",max:"1"},minute:{min:"1",max:"1"},weekday:{min:"1",max:"1"},toutc:{min:"1",max:"1"},tolocal:{min:"1",max:"1"},date:{min:"0",max:"7"},datediff:{min:"2",max:"3"},dateadd:{min:"2",max:"3"},trim:{min:"1",max:"1"},text:{min:"1",max:"2"},left:{min:"2",max:"2"},right:{min:"2",max:"2"},mid:{min:"2",max:"3"},upper:{min:"1",max:"1"},proper:{min:"1",max:"2"},lower:{min:"1",max:"1"},find:{min:"2",max:"3"},iif:{min:"3",max:"3"},decode:{min:"2",max:"*"},when:{min:"2",max:"*"},defaultvalue:{min:"2",max:"2"},isempty:{min:"1",max:"1"},domaincode:{min:"2",max:"4"},domainname:{min:"2",max:"4"},polygon:{min:"1",max:"1"},point:{min:"1",max:"1"},polyline:{min:"1",max:"1"},extent:{min:"1",max:"1"},multipoint:{min:"1",max:"1"},ringisclockwise:{min:"1",max:"1"},geometry:{min:"1",max:"1"},count:{min:"0",max:"*"},number:{min:"1",max:"2"},acos:{min:"1",max:"1"},asin:{min:"1",max:"1"},atan:{min:"1",max:"1"},atan2:{min:"2",max:"2"},ceil:{min:"1",max:"2"},floor:{min:"1",max:"2"},round:{min:"1",max:"2"},cos:{min:"1",max:"1"},exp:{min:"1",max:"1"},log:{min:"1",max:"1"},min:{min:"0",max:"*"},constrain:{min:"3",max:"3"},console:{min:"0",max:"*"},max:{min:"0",max:"*"},pow:{min:"2",max:"2"},random:{min:"0",max:"0"},sqrt:{min:"1",max:"1"},sin:{min:"1",max:"1"},tan:{min:"1",max:"1"},abs:{min:"1",max:"1"},isnan:{min:"1",max:"1"},stdev:{min:"0",max:"*"},average:{min:"0",max:"*"},mean:{min:"0",max:"*"},sum:{min:"0",max:"*"},variance:{min:"0",max:"*"},distinct:{min:"0",max:"*"},first:{min:"1",max:"1"},top:{min:"2",max:"2"},boolean:{min:"1",max:"1"},dictionary:{min:"0",max:"*"},typeof:{min:"1",max:"1"},reverse:{min:"1",max:"1"},replace:{min:"3",max:"4"},sort:{min:"1",max:"2"},feature:{min:"1",max:"*"},haskey:{min:"2",max:"2"},indexof:{min:"2",max:"2"},disjoint:{min:"2",max:"2"},intersects:{min:"2",max:"2"},touches:{min:"2",max:"2"},crosses:{min:"2",max:"2"},within:{min:"2",max:"2"},contains:{min:"2",max:"2"},overlaps:{min:"2",max:"2"},equals:{min:"2",max:"2"},relate:{min:"3",max:"3"},intersection:{min:"2",max:"2"},union:{min:"1",max:"2"},difference:{min:"2",max:"2"},symmetricdifference:{min:"2",max:"2"},clip:{min:"2",max:"2"},cut:{min:"2",max:"2"},area:{min:"1",max:"2"},areageodetic:{min:"1",max:"2"},length:{min:"1",max:"2"},lengthgeodetic:{min:"1",max:"2"},distancegeodetic:{min:"2",max:"3"},distance:{min:"2",max:"3"},densify:{min:"2",max:"3"},densifygeodetic:{min:"2",max:"3"},generalize:{min:"2",max:"4"},buffer:{min:"2",max:"3"},buffergeodetic:{min:"2",max:"3"},offset:{min:"2",max:"6"},rotate:{min:"2",max:"3"},issimple:{min:"1",max:"1"},simplify:{min:"1",max:"1"},centroid:{min:"1",max:"1"},isselfintersecting:{min:"1",max:"1"},multiparttosinglepart:{min:"1",max:"1"},setgeometry:{min:"2",max:"2"},portal:{min:"1",max:"1"}},t.functionDecls)t.functionDecls[n].fmin=t.functionDecls[n].min,t.functionDecls[n].fmax=t.functionDecls[n].max;var r=["featureset","featuresetbyid","featuresetbyname","featuresetbyassociation","featuresetbyrelationshipname","featuresetbyurl","attachments","featuresetbyportalitem"],i=["disjoint","intersects","touches","crosses","within","contains","overlaps","equals","relate","intersection","union","difference","symmetricdifference","clip","cut","area","areageodetic","length","lengthgeodetic","distance","distancegeodetic","densify","densifygeodetic","generalize","buffer","buffergeodetic","offset","rotate","issimple","simplify","multiparttosinglepart"];function a(e,t){return"0"!==e.min&&t.length<Number(e.min)||"*"!==e.max&&t.length>Number(e.max)?-2:1}function o(e,t,n){if(null!==n.localScope&&void 0!==n.localScope[e.toLowerCase()]){if("FormulaFunction"===(r=n.localScope[e.toLowerCase()]).type)return void 0===r.signature&&(r.signature={min:"0",max:"*"}),a(r.signature,t);if("any"===r.type)return void 0===r.signature&&(r.signature={min:"0",max:"*"}),a(r.signature,t)}if(void 0!==n.globalScope[e.toLowerCase()]){var r;if("FormulaFunction"===(r=n.globalScope[e.toLowerCase()]).type)return void 0===r.signature&&(r.signature={min:"0",max:"*"}),a(r.signature,t);if("any"===r.type)return void 0===r.signature&&(r.signature={min:"0",max:"*"}),a(r.signature,t)}return-1}function s(e,t){if(e)for(var n=0,r=e;n<r.length;n++)u(r[n],t)}function u(e,t){if(e&&!1!==t(e))switch(e.type){case"ArrayExpression":s(e.elements,t);break;case"AssignmentExpression":case"BinaryExpression":u(e.left,t),u(e.right,t);break;case"BlockStatement":s(e.body,t);break;case"BreakStatement":break;case"CallExpression":u(e.callee,t),s(e.arguments,t);break;case"ConditionalExpression":u(e.test,t),u(e.alternate,t),u(e.consequent,t);break;case"ContinueStatement":break;case"DoWhileStatement":u(e.test,t),u(e.body,t);break;case"EmptyStatement":break;case"ExpressionStatement":u(e.expression,t);break;case"ForInStatement":u(e.left,t),u(e.right,t),u(e.body,t);break;case"ForStatement":u(e.init,t),u(e.test,t),u(e.update,t),u(e.body,t);break;case"FunctionDeclaration":case"FunctionDeclaration":case"FunctionExpression":u(e.id,t),s(e.params,t),u(e.body,t);break;case"Identifier":break;case"IfStatement":u(e.test,t),u(e.consequent,t),u(e.alternate,t);break;case"Literal":break;case"LogicalExpression":u(e.left,t),u(e.right,t);break;case"MemberExpression":u(e.object,t),u(e.property,t);break;case"NewExpression":u(e.callee,t),s(e.arguments,t);break;case"ObjectExpression":s(e.properties,t);break;case"Program":s(e.body,t);break;case"Property":u(e.key,t),u(e.value,t);break;case"ReturnStatement":case"UnaryExpression":case"UpdateExpression":u(e.argument,t);break;case"VariableDeclaration":s(e.declarations,t);break;case"VariableDeclarator":u(e.id,t),u(e.init,t)}}function l(e,t){void 0===t&&(t=!0);var n=d(e,"SYNTAX","UNREOGNISED");try{switch(e.type){case"VariableDeclarator":return null!==e.init&&"FunctionExpression"===e.init.type?d(e,"SYNTAX","FUNCTIONVARIABLEDECLARATOR"):"Identifier"!==e.id.type?d(e,"SYNTAX","VARIABLEMUSTHAVEIDENTIFIER"):null!==e.init?l(e.init,!1):"";case"VariableDeclaration":for(var r=0;r<e.declarations.length;r++)if(""!==(n=l(e.declarations[r],t)))return n;return"";case"ForInStatement":if(""!==(n=l(e.left,t)))return n;if("VariableDeclaration"===e.left.type){if(e.left.declarations.length>1)return d(e,"SYNTAX","ONLY1VAR");if(null!==e.left.declarations[0].init)return d(e,"SYNTAX","CANNOTDECLAREVAL")}else if("Identifier"!==e.left.type)return d(e,"SYNTAX","LEFTNOTVAR");return""!==(n=l(e.right,t))||""!==(n=l(e.body,t))?n:"";case"ForStatement":return null!==e.test&&""!==(n=l(e.test,t))||null!==e.init&&""!==(n=l(e.init,t))||null!==e.update&&""!==(n=l(e.update,t))||null!==e.body&&""!==(n=l(e.body,t))?n:"";case"ContinueStatement":case"EmptyStatement":case"BreakStatement":return"";case"IfStatement":return""!==(n=l(e.test,t))||null!==e.consequent&&""!==(n=l(e.consequent,!1))||null!==e.alternate&&""!==(n=l(e.alternate,!1))?n:"";case"BlockStatement":var i=[];for(r=0;r<e.body.length;r++)"EmptyStatement"!==e.body[r].type&&i.push(e.body[r]);for(e.body=i,r=0;r<e.body.length;r++)if(""!==(n=l(e.body[r],t)))return n;return"";case"FunctionDeclaration":return!1===t?d(e,"SYNTAX","GLOBALFUNCTIONSONLY"):"Identifier"!==e.id.type?d(e,"SYNTAX","FUNCTIONMUSTHAVEIDENTIFIER"):l(e.body,!1);case"ReturnStatement":return null!==e.argument?l(e.argument,t):"";case"UpdateExpression":return"Identifier"!==e.argument.type&&"MemberExpression"!==e.argument.type?d(e,"SYNTAX","ASSIGNMENTTOVARSONLY"):l(e.argument,t);case"AssignmentExpression":if("Identifier"!==e.left.type&&"MemberExpression"!==e.left.type)return d(e,"SYNTAX","ASSIGNMENTTOVARSONLY");if(""!==(n=l(e.left,t)))return n;switch(e.operator){case"=":case"/=":case"*=":case"%=":case"+=":case"-=":break;default:return d(e,"SYNTAX","OPERATORNOTRECOGNISED")}return l(e.right,!1);case"ExpressionStatement":return"AssignmentExpression"===e.expression.type||e.expression.type,l(e.expression,!1);case"Identifier":n="";break;case"MemberExpression":return""!==(n=l(e.object,t))?n:!0===e.computed?l(e.property,t):"";case"Literal":return"";case"CallExpression":if("Identifier"!==e.callee.type)return d(e,"SYNTAX","ONLYNODESSUPPORTED");for(n="",r=0;r<e.arguments.length;r++)if(""!==(n=l(e.arguments[r],t)))return n;return"";case"UnaryExpression":n=l(e.argument,t);break;case"BinaryExpression":if(""!==(n=l(e.left,t)))return n;if(""!==(n=l(e.right,t)))return n;switch(e.operator){case"==":case"!=":case"<":case"<=":case">":case">=":case"+":case"-":case"*":case"/":case"%":break;default:return d(e,"SYNTAX","OPERATORNOTRECOGNISED")}return"";case"LogicalExpression":if(""!==(n=l(e.left,t)))return n;if(""!==(n=l(e.right)))return n;switch(e.operator){case"&&":case"||":break;default:return d(e,"SYNTAX","OPERATORNOTRECOGNISED")}return"";case"ConditionalExpression":return d(e,"SYNTAX","NOTSUPPORTED");case"ArrayExpression":for(n="",r=0;r<e.elements.length;r++)if(""!==(n=l(e.elements[r],t)))return n;return n;case"ObjectExpression":for(n="",r=0;r<e.properties.length;r++){if(n="",null!==e.properties[r].key&&("Literal"!==e.properties[r].key.type&&"Identifier"!==e.properties[r].key.type&&(n=d(e,"SYNTAX","OBJECTPROPERTYMUSTBESTRING")),"Literal"===e.properties[r].key.type)){var a=e.properties[r].key,o="value"in a?a.value:null;"string"==typeof o||o instanceof String||(n=d(e,"SYNTAX","OBJECTPROPERTYMUSTBESTRING"))}if(""===n&&(n=l(e.properties[r],t)),""!==n)return n}return n;case"Property":return"Literal"!==e.key.type&&"Identifier"!==e.key.type?d(e,"SYNTAX","ONLYLITERAL"):"Identifier"!==e.key.type&&""!==(n=l(e.key,t))?n:n=l(e.value,t);default:return n}return n}catch(e){throw e}}function c(e,t){var n=d(e,"SYNTAX","UNREOGNISED"),r=null,i="";try{switch(e.type){case"VariableDeclarator":if(null!==e.init&&"FunctionExpression"===e.init.type)return d(e,"SYNTAX","FUNCTIONVARIABLEDECLARATOR");var a=null===e.init?"":c(e.init,t);return""!==a?a:("Identifier"===e.id.type&&(null===t.localScope?t.globalScope[e.id.name.toLowerCase()]={type:"any"}:t.localScope[e.id.name.toLowerCase()]={type:"any"}),"");case"FunctionDeclaration":return r=p(e.id.name.toLowerCase(),e),""!==(i=m(e,t))?i:null!==t.localScope?d(e,"SYNTAX","GLOBALFUNCTIONSONLY"):(r.isnative=!1,t.globalScope[e.id.name.toLowerCase()]={type:"FormulaFunction",signature:[r]},"");case"VariableDeclaration":n="";for(var s=0;s<e.declarations.length;s++)if(""!==(n=c(e.declarations[s],t)))return n;return n;case"IfStatement":return""!==(n=c(e.test,t))?n:"AssignmentExpression"===e.test.type||"UpdateExpression"===e.test.type?d(e.test,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION"):null!==e.consequent&&""!==(n=c(e.consequent,t))||null!==e.alternate&&""!==(n=c(e.alternate,t))?n:"";case"EmptyStatement":return"";case"BlockStatement":for(s=0;s<e.body.length;s++)if(""!==(n=c(e.body[s],t)))return n;return"";case"ReturnStatement":return null!==e.argument?c(e.argument,t):"";case"ForInStatement":if("VariableDeclaration"===e.left.type){if(e.left.declarations.length>1)return d(e,"SYNTAX","ONLY1VAR");if(null!==e.left.declarations[0].init)return d(e,"SYNTAX","CANNOTDECLAREVAL")}else if("Identifier"!==e.left.type)return d(e,"SYNTAX","LEFTNOTVAR");return""!==(n=c(e.left,t))||""!==(n=c(e.right,t))||""!==(n=c(e.body,t))?n:"";case"ForStatement":return null!==e.init&&""!==(n=c(e.init,t))||null!==e.test&&""!==(n=c(e.test,t))||null!==e.body&&""!==(n=c(e.body,t))||null!==e.update&&""!==(n=c(e.update,t))?n:"";case"BreakStatement":case"ContinueStatement":return"";case"UpdateExpression":if("Identifier"!==e.argument.type&&"MemberExpression"!==e.argument.type)return d(e,"SYNTAX","ASSIGNMENTTOVARSONLY");var u=!1;return"MemberExpression"===e.argument.type?c(e.argument,t):(null!==t.localScope&&void 0!==t.localScope[e.argument.name.toLowerCase()]&&(u=!0),void 0!==t.globalScope[e.argument.name.toLowerCase()]&&(u=!0),!1===u?"Identifier "+e.argument.name+" has not been declared.":"");case"AssignmentExpression":if("Identifier"!==e.left.type&&"MemberExpression"!==e.left.type)return d(e,"SYNTAX","ASSIGNMENTTOVARSONLY");var l=c(e.right,t);return""!==l?l:(u=!1,"MemberExpression"===e.left.type?""!==(l=c(e.left,t))?l:"":(null!==t.localScope&&void 0!==t.localScope[e.left.name.toLowerCase()]&&(u=!0),void 0!==t.globalScope[e.left.name.toLowerCase()]&&(u=!0),!1===u?"Identifier "+e.left.name+" has not been declared.":""));case"ExpressionStatement":return"AssignmentExpression"===e.expression.type||e.expression.type,c(e.expression,t);case"Identifier":var f=e.name.toLowerCase();if(null!==t.localScope&&void 0!==t.localScope[f])return"";n=void 0!==t.globalScope[f]?"":d(e,"SYNTAX","VARIABLENOTFOUND");break;case"MemberExpression":return""!==(n=c(e.object,t))?n:!0===e.computed?c(e.property,t):"";case"Literal":return"";case"CallExpression":if("Identifier"!==e.callee.type)return d(e,"SYNTAX","ONLYNODESSUPPORTED");for(n="",s=0;s<e.arguments.length;s++)if(""!==(n=c(e.arguments[s],t)))return n;var h=o(e.callee.name,e.arguments,t);-1===h&&(n=d(e,"SYNTAX","NOTFOUND")),-2===h&&(n=d(e,"SYNTAX","WRONGSIGNATURE"));break;case"UnaryExpression":n=c(e.argument,t);break;case"BinaryExpression":return""!==(n=c(e.left,t))||""!==(n=c(e.right,t))?n:"";case"LogicalExpression":return""!==(n=c(e.left,t))?n:"AssignmentExpression"===e.left.type||"UpdateExpression"===e.left.type?d(e.left,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION"):""!==(n=c(e.right,t))?n:"AssignmentExpression"===e.right.type||"UpdateExpression"===e.right.type?d(e.right,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION"):"";case"ConditionalExpression":return d(e,"SYNTAX","NOTSUPPORTED");case"ArrayExpression":for(n="",s=0;s<e.elements.length;s++)if(""!==(n=c(e.elements[s],t)))return n;return n;case"ObjectExpression":for(n="",s=0;s<e.properties.length;s++){if(n="",null!==e.properties[s].key&&("Literal"!==e.properties[s].key.type&&"Identifier"!==e.properties[s].key.type&&(n=d(e,"SYNTAX","OBJECTPROPERTYMUSTBESTRING")),"Literal"===e.properties[s].key.type)){var g=e.properties[s].key,y="value"in g?g.value:null;"string"==typeof y||y instanceof String||(n=d(e,"SYNTAX","OBJECTPROPERTYMUSTBESTRING"))}if(""===n&&(n=c(e.properties[s],t)),""!==n)return n}return n;case"Property":return"Literal"!==e.key.type&&"Identifier"!==e.key.type?d(e,"SYNTAX","ONLYLITERAL"):"Identifier"!==e.key.type&&""!==(n=c(e.key,t))?n:n=c(e.value,t);case"Program":case"FunctionExpression":case"NewExpression":case"DoWhileStatement":default:return n}return n}catch(e){throw e}}function f(e,t){var n=!1,r=t.toLowerCase();return u(e,(function(e){return!n&&("Identifier"===e.type&&e.name&&e.name.toLowerCase()===r&&(n=!0),!0)})),n}function p(e,t){var n=[];if(void 0!==t.params&&null!==t.params)for(var r=0;r<t.params.length;r++)n.push("any");return{name:e,return:"any",params:n}}function m(e,t){for(var n={globalScope:t.globalScope,localScope:{}},r=0;r<e.params.length;r++){var i=e.params[r].name;n.localScope[i.toLowerCase()]={type:"any"}}return c(e.body,n)}function h(e,t,n,r){var i={};for(var a in null==e&&(e={}),null==n&&(n={}),i.infinity={type:"any"},i.textformatting={type:"any"},i.pi={type:"any"},t)"sync"===r&&void 0!==t[a].min?i[a]={type:"FormulaFunction",signature:{min:t[a].min,max:t[a].max}}:"sync"!==r&&void 0!==t[a].fmin&&(i[a]={type:"FormulaFunction",signature:{min:t[a].fmin,max:t[a].fmax}});for(var o=0;o<n.length;o++)i[(a=n[o]).name]={type:"FormulaFunction",signature:a};for(var a in e)i[a]=e[a],i[a].type="any";return i}function d(e,t,n){var r="";switch(t){case"SYNTAX":r="Syntax Error: ";break;case"RUNTIME":r="Runtime Error: ";break;default:r="Syntax Error: "}try{switch(e.type){case"IfStatement":switch(n){case"CANNOT_USE_ASSIGNMENT_IN_CONDITION":r+=" Assignments not be made in logical tests";break;case"CANNOT_USE_NONBOOLEAN_IN_CONDITION":r+=" Non Boolean used as Condition"}break;case"UpdateExpression":case"AssignmentExpression":switch(n){case"CANNOT_USE_ASSIGNMENT_IN_CONDITION":r+=" Assignments not be made in logical tests";break;case"ASSIGNMENTTOVARSONLY":r+=" Assignments can only be made to identifiers"}break;case"ExpressionStatement":r+=" Assignments can only be made to identifiers";break;case"FunctionDeclaration":switch(n){case"GLOBALFUNCTIONSONLY":r+=" Functions cannot be declared as variables";break;case"FUNCTIONMUSTHAVEIDENTIFIER":r+=" Function Definition must have an identifier"}break;case"VariableDeclaration":r+=" Only 1 variable can be declared at a time";break;case"VariableDeclarator":switch(n){case"FUNCTIONVARIABLEDECLARATOR":r+=" Functions cannot be declared as variables";break;case"VARIABLEMUSTHAVEIDENTIFIER":r+=" Variable Definition must have an identifier"}break;case"Identifier":r+=" Identifier Not Found. ",r+=e.name;break;case"ObjectExpression":switch(n){case"OBJECTPROPERTYMUSTBESTRING":r+=" Property name must be a string"}break;case"ForStatement":switch(n){case"CANNOT_USE_NONBOOLEAN_IN_CONDITION":r+=" Non Boolean used as Condition"}break;case"ForInStatement":switch(n){case"ONLY1VAR":r+=" Can only declare 1 var for use with IN";break;case"CANNOTDECLAREVAL":r+=" Can only declare value for use with IN";break;case"LEFTNOVAR":r+="Must provide a variable to iterate with.";break;case"VARIABLENOTDECLARED":r+="Variable must be declared before it is used..";break;case"CANNOTITERATETHISTYPE":r+="This type cannot be used in an IN loop"}break;case"MemberExpression":switch(n){case"PROPERTYNOTFOUND":r+="Cannot find member property. ",r+=!1===e.computed&&"Identifier"===e.property.type?e.property.name:"";break;case"OUTOFBOUNDS":r+="Out of Bounds. ",r+=!1===e.computed&&"Identifier"===e.property.type?e.property.name:"";break;case"NOTFOUND":r+="Cannot call member method on null. ",r+=!1===e.computed&&"Identifier"===e.property.type?e.property.name:"";break;case"INVALIDTYPE":r+="Cannot call member property on object of this type. ",r+=!1===e.computed&&"Identifier"===e.property.type?e.property.name:""}break;case"Property":switch(n){case"ONLYLITERAL":r+="Property names must be literals or identifiers"}break;case"Literal":break;case"CallExpression":switch(n){case"WRONGSIGNATURE":r+="Function signature does not match: ",r+="Identifier"===e.callee.type?e.callee.name:"";break;case"ONLYNODESUPPORTED":r+="Functions must be declared.",r+="Identifier"===e.callee.type?e.callee.name:"";break;case"NOTAFUNCTION":r+="Not a Function: ",r+="Identifier"===e.callee.type?e.callee.name:"";break;case"NOTFOUND":r+="Function Not Found: "+("Identifier"===e.callee.type?e.callee.name:"")}break;case"UnaryExpression":switch(n){case"NOTSUPPORTEDUNARYOPERATOR":r+="Operator "+e.operator+" not allowed in this context. Only ! can be used with boolean, and - with a number";break;case"NOTSUPPORTEDTYPE":r+="Unary operator "+e.operator+" cannot be used with this argument."}case"BinaryExpression":switch(n){case"OPERATORNOTRECOGNISED":r+="Binary Operator not recognised "+e.operator}break;case"LogicalExpression":switch(n){case"ONLYBOOLEAN":r+="Operator "+e.operator+" cannot be used. Only || or && are allowed values";break;case"ONLYORORAND":r+="Logical Expression "+e.operator+" being applied to parameters that are not boolean."}break;case"ConditionalExpression":r+="Conditional statements not supported.";break;case"ArrayExpression":switch(n){case"FUNCTIONCONTEXTILLEGAL":r+=" Cannot Put Function inside Array."}break;default:r+="Expression contains unrecognised code structures."}}catch(e){throw e}return r}function g(e,t,n){return{line:e.loc.start.line,character:e.loc.start.column,reason:d(e,t,n)}}function y(e,t,n,r){for(var i={globalScope:t.globalScope,localScope:{}},a=0;a<e.params.length;a++){var o=e.params[a].name;i.localScope[o.toLowerCase()]={type:"any"}}v(e.body,i,n,r,!1)}function v(e,t,n,r,i){if(void 0===i&&(i=!0),null===e)throw new Error("Unnexpexted Expression Syntax");var a=null;try{switch(e.type){case"VariableDeclarator":return null!==e.init&&"FunctionExpression"===e.init.type?void r.push(g(e,"SYNTAX","FUNCTIONVARIABLEDECLARATOR")):("Identifier"!==e.id.type?r.push(g(e,"SYNTAX","VARIABLEMUSTHAVEIDENTIFIER")):(null!==t.localScope?t.localScope[e.id.name.toLowerCase()]:t.globalScope[e.id.name.toLowerCase()],null===t.localScope?t.globalScope[e.id.name.toLowerCase()]={type:"any"}:t.localScope[e.id.name.toLowerCase()]={type:"any"}),void(null!==e.init&&v(e.init,t,n,r,i)));case"FunctionDeclaration":return!1===i&&r.push(g(e,"SYNTAX","GLOBALFUNCTIONSONLY")),"Identifier"!==e.id.type&&r.push(g(e,"SYNTAX","FUNCTIONMUSTHAVEIDENTIFIER")),a=p("",e),y(e,t,n,r),null!==t.localScope&&r.push(g(e,"SYNTAX","GLOBALFUNCTIONSONLY")),a.isnative=!1,void("Identifier"===e.id.type&&(t.globalScope[e.id.name.toLowerCase()]={type:"FormulaFunction",signature:[a]}));case"VariableDeclaration":for(var s=0;s<e.declarations.length;s++)v(e.declarations[s],t,n,r,i);return;case"IfStatement":return null!==e.test&&(v(e.test,t,n,r,i),"AssignmentExpression"!==e.test.type&&"UpdateExpression"!==e.test.type||r.push(g(e.test,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION"))),null!==e.consequent&&v(e.consequent,t,n,r,i),void(null!==e.alternate&&v(e.alternate,t,n,r,i));case"EmptyStatement":return;case"BlockStatement":if(null!==e.body)for(s=0;s<e.body.length;s++)v(e.body[s],t,n,r,i);return;case"ReturnStatement":return void(null!==e.argument&&v(e.argument,t,n,r,i));case"ForInStatement":return"VariableDeclaration"===e.left.type?(e.left.declarations.length>1&&r.push(g(e,"SYNTAX","ONLY1VAR")),null!==e.left.declarations[0].init&&r.push(g(e,"SYNTAX","CANNOTDECLAREVAL"))):"Identifier"!==e.left.type&&r.push(g(e,"SYNTAX","LEFTNOTVAR")),v(e.left,t,n,r,i),v(e.right,t,n,r,i),void v(e.body,t,n,r,i);case"ForStatement":return null!==e.init&&v(e.init,t,n,r,i),null!==e.test&&v(e.test,t,n,r,i),null!==e.body&&v(e.body,t,n,r,i),void(null!==e.update&&v(e.update,t,n,r,i));case"BreakStatement":case"ContinueStatement":return;case"UpdateExpression":if("Identifier"!==e.argument.type&&"MemberExpression"!==e.argument.type)r.push(g(e,"SYNTAX","ASSIGNMENTTOVARSONLY"));else{if("Identifier"===e.argument.type){var u=!1;!1===n&&(null!==t.localScope&&void 0!==t.localScope[e.argument.name.toLowerCase()]&&(u=!0),void 0!==t.globalScope[e.argument.name.toLowerCase()]&&(u=!0),!1===u&&r.push({line:null===e?0:e.loc.start.line,character:null===e?0:e.loc.start.column,reason:"Identifier "+e.argument.name+" has not been declared."}))}"MemberExpression"===e.argument.type&&v(e.argument,t,n,r,i)}return;case"AssignmentExpression":switch("Identifier"!==e.left.type&&"MemberExpression"!==e.left.type&&r.push(g(e,"SYNTAX","ASSIGNMENTTOVARSONLY")),e.operator){case"=":case"/=":case"*=":case"%=":case"+=":case"-=":break;default:r.push(g(e,"SYNTAX","OPERATORNOTRECOGNISED"))}v(e.right,t,n,r,i);var l=!1;return"Identifier"===e.left.type&&(null!==t.localScope&&void 0!==t.localScope[e.left.name.toLowerCase()]&&(l=!0),void 0!==t.globalScope[e.left.name.toLowerCase()]&&(l=!0),!1===n&&!1===l&&r.push({line:null===e?0:e.loc.start.line,character:null===e?0:e.loc.start.column,reason:"Identifier "+e.left.name+" has not been declared."})),void("MemberExpression"===e.left.type&&v(e.left,t,n,r,i));case"ExpressionStatement":return"AssignmentExpression"===e.expression.type||e.expression.type,void v(e.expression,t,n,r,i);case"Identifier":var c=e.name.toLowerCase();if(null!==t.localScope&&void 0!==t.localScope[c])return;if(void 0!==t.globalScope[c])return;!1===n&&r.push(g(e,"SYNTAX","VARIABLENOTFOUND"));break;case"MemberExpression":return v(e.object,t,n,r,i),void(!0===e.computed&&v(e.property,t,n,r,i));case"Literal":return;case"CallExpression":for("Identifier"!==e.callee.type&&r.push(g(e,"SYNTAX","ONLYNODESSUPPORTED")),s=0;s<e.arguments.length;s++)v(e.arguments[s],t,n,r,i);if("Identifier"===e.callee.type){var f=o(e.callee.name,e.arguments,t);!1===n&&-1===f&&r.push(g(e,"SYNTAX","NOTFOUND")),-2===f&&r.push(g(e,"SYNTAX","WRONGSIGNATURE"))}return;case"UnaryExpression":return void v(e.argument,t,n,r,i);case"BinaryExpression":switch(v(e.left,t,n,r,i),v(e.right,t,n,r,i),e.operator){case"==":case"!=":case"<":case"<=":case">":case">=":case"+":case"-":case"*":case"/":case"%":break;default:r.push(g(e,"SYNTAX","OPERATORNOTRECOGNISED"))}return;case"LogicalExpression":switch(e.operator){case"&&":case"||":break;default:r.push(g(e,"SYNTAX","OPERATORNOTRECOGNISED"))}return v(e.left,t,n,r,i),"AssignmentExpression"!==e.left.type&&"UpdateExpression"!==e.left.type||r.push(g(e,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION")),v(e.right,t,n,r,i),void("AssignmentExpression"!==e.right.type&&"UpdateExpression"!==e.right.type||r.push(g(e,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION")));case"ConditionalExpression":r.push(g(e,"SYNTAX","NOTSUPPORTED"));break;case"ArrayExpression":for(s=0;s<e.elements.length;s++)v(e.elements[s],t,n,r,i);return;case"ObjectExpression":for(s=0;s<e.properties.length;s++)v(e.properties[s],t,n,r,i);return;case"Property":return"Literal"!==e.key.type&&"Identifier"!==e.key.type&&r.push(g(e,"SYNTAX","ONLYLITERAL")),"Literal"===e.key.type&&v(e.key,t,n,r,i),void v(e.value,t,n,r,i);default:r.push(g(e,"SYNTAX","UNRECOGNISED"))}return}catch(t){r.push({line:null===e?0:e.loc.start.line,character:null===e?0:e.loc.start.column,reason:"Unnexpected Syntax"})}}function b(e){var t=[];return u(e,(function(e){return"CallExpression"===e.type&&"Identifier"===e.callee.type&&t.push(e.callee.name.toLowerCase()),!0})),t}t.addFunctionDeclaration=function(e,n){var r=t.functionDecls[e.name.toLowerCase()];void 0===r?t.functionDecls[e.name.toLowerCase()]="sync"===n?{min:e.min,max:e.max}:{fmin:e.min,fmax:e.max}:"sync"===n?(r.min=e.min,r.max=e.max):(r.fmin=e.min,r.fmax=e.max)},t.checkFunctionSignature=a,t.findFunction=o,t.walk=u,t.validateLanguageNode=l,t.testValidityOfExpression=c,t.referencesMember=f,t.referencesFunction=function(e,t){var n=!1,r=t.toLowerCase();return u(e,(function(e){return!(n||"CallExpression"===e.type&&"Identifier"===e.callee.type&&e.callee.name&&e.callee.name.toLowerCase()===r&&(n=!0,1))})),n},t.findFieldLiterals=function(e){var t=[];return u(e,(function(e){return"MemberExpression"!==e.type||"Identifier"!==e.object.type||(!1===e.computed&&e.object&&e.object.name&&e.property&&"Identifier"===e.property.type&&e.property.name?t.push(e.object.name.toLowerCase()+"."+e.property.name.toLowerCase()):e.object&&e.object.name&&e.property&&"Literal"===e.property.type&&"string"==typeof e.property.value&&t.push(e.object.name.toLowerCase()+"."+e.property.value.toString().toLowerCase()),!1)})),t},t.extractFunctionDeclaration=p,t.validateFunction=m,t.constructGlobalScope=h,t.validateScript=function(e,n,r,i){void 0===r&&(r="async"),void 0===i&&(i=t.functionDecls);var a={globalScope:h(n.vars,i,n.customFunctions,r),localScope:null};return c(e.body[0].body,a)},t.validateLanguage=function(e){return"BlockStatement"!==e.body[0].body.type?"Invalid formula content.":l(e.body[0].body)},t.nodeErrorMessage=d,t.makeError=g,t.extractAllIssuesInFunction=y,t.extractAllIssues=v,t.checkScript=function(e,n,r,i,a){void 0===i&&(i="async"),void 0===a&&(a=t.functionDecls);var o=[];if("BlockStatement"!==e.body[0].body.type)return[{line:0,character:0,reason:"Invalid Body"}];null==n&&(n={vars:{},customFunctions:[]});var s={globalScope:h(n.vars,a,n.customFunctions,i),localScope:null};try{v(e.body[0].body,s,r,o)}catch(e){}return o},t.findFunctionCalls=b,t.findScriptDependencies=function(e,t){void 0===t&&(t=[]);var n=null;if(void 0===e.usesFeatureSet){null===n&&(n=b(e)),e.usesFeatureSet=!1;for(var a=0;a<n.length;a++)r.indexOf(n[a])>-1&&(e.usesFeatureSet=!0,e.isAsync=!0);if(!1===e.usesFeatureSet&&t&&t.length>0)for(var o=0,s=t;o<s.length;o++)if(f(e,s[o])){e.usesFeatureSet=!0,e.isAsync=!0;break}}if(void 0===e.usesGeometry)for(e.usesGeometry=!1,null===n&&(n=b(e)),a=0;a<n.length;a++)i.indexOf(n[a])>-1&&(e.usesGeometry=!0)},t.scriptUsesFeatureSet=function(e){for(var t=b(e),n=0;n<t.length;n++)if(r.indexOf(t[n])>-1)return!0;return!1}}.apply(null,r))||(e.exports=i)},1217:function(e,t,n){var r,i;r=[n.dj.c(e.i),t,n(5),n(46),n(217)],void 0===(i=function(e,t,n,r,i){Object.defineProperty(t,"__esModule",{value:!0});var a={ar:[".",","],bs:[",","."],ca:[",","."],cs:[","," "],da:[",","."],de:[",","."],"de-ch":[".","’"],el:[",","."],en:[".",","],"en-au":[".",","],es:[",","."],"es-mx":[".",","],et:[","," "],fi:[","," "],fr:[","," "],"fr-ch":[","," "],he:[".",","],hi:[".",",","#,##,##0.###"],hr:[",","."],hu:[","," "],id:[",","."],it:[",","."],"it-ch":[".","’"],ja:[".",","],ko:[".",","],lt:[","," "],lv:[","," "],mk:[",","."],nb:[","," "],nl:[",","."],pl:[","," "],pt:[",","."],"pt-pt":[","," "],ro:[",","."],ru:[","," "],sk:[","," "],sl:[",","."],sr:[",","."],sv:[","," "],th:[".",","],tr:[",","."],uk:[","," "],vi:[",","."],zh:[".",","]};function o(e){e||(e=i.getLocale());var t=e in a;if(!t){var n=e.split("-");n.length>1&&n[0]in a&&(e=n[0],t=!0),t||(e="en")}var r=a[e],o=r[0],s=r[1],u=r[2];return{decimal:o,group:s,pattern:void 0===u?"#,##0.###":u}}t.getCustoms=o,t.format=function(e,t){var i=o((t=n({},t)).locale);t.customs=i;var a=t.pattern||i.pattern;return isNaN(e)||Math.abs(e)===1/0?null:function(e,t,n){var i=(n=n||{}).customs.group,a=n.customs.decimal,o=t.split(";"),u=o[0];if(-1!==(t=o[e<0?1:0]||"-"+u).indexOf("%"))e*=100;else if(-1!==t.indexOf("‰"))e*=1e3;else{if(-1!==t.indexOf("¤"))throw new Error("currency notation not supported");if(-1!==t.indexOf("E"))throw new Error("exponential notation not supported")}var l=s,c=u.match(l);if(!c)throw new Error("unable to find a number expression in pattern: "+t);return!1===n.fractional&&(n.places=0),t.replace(l,function(e,t,n){!0===(n=n||{}).places&&(n.places=0),n.places===1/0&&(n.places=6);var i=t.split("."),a="string"==typeof n.places&&n.places.indexOf(","),o=n.places;a?o=n.places.substring(a+1):o>=0||(o=(i[1]||[]).length),n.round<0||(e=Number(e.toFixed(Number(o))));var s=String(Math.abs(e)).split("."),u=s[1]||"";if(i[1]||n.places){a&&(n.places=n.places.substring(0,a));var l=void 0!==n.places?n.places:i[1]&&i[1].lastIndexOf("0")+1;l>u.length&&(s[1]=r.padEnd(u,Number(l),"0")),o<u.length&&(s[1]=u.substr(0,Number(o)))}else s[1]&&s.pop();var c=i[0].replace(",",""),f=c.indexOf("0");-1!==f&&((f=c.length-f)>s[0].length&&(s[0]=r.padStart(s[0],f,"0")),-1===c.indexOf("#")&&(s[0]=s[0].substr(s[0].length-f)));var p,m,h=i[0].lastIndexOf(",");if(-1!==h){p=i[0].length-h-1;var d=i[0].substr(0,h);-1!==(h=d.lastIndexOf(","))&&(m=d.length-h-1)}for(var g=[],y=s[0];y;){var v=y.length-p;g.push(v>0?y.substr(v):y),y=v>0?y.slice(0,v):"",m&&(p=m,m=void 0)}return s[0]=g.reverse().join(n.group||","),s.join(n.decimal||".")}(e,c[0],{decimal:a,group:i,places:n.places,round:n.round}))}(e,a,t)};var s=/[#0,]*[#0](?:\.0*#*)?/;function u(e){var t=o((e=e||{}).locale),n=e.pattern||t.pattern,i=t.group,a=t.decimal,u=1;if(-1!==n.indexOf("%"))u/=100;else if(-1!==n.indexOf("‰"))u/=1e3;else if(-1!==n.indexOf("¤"))throw new Error("currency notation not supported");var f=n.split(";");return 1===f.length&&f.push("-"+f[0]),{regexp:c(f,(function(t){return(t="(?:"+r.escapeRegExpString(t,".")+")").replace(s,(function(t){var n={signed:!1,separator:e.strict?i:[i,""],fractional:e.fractional,decimal:a,exponent:!1},r=t.split("."),o=e.places;1===r.length&&1!==u&&(r[1]="###"),1===r.length||0===o?n.fractional=!1:(void 0===o&&(o=e.pattern?r[1].lastIndexOf("0")+1:1/0),o&&null==e.fractional&&(n.fractional=!0),!e.places&&o<r[1].length&&(o+=","+r[1].length),n.places=o);var s=r[0].split(",");return s.length>1&&(n.groupSize=s.pop().length,s.length>1&&(n.groupSize2=s.pop().length)),"("+function(e){"places"in(e=e||{})||(e.places=1/0),"string"!=typeof e.decimal&&(e.decimal="."),"fractional"in e&&!/^0/.test(String(e.places))||(e.fractional=[!0,!1]),"exponent"in e||(e.exponent=[!0,!1]),"eSigned"in e||(e.eSigned=[!0,!1]);var t=l(e),n=c(e.fractional,(function(t){var n="";return t&&0!==e.places&&(n="\\"+e.decimal,e.places===1/0?n="(?:"+n+"\\d+)?":n+="\\d{"+e.places+"}"),n}),!0),r=t+n;return n&&(r="(?:(?:"+r+")|(?:"+n+"))"),r+c(e.exponent,(function(t){return t?"([eE]"+l({signed:e.eSigned})+")":""}))}(n)+")"}))}),!0).replace(/[\xa0 ]/g,"[\\s\\xa0]"),group:i,decimal:a,factor:u}}function l(e){return"signed"in(e=e||{})||(e.signed=[!0,!1]),"separator"in e?"groupSize"in e||(e.groupSize=3):e.separator="",c(e.signed,(function(e){return e?"[-+]":""}),!0)+c(e.separator,(function(t){if(!t)return"(?:\\d+)";" "===(t=r.escapeRegExpString(t))?t="\\s":" "===t&&(t="\\s\\xa0");var n=e.groupSize,i=e.groupSize2;if(i){var a="(?:0|[1-9]\\d{0,"+(i-1)+"}(?:["+t+"]\\d{"+i+"})*["+t+"]\\d{"+n+"})";return n-i>0?"(?:"+a+"|(?:0|[1-9]\\d{0,"+(n-1)+"}))":a}return"(?:0|[1-9]\\d{0,"+(n-1)+"}(?:["+t+"]\\d{"+n+"})*)"}),!0)}t.regexp=function(e){return u(e).regexp},t._parseInfo=u,t.parse=function(e,t){var n=u(t),r=new RegExp("^"+n.regexp+"$").exec(e);if(!r)return NaN;var i=r[1];if(!r[1]){if(!r[2])return NaN;i=r[2],n.factor*=-1}return i=i.replace(new RegExp("["+n.group+"\\s\\xa0]","g"),"").replace(n.decimal,"."),Number(i)*n.factor};var c=function(e,t,n){if(!(e instanceof Array))return t(e);for(var r=[],i=0;i<e.length;i++)r.push(t(e[i]));return f(r.join("|"),n)},f=function(e,t){return"("+(t?"?:":"")+e+")"}}.apply(null,r))||(e.exports=i)},1229:function(e,t,n){var r,i;r=[n.dj.c(e.i),t,n(17),n(1194),n(1163)],void 0===(i=function(e,t,n,r,i){return function(e){function t(t,n,r,i,a){var o=e.call(this,t)||this;return o._lazyPath=[],o._hasZ=!1,o._hasM=!1,o._hasZ=r,o._hasM=i,o._spRef=n,o._cacheId=a,o}return n(t,e),t.prototype.get=function(e){if(void 0===this._lazyPath[e]){var t=this._elements[e];if(void 0===t)return;this._lazyPath[e]=new i(t,this._spRef,this._hasZ,this._hasM,this._cacheId,e)}return this._lazyPath[e]},t.prototype.equalityTest=function(e){return e===this||null!==e&&e instanceof t!=0&&e.getUniqueHash()===this.getUniqueHash()},t.prototype.getUniqueHash=function(){return this._cacheId.toString()},t}(r)}.apply(null,r))||(e.exports=i)},1230:function(e,t,n){var r,i;r=[n.dj.c(e.i),t,n(17),n(1108)],void 0===(i=function(e,t,n,r){return function(e){function t(t,n,r,i,a){var o=e.call(this)||this;return o.attachmentUrl=a,o.immutable=!1,o.setField("id",t),o.setField("name",n),o.setField("contenttype",r),o.setField("size",i),o.immutable=!0,o}return n(t,e),t}(r)}.apply(null,r))||(e.exports=i)},1231:function(e,t,n){var r,i;r=[n.dj.c(e.i),t,n(36)],void 0===(i=function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.convertSquareUnitsToCode=function(e){if(void 0===e)return null;if("number"==typeof e)return e;switch(e.toLowerCase()){case"meters":case"meter":case"m":case"squaremeters":case"squaremeter":case"square-meter":case"square-meters":return 109404;case"miles":case"mile":case"squaremile":case"squaremiles":case"square-miles":case"square-mile":return 109413;case"kilometers":case"kilometer":case"squarekilometers":case"squarekilometer":case"square-kilometers":case"square-kilometer":case"km":return 109414;case"acres":case"acre":case"ac":return 109402;case"hectares":case"hectare":case"ha":return 109401;case"yard":case"yd":case"yards":case"square-yards":case"square-yard":case"squareyards":case"squareyard":return 109442;case"feet":case"ft":case"foot":case"square-feet":case"square-foot":case"squarefeet":case"squarefoot":return 109405}return null},t.shapeExtent=function(e){if(null===e)return null;switch(e.type){case"polygon":case"multipoint":case"polyline":return e.extent;case"point":return new n({xmin:e.x,ymin:e.y,xmax:e.x,ymax:e.y,spatialReference:e.spatialReference});case"extent":return e}return null},t.convertLinearUnitsToCode=function(e){if(void 0===e)return null;if("number"==typeof e)return e;if("number"==typeof e)return e;switch(e.toLowerCase()){case"meters":case"meter":case"m":case"squaremeters":case"squaremeter":case"square-meter":case"square-meters":return 9001;case"miles":case"mile":case"squaremile":case"squaremiles":case"square-miles":case"square-mile":return 9035;case"kilometers":case"kilometer":case"squarekilometers":case"squarekilometer":case"square-kilometers":case"square-kilometer":case"km":return 9036;case"yard":case"yd":case"yards":case"square-yards":case"square-yard":case"squareyards":case"squareyard":return 9096;case"feet":case"ft":case"foot":case"square-feet":case"square-foot":case"squarefeet":case"squarefoot":return 9002}return null},t.sameGeomType=function(e,t){return e===t||"point"===e&&"esriGeometryPoint"===t||"polyline"===e&&"esriGeometryPolyline"===t||"polygon"===e&&"esriGeometryPolygon"===t||"extent"===e&&"esriGeometryEnvelope"===t||"multipoint"===e&&"esriGeometryMultipoint"===t||"point"===t&&"esriGeometryPoint"===e||"polyline"===t&&"esriGeometryPolyline"===e||"polygon"===t&&"esriGeometryPolygon"===e||"extent"===t&&"esriGeometryEnvelope"===e||"multipoint"===t&&"esriGeometryMultipoint"===e},t.cloneGeometry=function(e){if(null===e)return null;var t=e.clone();return void 0!==e.cache._geVersion&&(t.cache._geVersion=e.cache._geVersion),t}}.apply(null,r))||(e.exports=i)},1297:function(e,t,n){var r,i;r=[n.dj.c(e.i),t],void 0===(i=function(e,t){return function(e,t){this.definition=null,this.context=null,this.definition=e,this.context=t}}.apply(null,r))||(e.exports=i)},1298:function(e,t,n){var r,i;r=[n.dj.c(e.i),t,n(1077)],void 0===(i=function(e,t,n){function r(e){return null===e?e:isNaN(e.getTime())?null:e}Object.defineProperty(t,"__esModule",{value:!0}),t.registerFunctions=function(e,t){e.today=function(e,r){return t(e,r,(function(e,t,r){n.pcCheck(r,0,0);var i=new Date;return i.setHours(0,0,0,0),i}))},e.now=function(e,r){return t(e,r,(function(e,t,r){return n.pcCheck(r,0,0),new Date}))},e.timestamp=function(e,r){return t(e,r,(function(e,t,r){n.pcCheck(r,0,0);var i=new Date;return new Date(i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate(),i.getUTCHours(),i.getUTCMinutes(),i.getUTCSeconds(),i.getUTCMilliseconds())}))},e.toutc=function(e,r){return t(e,r,(function(e,t,r){n.pcCheck(r,1,1);var i=n.toDate(r[0]);return null===i?null:new Date(i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate(),i.getUTCHours(),i.getUTCMinutes(),i.getUTCSeconds(),i.getUTCMilliseconds())}))},e.tolocal=function(e,r){return t(e,r,(function(e,t,r){n.pcCheck(r,1,1);var i=n.toDate(r[0]);return null===i?null:n.MomentLibrary.Moment.utc([i.getFullYear(),i.getMonth(),i.getDate(),i.getHours(),i.getMinutes(),i.getSeconds(),i.getMilliseconds()]).toDate()}))},e.day=function(e,r){return t(e,r,(function(e,t,r){n.pcCheck(r,1,1);var i=n.toDate(r[0]);return null===i?NaN:i.getDate()}))},e.month=function(e,r){return t(e,r,(function(e,t,r){n.pcCheck(r,1,1);var i=n.toDate(r[0]);return null===i?NaN:i.getMonth()}))},e.year=function(e,r){return t(e,r,(function(e,t,r){n.pcCheck(r,1,1);var i=n.toDate(r[0]);return null===i?NaN:i.getFullYear()}))},e.hour=function(e,r){return t(e,r,(function(e,t,r){n.pcCheck(r,1,1);var i=n.toDate(r[0]);return null===i?NaN:i.getHours()}))},e.second=function(e,r){return t(e,r,(function(e,t,r){n.pcCheck(r,1,1);var i=n.toDate(r[0]);return null===i?NaN:i.getSeconds()}))},e.millisecond=function(e,r){return t(e,r,(function(e,t,r){n.pcCheck(r,1,1);var i=n.toDate(r[0]);return null===i?NaN:i.getMilliseconds()}))},e.minute=function(e,r){return t(e,r,(function(e,t,r){n.pcCheck(r,1,1);var i=n.toDate(r[0]);return null===i?NaN:i.getMinutes()}))},e.weekday=function(e,r){return t(e,r,(function(e,t,r){n.pcCheck(r,1,1);var i=n.toDate(r[0]);return null===i?NaN:i.getDay()}))},e.date=function(e,i){return t(e,i,(function(e,t,i){if(n.pcCheck(i,0,7),3===i.length)return r(new Date(n.toNumber(i[0]),n.toNumber(i[1]),n.toNumber(i[2]),0,0,0,0));if(4===i.length)return r(new Date(n.toNumber(i[0]),n.toNumber(i[1]),n.toNumber(i[2]),n.toNumber(i[3]),0,0,0));if(5===i.length)return r(new Date(n.toNumber(i[0]),n.toNumber(i[1]),n.toNumber(i[2]),n.toNumber(i[3]),n.toNumber(i[4]),0,0));if(6===i.length)return r(new Date(n.toNumber(i[0]),n.toNumber(i[1]),n.toNumber(i[2]),n.toNumber(i[3]),n.toNumber(i[4]),n.toNumber(i[5]),0));if(7===i.length)return r(new Date(n.toNumber(i[0]),n.toNumber(i[1]),n.toNumber(i[2]),n.toNumber(i[3]),n.toNumber(i[4]),n.toNumber(i[5]),n.toNumber(i[6])));if(2===i.length){var a=n.toString(i[1]);if(""===a)return null;a=n.standardiseDateFormat(a);var o=n.MomentLibrary.Moment(n.toString(i[0]),a,!0);return!0===o.isValid()?o.toDate():null}if(1===i.length){if(n.isString(i[0])&&""===i[0].replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""))return null;var s=n.toNumber(i[0]);return!1===isNaN(s)?r(new Date(s)):n.toDate(i[0])}return 0===i.length?new Date:void 0}))},e.datediff=function(e,r){return t(e,r,(function(e,t,r){n.pcCheck(r,2,3);var i=n.toDateM(r[0]),a=n.toDateM(r[1]);if(null===i||null===a)return NaN;switch(n.toString(r[2]).toLowerCase()){case"days":case"day":case"d":return i.diff(a,"days",!0);case"months":case"month":return i.diff(a,"months",!0);case"minutes":case"minute":case"m":return"M"===r[2]?i.diff(a,"months",!0):i.diff(a,"minutes",!0);case"seconds":case"second":case"s":return i.diff(a,"seconds",!0);case"milliseconds":case"millisecond":case"ms":return i.diff(a);case"hours":case"hour":case"h":return i.diff(a,"hours",!0);case"years":case"year":case"y":return i.diff(a,"years",!0);default:return i.diff(a)}}))},e.dateadd=function(e,r){return t(e,r,(function(e,t,r){n.pcCheck(r,2,3);var i=n.toDateM(r[0]);if(null===i)return null;var a="milliseconds";switch(n.toString(r[2]).toLowerCase()){case"days":case"day":case"d":a="days";break;case"months":case"month":a="months";break;case"minutes":case"minute":case"m":a="M"===r[2]?"months":"minutes";break;case"seconds":case"second":case"s":a="seconds";break;case"milliseconds":case"millisecond":case"ms":a="milliseconds";break;case"hours":case"hour":case"h":a="hours";break;case"years":case"year":case"y":a="years"}return i.add(n.toNumber(r[1]),a),i.toDate()}))}}}.apply(null,r))||(e.exports=i)},1299:function(e,t,n){var r,i;r=[n.dj.c(e.i),t,n(1108),n(1134),n(1163),n(1077),n(36),n(60),n(200),n(44),n(134),n(135),n(1300),n(19),n(203)],void 0===(i=function(e,t,n,r,i,a,o,s,u,l,c,f,p,m,h){Object.defineProperty(t,"__esModule",{value:!0}),t.registerFunctions=function(e,t){e.ringisclockwise=function(e,n){return t(e,n,(function(e,t,n){a.pcCheck(n,1,1);var r=[],o=!1,s=!1;if(null===n[0])return!1;if(a.isArray(n[0])){for(var u=0,c=n[0];u<c.length;u++){if(!((m=c[u])instanceof l))throw new Error("Invalid Argument");r.push(m.hasZ?m.hasM?[m.x,m.y,m.z,m.m]:[m.x,m.y,m.z]:[m.x,m.y])}r.length>0&&(o=n[0][0].hasZ,s=n[0][0].hasM)}else if(n[0]instanceof i)(r=n[0]._elements).length>0&&(o=n[0]._hasZ,s=n[0]._hasM);else{if(!a.isImmutableArray(n[0]))throw new Error("Invalid Argument");for(var f=0,p=n[0].toArray();f<p.length;f++){var m;if(!((m=p[f])instanceof l))throw new Error("Invalid Argument");r.push(m.hasZ?m.hasM?[m.x,m.y,m.z,m.m]:[m.x,m.y,m.z]:[m.x,m.y])}r.length>0&&(o=n[0].get(0).hasZ,s=n[0].get(0).hasM)}return!(r.length<3)&&h.isClockwise(r,s,o)}))},e.polygon=function(e,i){return t(e,i,(function(t,i,o){a.pcCheck(o,1,1);var s=null;if(o[0]instanceof n){if((s=a.fixSpatialReference(r.parseGeometryFromDictionary(o[0]),e.spatialReference))instanceof c==0)throw new Error("Illegal Parameter")}else s=o[0]instanceof c?m.fromJSON(o[0].toJSON()):a.fixSpatialReference(new c(JSON.parse(o[0])),e.spatialReference);if(null!==s&&!1===s.spatialReference.equals(e.spatialReference))throw new Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return a.fixNullGeometry(s)}))},e.polyline=function(e,i){return t(e,i,(function(t,i,o){a.pcCheck(o,1,1);var s=null;if(o[0]instanceof n){if((s=a.fixSpatialReference(r.parseGeometryFromDictionary(o[0]),e.spatialReference))instanceof f==0)throw new Error("Illegal Parameter")}else s=o[0]instanceof f?m.fromJSON(o[0].toJSON()):a.fixSpatialReference(new f(JSON.parse(o[0])),e.spatialReference);if(null!==s&&!1===s.spatialReference.equals(e.spatialReference))throw new Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return a.fixNullGeometry(s)}))},e.point=function(e,i){return t(e,i,(function(t,i,o){a.pcCheck(o,1,1);var s=null;if(o[0]instanceof n){if((s=a.fixSpatialReference(r.parseGeometryFromDictionary(o[0]),e.spatialReference))instanceof l==0)throw new Error("Illegal Parameter")}else s=o[0]instanceof l?m.fromJSON(o[0].toJSON()):a.fixSpatialReference(new l(JSON.parse(o[0])),e.spatialReference);if(null!==s&&!1===s.spatialReference.equals(e.spatialReference))throw new Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return a.fixNullGeometry(s)}))},e.multipoint=function(e,i){return t(e,i,(function(t,i,o){a.pcCheck(o,1,1);var s=null;if(o[0]instanceof n){if((s=a.fixSpatialReference(r.parseGeometryFromDictionary(o[0]),e.spatialReference))instanceof u==0)throw new Error("Illegal Parameter")}else s=o[0]instanceof u?m.fromJSON(o[0].toJSON()):a.fixSpatialReference(new u(JSON.parse(o[0])),e.spatialReference);if(null!==s&&!1===s.spatialReference.equals(e.spatialReference))throw new Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return a.fixNullGeometry(s)}))},e.extent=function(e,i){return t(e,i,(function(t,i,s){s=a.autoCastFeatureToGeometry(s),a.pcCheck(s,1,1);var p=null;if(s[0]instanceof n)p=a.fixSpatialReference(r.parseGeometryFromDictionary(s[0]),e.spatialReference);else if(s[0]instanceof l){var h={xmin:s[0].x,ymin:s[0].y,xmax:s[0].x,ymax:s[0].y,spatialReference:s[0].spatialReference.toJSON()};s[0].hasZ?(h.zmin=s[0].z,h.zmax=s[0].z):s[0].hasM&&(h.mmin=s[0].m,h.mmax=s[0].m),p=m.fromJSON(h)}else p=s[0]instanceof c||s[0]instanceof f||s[0]instanceof u?m.fromJSON(s[0].extent.toJSON()):s[0]instanceof o?m.fromJSON(s[0].toJSON()):a.fixSpatialReference(new o(JSON.parse(s[0])),e.spatialReference);if(null!==p&&!1===p.spatialReference.equals(e.spatialReference))throw new Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return a.fixNullGeometry(p)}))},e.geometry=function(e,i){return t(e,i,(function(t,i,o){a.pcCheck(o,1,1);var s=null;if(null!==(s=o[0]instanceof r?a.fixSpatialReference(o[0].geometry(),e.spatialReference):o[0]instanceof n?a.fixSpatialReference(r.parseGeometryFromDictionary(o[0]),e.spatialReference):a.fixSpatialReference(m.fromJSON(JSON.parse(o[0])),e.spatialReference))&&!1===s.spatialReference.equals(e.spatialReference))throw new Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return a.fixNullGeometry(s)}))},e.setgeometry=function(e,n){return t(e,n,(function(e,t,n){if(a.pcCheck(n,2,2),!(n[0]instanceof r))throw new Error("Illegal Argument");if(!0===n[0].immutable)throw new Error("Feature is Immutable");if(!(n[1]instanceof s||null===n[1]))throw new Error("Illegal Argument");return n[0]._geometry=n[1],a.voidOperation}))},e.feature=function(e,i){return t(e,i,(function(t,i,o){if(0===o.length)throw new Error("Missing Parameters");var u=null;if(1===o.length)if(a.isString(o[0]))u=r.fromJson(JSON.parse(o[0]));else if(o[0]instanceof r)u=r.createFromArcadeFeature(o[0]);else if(o[0]instanceof s)u=r.createFromGraphicLikeObject(o[0],null,null);else{if(!(o[0]instanceof n))throw new Error("Illegal Argument");var l=o[0].hasField("geometry")?o[0].field("geometry"):null,c=o[0].hasField("attributes")?o[0].field("attributes"):null;null!==l&&l instanceof n&&(l=r.parseGeometryFromDictionary(l)),null!==c&&(c=r.parseAttributesFromDictionary(c)),u=r.createFromGraphicLikeObject(l,c,null)}else if(2===o.length){if(l=null,c=null,null!==o[0])if(o[0]instanceof s)l=o[0];else{if(!(l instanceof n))throw new Error("Illegal Argument");l=r.parseGeometryFromDictionary(o[0])}if(null!==o[1]){if(!(o[1]instanceof n))throw new Error("Illegal Argument");c=r.parseAttributesFromDictionary(o[1])}u=r.createFromGraphicLikeObject(l,c,null)}else{if(l=null,c={},null!==o[0])if(o[0]instanceof s)l=o[0];else{if(!(l instanceof n))throw new Error("Illegal Argument");l=r.parseGeometryFromDictionary(o[0])}for(var f=1;f<o.length;f+=2){var p=a.toString(o[f]),m=o[f+1];if(!(null==m||a.isString(m)||isNaN(m)||a.isDate(m)||a.isNumber(m)||a.isBoolean(m)))throw new Error("Illegal Argument");if(a.isFunctionParameter(m)||!1===a.isSimpleType(m))throw new Error("Illegal Argument");m===a.voidOperation?c[p]=null:c[p]=m}u=r.createFromGraphicLikeObject(l,c,null)}return u._geometry=a.fixSpatialReference(u.geometry(),e.spatialReference),u.immutable=!1,u}))},e.dictionary=function(e,r){return t(e,r,(function(e,t,r){if(0===r.length){var i=new n;return i.immutable=!1,i}if(1===r.length&&a.isString(r[0]))try{var o=JSON.parse(r[0]),s=n.convertObjectToArcadeDictionary(o);return s.immutable=!1,s}catch(e){throw new Error("Missing Parameters or Illegal Json")}if(r.length%2!=0)throw new Error("Missing Parameters");for(var u={},l=0;l<r.length;l+=2){var c=a.toString(r[l]),f=r[l+1];if(!(null==f||a.isString(f)||isNaN(f)||a.isDate(f)||a.isNumber(f)||a.isBoolean(f)||a.isArray(f)||a.isImmutableArray(f)))throw new Error("Illegal Argument");if(a.isFunctionParameter(f))throw new Error("Illegal Argument");f===a.voidOperation?u[c]=null:u[c]=f}var p=new n(u);return p.immutable=!1,p}))},e.haskey=function(e,i){return t(e,i,(function(e,t,i){a.pcCheck(i,2,2);var o=a.toString(i[1]);if(i[0]instanceof r)return i[0].hasField(o);if(i[0]instanceof n)return i[0].hasField(o);throw new Error("Illegal Argument")}))},e.indexof=function(e,n){return t(e,n,(function(e,t,n){a.pcCheck(n,2,2);var r=n[1];if(a.isArray(n[0])){for(var i=0;i<n[0].length;i++)if(a.equalityTest(r,n[0][i]))return i;return-1}if(a.isImmutableArray(n[0])){var o=n[0].length();for(i=0;i<o;i++)if(a.equalityTest(r,n[0].get(i)))return i;return-1}throw new Error("Illegal Argument")}))},e.angle=function(e,n){return t(e,n,(function(e,t,n){if(n=a.autoCastFeatureToGeometry(n),a.pcCheck(n,2,3),!(n[0]instanceof l))throw new Error("Illegal Argument");if(!(n[1]instanceof l))throw new Error("Illegal Argument");if(n.length>2&&!(n[2]instanceof l))throw new Error("Illegal Argument");return 2===n.length?p.angle2D(n[0],n[1]):p.angleBetween2D(n[0],n[1],n[2])}))},e.bearing=function(e,n){return t(e,n,(function(e,t,n){if(n=a.autoCastFeatureToGeometry(n),a.pcCheck(n,2,3),!(n[0]instanceof l))throw new Error("Illegal Argument");if(!(n[1]instanceof l))throw new Error("Illegal Argument");if(n.length>2&&!(n[2]instanceof l))throw new Error("Illegal Argument");return 2===n.length?p.bearing2D(n[0],n[1]):p.bearingBetween2D(n[0],n[1],n[2])}))},e.isselfintersecting=function(e,n){return t(e,n,(function(t,n,r){r=a.autoCastFeatureToGeometry(r),a.pcCheck(r,1,1);var i=r[0];if(i instanceof c)return i.isSelfIntersecting;if(i instanceof f)return i=i.paths,p.pathsSelfIntersecting(i);if(i instanceof u)for(var o=i.points,s=0;s<o.length;s++)for(var l=0;l<o.length;l++)if(l!==s){for(var m=!0,h=0;h<o[s].length;h++)if(o[s][h]!==o[l][h]){m=!1;break}if(!0===m)return!0}return!(!a.isArray(i)&&!a.isImmutableArray(i))&&(null!==(i=a.autoCastArrayOfPointsToPolyline(i,e.spatialReference))&&(i=i.paths),p.pathsSelfIntersecting(i))}))}}}.apply(null,r))||(e.exports=i)},1300:function(e,t,n){var r,i;r=[n.dj.c(e.i),t,n(44),n(207)],void 0===(i=function(e,t,n,r){function i(e,t,n){var r={x:0,y:0};t&&(r.z=0),n&&(r.m=0);for(var i=0,o=e[0],l=0;l<e.length;l++){var c=e[l];if(!1===u(c,o)){var f=s(o,c,t),p=a(o,c,t,n);p.x*=f,p.y*=f,r.x+=p.x,r.y+=p.y,t&&(p.z*=f,r.z+=p.z),n&&(p.m*=f,r.m+=p.m),i+=f,o=c}}return i>0?(r.x/=i,r.y/=i,t&&(r.z/=i),n&&(r.m/=i)):(r.x=e[0][0],r.y=e[0][1],t&&(r.z=e[0][2]),n&&t?r.m=e[0][3]:n&&(r.m=e[0][2])),r}function a(e,t,n,r){var i={x:(e[0]+t[0])/2,y:(e[1]+t[1])/2};return n&&(i.z=(e[2]+t[2])/2),n&&r?i.m=(e[3]+t[3])/2:r&&(i.m=(e[2]+t[2])/2),i}function o(e,t){if(e.length<=1)return 0;for(var n=0,r=1;r<e.length;r++)n+=s(e[r-1],e[r],t);return n}function s(e,t,n){var r=t[0]-e[0],i=t[1]-e[1];if(n){var a=t[2]-t[2];return Math.sqrt(r*r+i*i+a*a)}return Math.sqrt(r*r+i*i)}function u(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function l(e,t,n){for(void 0===n&&(n=0);e<n;)e+=t;for(var r=n+t;e>=r;)e-=t;return e}function c(e,t){return Math.atan2(t.y-e.y,t.x-e.x)}function f(e,t,n){var r,i,a={x:e.x-t.x,y:e.y-t.y},o={x:n.x-t.x,y:n.y-t.y};return Math.atan2((r=o).x*(i=a).y-i.x*r.y,function(e,t){return e.x*t.x+e.y*t.y}(o,a))}Object.defineProperty(t,"__esModule",{value:!0}),t.centroidPolyline=function(e){for(var t={x:0,y:0,spatialReference:e.spatialReference.toJSON()},r={x:0,y:0,spatialReference:e.spatialReference.toJSON()},a=0,s=0,u=0;u<e.paths.length;u++)if(0!==e.paths[u].length){var l=o(e.paths[u],!0===e.hasZ);if(0===l){var c=i(e.paths[u],!0===e.hasZ,!0===e.hasM);t.x+=c.x,t.y+=c.y,!0===e.hasZ&&(t.z+=c.z),!0===e.hasM&&(t.m+=c.m),++a}else c=i(e.paths[u],!0===e.hasZ,!0===e.hasM),r.x+=c.x*l,r.y+=c.y*l,!0===e.hasZ&&(r.z+=c.z*l),!0===e.hasM&&(r.m+=c.m*l),s+=l}return s>0?(r.x/=s,r.y/=s,!0===e.hasZ&&(r.z/=s),!0===e.hasM&&(r.m/=s),new n(r)):a>0?(t.x/=a,t.y/=a,!0===e.hasZ&&(r.z/=a),!0===e.hasM&&(t.m/=a),new n(t)):null},t.centroidMultiPoint=function(e){if(0===e.points.length)return null;for(var t=0,r=0,i=0,a=0,o=0;o<e.points.length;o++){var s=e.getPoint(o);!0===s.hasZ&&(i+=s.z),!0===s.hasM&&(a+=s.m),t+=s.x,r+=s.y,a+=s.m}var u={x:t/e.points.length,y:r/e.points.length,spatialReference:null};return u.spatialReference=e.spatialReference.toJSON(),!0===e.hasZ&&(u.z=i/e.points.length),!0===e.hasM&&(u.m=a/e.points.length),new n(u)},t.angleRad=c,t.angle2D=function(e,t){return l(c(e,t),2*Math.PI)*(180/Math.PI)},t.bearing2D=function(e,t){return l(Math.PI/2-c(e,t),2*Math.PI)*(180/Math.PI)},t.angleBetweenRad=f,t.angleBetween2D=function(e,t,n){return l(f(e,t,n),2*Math.PI)*(180/Math.PI)},t.bearingBetween2D=function(e,t,n){return l(-1*f(e,t,n),2*Math.PI)*(180/Math.PI)};var p=[0,0];t.pathsSelfIntersecting=function(e){for(var t=0;t<e.length;t++){for(var n=e[t],i=0;i<n.length-1;i++)for(var a=n[i],o=n[i+1],s=t+1;s<e.length;s++)for(var u=0;u<e[s].length-1;u++){var l=e[s][u],c=e[s][u+1];if(r.segmentIntersects(a,o,l,c,p)&&!(p[0]===a[0]&&p[1]===a[1]||p[0]===l[0]&&p[1]===l[1]||p[0]===o[0]&&p[1]===o[1]||p[0]===c[0]&&p[1]===c[1]))return!0}var f=n.length;if(!(f<3))for(i=0;i<=f-2;i++)for(a=n[i],o=n[i+1],s=i+2;s<=f-2;s++)if(l=n[s],c=n[s+1],r.segmentIntersects(a,o,l,c,p)&&!(p[0]===a[0]&&p[1]===a[1]||p[0]===l[0]&&p[1]===l[1]||p[0]===o[0]&&p[1]===o[1]||p[0]===c[0]&&p[1]===c[1]))return!0}return!1}}.apply(null,r))||(e.exports=i)},1301:function(e,t,n){var r,i;r=[n.dj.c(e.i),t,n(105),n(1231),n(1077),n(1300),n(36),n(60),n(200),n(44),n(134),n(135),n(19)],void 0===(i=function(e,t,n,r,i,a,o,s,u,l,c,f,p){Object.defineProperty(t,"__esModule",{value:!0});var m=null;function h(e){return 0===n.version.indexOf("4.")?c.fromExtent(e):new c({spatialReference:e.spatialReference,rings:[[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]]]})}t.setGeometryEngine=function(e){m=e},t.registerFunctions=function(e,t){function n(e){if(i.pcCheck(e,2,2),e[0]instanceof s&&e[1]instanceof s);else if(e[0]instanceof s&&null===e[1]);else if(e[1]instanceof s&&null===e[0]);else if(null!==e[0]||null!==e[1])throw new Error("Illegal Argument")}e.disjoint=function(e,r){return t(e,r,(function(e,t,r){return n(r=i.autoCastFeatureToGeometry(r)),null===r[0]||null===r[1]||m.disjoint(r[0],r[1])}))},e.intersects=function(e,r){return t(e,r,(function(e,t,r){return n(r=i.autoCastFeatureToGeometry(r)),null!==r[0]&&null!==r[1]&&m.intersects(r[0],r[1])}))},e.touches=function(e,r){return t(e,r,(function(e,t,r){return n(r=i.autoCastFeatureToGeometry(r)),null!==r[0]&&null!==r[1]&&m.touches(r[0],r[1])}))},e.crosses=function(e,r){return t(e,r,(function(e,t,r){return n(r=i.autoCastFeatureToGeometry(r)),null!==r[0]&&null!==r[1]&&m.crosses(r[0],r[1])}))},e.within=function(e,r){return t(e,r,(function(e,t,r){return n(r=i.autoCastFeatureToGeometry(r)),null!==r[0]&&null!==r[1]&&m.within(r[0],r[1])}))},e.contains=function(e,r){return t(e,r,(function(e,t,r){return n(r=i.autoCastFeatureToGeometry(r)),null!==r[0]&&null!==r[1]&&m.contains(r[0],r[1])}))},e.overlaps=function(e,r){return t(e,r,(function(e,t,r){return n(r=i.autoCastFeatureToGeometry(r)),null!==r[0]&&null!==r[1]&&m.overlaps(r[0],r[1])}))},e.equals=function(e,n){return t(e,n,(function(e,t,n){return i.pcCheck(n,2,2),n[0]===n[1]||(n[0]instanceof s&&n[1]instanceof s?m.equals(n[0],n[1]):!(!i.isDate(n[0])||!i.isDate(n[1]))&&n[0].getTime()===n[1].getTime())}))},e.relate=function(e,n){return t(e,n,(function(e,t,n){if(n=i.autoCastFeatureToGeometry(n),i.pcCheck(n,3,3),n[0]instanceof s&&n[1]instanceof s)return m.relate(n[0],n[1],i.toString(n[2]));if(n[0]instanceof s&&null===n[1])return!1;if(n[1]instanceof s&&null===n[0])return!1;if(null===n[0]&&null===n[1])return!1;throw new Error("Illegal Argument")}))},e.intersection=function(e,r){return t(e,r,(function(e,t,r){return n(r=i.autoCastFeatureToGeometry(r)),null===r[0]||null===r[1]?null:m.intersect(r[0],r[1])}))},e.union=function(e,n){return t(e,n,(function(t,n,a){var o=[];if(0===(a=i.autoCastFeatureToGeometry(a)).length)throw new Error("Function called with wrong number of Parameters");if(1===a.length)if(i.isArray(a[0])){for(var u=i.autoCastFeatureToGeometry(a[0]),l=0;l<u.length;l++)if(null!==u[l]){if(!(u[l]instanceof s))throw new Error("Illegal Argument");o.push(u[l])}}else{if(!i.isImmutableArray(a[0])){if(a[0]instanceof s)return i.fixSpatialReference(r.cloneGeometry(a[0]),e.spatialReference);if(null===a[0])return null;throw new Error("Illegal Argument")}var c=i.autoCastFeatureToGeometry(a[0].toArray());for(l=0;l<c.length;l++)if(null!==c[l]){if(!(c[l]instanceof s))throw new Error("Illegal Argument");o.push(c[l])}}else for(l=0;l<a.length;l++)if(null!==a[l]){if(!(a[l]instanceof s))throw new Error("Illegal Argument");o.push(a[l])}return 0===o.length?null:m.union(o)}))},e.difference=function(e,a){return t(e,a,(function(e,t,a){return n(a=i.autoCastFeatureToGeometry(a)),null!==a[0]&&null===a[1]?r.cloneGeometry(a[0]):null===a[0]?null:m.difference(a[0],a[1])}))},e.symmetricdifference=function(e,a){return t(e,a,(function(e,t,a){return n(a=i.autoCastFeatureToGeometry(a)),null===a[0]&&null===a[1]?null:null===a[0]?r.cloneGeometry(a[1]):null===a[1]?r.cloneGeometry(a[0]):m.symmetricDifference(a[0],a[1])}))},e.clip=function(e,n){return t(e,n,(function(e,t,n){if(n=i.autoCastFeatureToGeometry(n),i.pcCheck(n,2,2),!(n[1]instanceof o)&&null!==n[1])throw new Error("Illegal Argument");if(null===n[0])return null;if(!(n[0]instanceof s))throw new Error("Illegal Argument");return null===n[1]?null:m.clip(n[0],n[1])}))},e.cut=function(e,n){return t(e,n,(function(e,t,n){if(n=i.autoCastFeatureToGeometry(n),i.pcCheck(n,2,2),!(n[1]instanceof f)&&null!==n[1])throw new Error("Illegal Argument");if(null===n[0])return[];if(!(n[0]instanceof s))throw new Error("Illegal Argument");return null===n[1]?[r.cloneGeometry(n[0])]:m.cut(n[0],n[1])}))},e.area=function(e,n){return t(e,n,(function(t,n,a){if(i.pcCheck(a,1,2),null===(a=i.autoCastFeatureToGeometry(a))[0])return 0;if(i.isArray(a[0])||i.isImmutableArray(a[0])){var o=i.autoCastArrayOfPointsToPolygon(a[0],e.spatialReference);return null===o?0:m.planarArea(o,r.convertSquareUnitsToCode(i.defaultUndefined(a[1],-1)))}if(!(a[0]instanceof s))throw new Error("Illegal Argument");return m.planarArea(a[0],r.convertSquareUnitsToCode(i.defaultUndefined(a[1],-1)))}))},e.areageodetic=function(e,n){return t(e,n,(function(t,n,a){if(i.pcCheck(a,1,2),null===(a=i.autoCastFeatureToGeometry(a))[0])return 0;if(i.isArray(a[0])||i.isImmutableArray(a[0])){var o=i.autoCastArrayOfPointsToPolygon(a[0],e.spatialReference);return null===o?0:m.geodesicArea(o,r.convertSquareUnitsToCode(i.defaultUndefined(a[1],-1)))}if(!(a[0]instanceof s))throw new Error("Illegal Argument");return m.geodesicArea(a[0],r.convertSquareUnitsToCode(i.defaultUndefined(a[1],-1)))}))},e.length=function(e,n){return t(e,n,(function(t,n,a){if(i.pcCheck(a,1,2),null===(a=i.autoCastFeatureToGeometry(a))[0])return 0;if(i.isArray(a[0])||i.isImmutableArray(a[0])){var o=i.autoCastArrayOfPointsToPolyline(a[0],e.spatialReference);return null===o?0:m.planarLength(o,r.convertLinearUnitsToCode(i.defaultUndefined(a[1],-1)))}if(!(a[0]instanceof s))throw new Error("Illegal Argument");return m.planarLength(a[0],r.convertLinearUnitsToCode(i.defaultUndefined(a[1],-1)))}))},e.lengthgeodetic=function(e,n){return t(e,n,(function(t,n,a){if(i.pcCheck(a,1,2),null===(a=i.autoCastFeatureToGeometry(a))[0])return 0;if(i.isArray(a[0])||i.isImmutableArray(a[0])){var o=i.autoCastArrayOfPointsToPolyline(a[0],e.spatialReference);return null===o?0:m.geodesicLength(o,r.convertLinearUnitsToCode(i.defaultUndefined(a[1],-1)))}if(!(a[0]instanceof s))throw new Error("Illegal Argument");return m.geodesicLength(a[0],r.convertLinearUnitsToCode(i.defaultUndefined(a[1],-1)))}))},e.distance=function(e,n){return t(e,n,(function(t,n,a){a=i.autoCastFeatureToGeometry(a),i.pcCheck(a,2,3);var o=a[0];(i.isArray(a[0])||i.isImmutableArray(a[0]))&&(o=i.autoCastArrayOfPointsToMultiPoint(a[0],e.spatialReference));var u=a[1];if((i.isArray(a[1])||i.isImmutableArray(a[1]))&&(u=i.autoCastArrayOfPointsToMultiPoint(a[1],e.spatialReference)),!(o instanceof s))throw new Error("Illegal Argument");if(!(u instanceof s))throw new Error("Illegal Argument");return m.distance(o,u,r.convertLinearUnitsToCode(i.defaultUndefined(a[2],-1)))}))},e.distancegeodetic=function(e,n){return t(e,n,(function(e,t,n){n=i.autoCastFeatureToGeometry(n),i.pcCheck(n,2,3);var a=n[0],o=n[1];if(!(a instanceof l))throw new Error("Illegal Argument");if(!(o instanceof l))throw new Error("Illegal Argument");var s=new f({paths:[],spatialReference:a.spatialReference});return s.addPath([a,o]),m.geodesicLength(s,r.convertLinearUnitsToCode(i.defaultUndefined(n[2],-1)))}))},e.densify=function(e,n){return t(e,n,(function(e,t,n){if(n=i.autoCastFeatureToGeometry(n),i.pcCheck(n,2,3),null===n[0])return null;if(!(n[0]instanceof s))throw new Error("Illegal Argument");var a=i.toNumber(n[1]);if(isNaN(a))throw new Error("Illegal Argument");if(a<=0)throw new Error("Illegal Argument");return n[0]instanceof c||n[0]instanceof f?m.densify(n[0],a,r.convertLinearUnitsToCode(i.defaultUndefined(n[2],-1))):n[0]instanceof o?m.densify(h(n[0]),a,r.convertLinearUnitsToCode(i.defaultUndefined(n[2],-1))):n[0]}))},e.densifygeodetic=function(e,n){return t(e,n,(function(e,t,n){if(n=i.autoCastFeatureToGeometry(n),i.pcCheck(n,2,3),null===n[0])return null;if(!(n[0]instanceof s))throw new Error("Illegal Argument");var a=i.toNumber(n[1]);if(isNaN(a))throw new Error("Illegal Argument");if(a<=0)throw new Error("Illegal Argument");return n[0]instanceof c||n[0]instanceof f?m.geodesicDensify(n[0],a,r.convertLinearUnitsToCode(i.defaultUndefined(n[2],-1))):n[0]instanceof o?m.geodesicDensify(h(n[0]),a,r.convertLinearUnitsToCode(i.defaultUndefined(n[2],-1))):n[0]}))},e.generalize=function(e,n){return t(e,n,(function(e,t,n){if(n=i.autoCastFeatureToGeometry(n),i.pcCheck(n,2,4),null===n[0])return null;if(!(n[0]instanceof s))throw new Error("Illegal Argument");var a=i.toNumber(n[1]);if(isNaN(a))throw new Error("Illegal Argument");return m.generalize(n[0],a,i.toBoolean(i.defaultUndefined(n[2],!0)),r.convertLinearUnitsToCode(i.defaultUndefined(n[3],-1)))}))},e.buffer=function(e,n){return t(e,n,(function(e,t,n){if(n=i.autoCastFeatureToGeometry(n),i.pcCheck(n,2,3),null===n[0])return null;if(!(n[0]instanceof s))throw new Error("Illegal Argument");var a=i.toNumber(n[1]);if(isNaN(a))throw new Error("Illegal Argument");return 0===a?r.cloneGeometry(n[0]):m.buffer(n[0],a,r.convertLinearUnitsToCode(i.defaultUndefined(n[2],-1)))}))},e.buffergeodetic=function(e,n){return t(e,n,(function(e,t,n){if(n=i.autoCastFeatureToGeometry(n),i.pcCheck(n,2,3),null===n[0])return null;if(!(n[0]instanceof s))throw new Error("Illegal Argument");var a=i.toNumber(n[1]);if(isNaN(a))throw new Error("Illegal Argument");return 0===a?r.cloneGeometry(n[0]):m.geodesicBuffer(n[0],a,r.convertLinearUnitsToCode(i.defaultUndefined(n[2],-1)))}))},e.offset=function(e,n){return t(e,n,(function(e,t,n){if(n=i.autoCastFeatureToGeometry(n),i.pcCheck(n,2,6),null===n[0])return null;if(!(n[0]instanceof c||n[0]instanceof f))throw new Error("Illegal Argument");var a=i.toNumber(n[1]);if(isNaN(a))throw new Error("Illegal Argument");var o=i.toNumber(i.defaultUndefined(n[4],10));if(isNaN(o))throw new Error("Illegal Argument");var s=i.toNumber(i.defaultUndefined(n[5],0));if(isNaN(s))throw new Error("Illegal Argument");return m.offset(n[0],a,r.convertLinearUnitsToCode(i.defaultUndefined(n[2],-1)),i.toString(i.defaultUndefined(n[3],"round")).toLowerCase(),o,s)}))},e.rotate=function(e,n){return t(e,n,(function(e,t,n){n=i.autoCastFeatureToGeometry(n),i.pcCheck(n,2,3);var r=n[0];if(null===r)return null;if(!(r instanceof s))throw new Error("Illegal Argument");r instanceof o&&(r=c.fromExtent(r));var a=i.toNumber(n[1]);if(isNaN(a))throw new Error("Illegal Argument");var u=i.defaultUndefined(n[2],null);if(null===u)return m.rotate(r,a);if(u instanceof l)return m.rotate(r,a,u);throw new Error("Illegal Argument")}))},e.centroid=function(e,n){return t(e,n,(function(t,n,p){if(p=i.autoCastFeatureToGeometry(p),i.pcCheck(p,1,1),null===p[0])return null;var m=p[0];if((i.isArray(p[0])||i.isImmutableArray(p[0]))&&(m=i.autoCastArrayOfPointsToMultiPoint(p[0],e.spatialReference)),null===m)return null;if(!(m instanceof s))throw new Error("Illegal Argument");return m instanceof l?i.fixSpatialReference(r.cloneGeometry(p[0]),e.spatialReference):m instanceof c?m.centroid:m instanceof f?a.centroidPolyline(m):m instanceof u?a.centroidMultiPoint(m):m instanceof o?m.center:null}))},e.multiparttosinglepart=function(e,n){return t(e,n,(function(t,n,a){a=i.autoCastFeatureToGeometry(a),i.pcCheck(a,1,1);var h=[];if(null===a[0])return null;if(!(a[0]instanceof s))throw new Error("Illegal Argument");if(a[0]instanceof l)return[i.fixSpatialReference(r.cloneGeometry(a[0]),e.spatialReference)];if(a[0]instanceof o)return[i.fixSpatialReference(r.cloneGeometry(a[0]),e.spatialReference)];var d=m.simplify(a[0]);if(d instanceof c){for(var g=[],y=[],v=0;v<d.rings.length;v++)if(d.isClockwise(d.rings[v])){var b=p.fromJSON({rings:[d.rings[v]],hasZ:!0===d.hasZ,hasM:!0===d.hasM,spatialReference:d.spatialReference.toJSON()});g.push(b)}else y.push({ring:d.rings[v],pt:d.getPoint(v,0)});for(var S=0;S<y.length;S++)for(var w=0;w<g.length;w++)if(g[w].contains(y[S].pt)){g[w].addRing(y[S].ring);break}return g}if(d instanceof f){var N=[];for(v=0;v<d.paths.length;v++){var E=p.fromJSON({paths:[d.paths[v]],hasZ:!0===d.hasZ,hasM:!0===d.hasM,spatialReference:d.spatialReference.toJSON()});N.push(E)}return N}if(a[0]instanceof u){var x=i.fixSpatialReference(r.cloneGeometry(a[0]),e.spatialReference);for(v=0;v<x.points.length;v++)h.push(x.getPoint(v));return h}return null}))},e.issimple=function(e,n){return t(e,n,(function(e,t,n){if(n=i.autoCastFeatureToGeometry(n),i.pcCheck(n,1,1),null===n[0])return!0;if(!(n[0]instanceof s))throw new Error("Illegal Argument");return m.isSimple(n[0])}))},e.simplify=function(e,n){return t(e,n,(function(e,t,n){if(n=i.autoCastFeatureToGeometry(n),i.pcCheck(n,1,1),null===n[0])return null;if(!(n[0]instanceof s))throw new Error("Illegal Argument");return m.simplify(n[0])}))}}}.apply(null,r))||(e.exports=i)},1302:function(e,t,n){var r,i;r=[n.dj.c(e.i),t,n(1077),n(1217)],void 0===(i=function(e,t,n,r){function i(e,t,n){return void 0===n||0==+n?Math[e](t):(t=+t,n=+n,isNaN(t)||"number"!=typeof n||n%1!=0?NaN:(t=t.toString().split("e"),+((t=(t=Math[e](+(t[0]+"e"+(t[1]?+t[1]-n:-n)))).toString().split("e"))[0]+"e"+(t[1]?+t[1]+n:n))))}Object.defineProperty(t,"__esModule",{value:!0}),t.registerFunctions=function(e,t){function a(e,t,r){var i=n.toNumber(e);return isNaN(i)?i:isNaN(t)||isNaN(r)||t>r?NaN:i<t?t:i>r?r:i}e.number=function(e,i){return t(e,i,(function(e,t,i){n.pcCheck(i,1,2);var a=i[0];if(n.isNumber(a))return a;if(null===a)return 0;if(n.isDate(a))return Number(a);if(n.isBoolean(a))return Number(a);if(n.isArray(a))return NaN;if(""===a)return Number(a);if(void 0===a)return Number(a);if(n.isString(a)){if(void 0!==i[1]){var o=n.multiReplace(i[1],"‰","");return o=n.multiReplace(o,"¤",""),r.parse(a,{pattern:o})}return Number(a.trim())}return Number(a)}))},e.abs=function(e,r){return t(e,r,(function(e,t,r){return n.pcCheck(r,1,1),Math.abs(n.toNumber(r[0]))}))},e.acos=function(e,r){return t(e,r,(function(e,t,r){return n.pcCheck(r,1,1),Math.acos(n.toNumber(r[0]))}))},e.asin=function(e,r){return t(e,r,(function(e,t,r){return n.pcCheck(r,1,1),Math.asin(n.toNumber(r[0]))}))},e.atan=function(e,r){return t(e,r,(function(e,t,r){return n.pcCheck(r,1,1),Math.atan(n.toNumber(r[0]))}))},e.atan2=function(e,r){return t(e,r,(function(e,t,r){return n.pcCheck(r,2,2),Math.atan2(n.toNumber(r[0]),n.toNumber(r[1]))}))},e.ceil=function(e,r){return t(e,r,(function(e,t,r){if(n.pcCheck(r,1,2),2===r.length){var a=n.toNumber(r[1]);return isNaN(a)&&(a=0),i("ceil",n.toNumber(r[0]),-1*a)}return Math.ceil(n.toNumber(r[0]))}))},e.round=function(e,r){return t(e,r,(function(e,t,r){if(n.pcCheck(r,1,2),2===r.length){var a=n.toNumber(r[1]);return isNaN(a)&&(a=0),i("round",n.toNumber(r[0]),-1*a)}return Math.round(n.toNumber(r[0]))}))},e.floor=function(e,r){return t(e,r,(function(e,t,r){if(n.pcCheck(r,1,2),2===r.length){var a=n.toNumber(r[1]);return isNaN(a)&&(a=0),i("floor",n.toNumber(r[0]),-1*a)}return Math.floor(n.toNumber(r[0]))}))},e.cos=function(e,r){return t(e,r,(function(e,t,r){return n.pcCheck(r,1,1),Math.cos(n.toNumber(r[0]))}))},e.isnan=function(e,r){return t(e,r,(function(e,t,r){return n.pcCheck(r,1,1),"number"==typeof r[0]&&isNaN(r[0])}))},e.exp=function(e,r){return t(e,r,(function(e,t,r){return n.pcCheck(r,1,1),Math.exp(n.toNumber(r[0]))}))},e.log=function(e,r){return t(e,r,(function(e,t,r){return n.pcCheck(r,1,1),Math.log(n.toNumber(r[0]))}))},e.pow=function(e,r){return t(e,r,(function(e,t,r){return n.pcCheck(r,2,2),Math.pow(n.toNumber(r[0]),n.toNumber(r[1]))}))},e.random=function(e,r){return t(e,r,(function(e,t,r){return n.pcCheck(r,0,0),Math.random()}))},e.sin=function(e,r){return t(e,r,(function(e,t,r){return n.pcCheck(r,1,1),Math.sin(n.toNumber(r[0]))}))},e.sqrt=function(e,r){return t(e,r,(function(e,t,r){return n.pcCheck(r,1,1),Math.sqrt(n.toNumber(r[0]))}))},e.tan=function(e,r){return t(e,r,(function(e,t,r){return n.pcCheck(r,1,1),Math.tan(n.toNumber(r[0]))}))},e.defaultvalue=function(e,r){return t(e,r,(function(e,t,r){return n.pcCheck(r,2,2),null===r[0]||""===r[0]||void 0===r[0]?r[1]:r[0]}))},e.isempty=function(e,r){return t(e,r,(function(e,t,r){return n.pcCheck(r,1,1),null===r[0]||""===r[0]||void 0===r[0]}))},e.boolean=function(e,r){return t(e,r,(function(e,t,r){n.pcCheck(r,1,1);var i=r[0];return n.toBoolean(i)}))},e.constrain=function(e,r){return t(e,r,(function(e,t,r){n.pcCheck(r,3,3);var i=n.toNumber(r[1]),o=n.toNumber(r[2]);if(n.isArray(r[0])){for(var s=[],u=0,l=r[0];u<l.length;u++){var c=l[u];s.push(a(c,i,o))}return s}if(n.isImmutableArray(r[0])){s=[];for(var f=0;f<r[0].length();f++)s.push(a(r[0].get(f),i,o));return s}return a(r[0],i,o)}))}}}.apply(null,r))||(e.exports=i)},1303:function(e,t,n){var r,i;r=[n.dj.c(e.i),t,n(1077),n(1304)],void 0===(i=function(e,t,n,r){function i(e,t,i,a){if(1===a.length){if(n.isArray(a[0]))return r.calculateStat(e,a[0],-1);if(n.isImmutableArray(a[0]))return r.calculateStat(e,a[0].toArray(),-1)}return r.calculateStat(e,a,-1)}Object.defineProperty(t,"__esModule",{value:!0}),t.registerFunctions=function(e,t){e.stdev=function(e,n){return t(e,n,(function(e,t,n){return i("stdev",0,0,n)}))},e.variance=function(e,n){return t(e,n,(function(e,t,n){return i("variance",0,0,n)}))},e.average=function(e,n){return t(e,n,(function(e,t,n){return i("mean",0,0,n)}))},e.mean=function(e,n){return t(e,n,(function(e,t,n){return i("mean",0,0,n)}))},e.sum=function(e,n){return t(e,n,(function(e,t,n){return i("sum",0,0,n)}))},e.min=function(e,n){return t(e,n,(function(e,t,n){return i("min",0,0,n)}))},e.max=function(e,n){return t(e,n,(function(e,t,n){return i("max",0,0,n)}))},e.distinct=function(e,n){return t(e,n,(function(e,t,n){return i("distinct",0,0,n)}))},e.count=function(e,r){return t(e,r,(function(e,t,r){if(n.pcCheck(r,1,1),n.isArray(r[0])||n.isString(r[0]))return r[0].length;if(n.isImmutableArray(r[0]))return r[0].length();throw new Error("Invalid Parameters for Count")}))}}}.apply(null,r))||(e.exports=i)},1304:function(e,t,n){var r,i;r=[n.dj.c(e.i),t,n(1077)],void 0===(i=function(e,t,n){function r(e){for(var t=0,n=0;n<e.length;n++)t+=e[n];return t/e.length}function i(e){for(var t=r(e),n=0,i=0;i<e.length;i++)n+=Math.pow(t-e[i],2);return n/e.length}Object.defineProperty(t,"__esModule",{value:!0}),t.decodeStatType=function(e){switch(e.toLowerCase()){case"distinct":return"distinct";case"avg":case"mean":return"avg";case"min":return"min";case"sum":return"sum";case"max":return"max";case"stdev":case"stddev":return"stddev";case"var":case"variance":return"var";case"count":return"count"}return""},t.calculateStat=function(e,t,a){switch(void 0===a&&(a=1e3),e.toLowerCase()){case"distinct":return function(e,t){for(var r=[],i={},a=[],o=0;o<e.length;o++){if(void 0!==e[o]&&null!==e[o]&&e[o]!==n.voidOperation){var s=e[o];if(n.isNumber(s)||n.isString(s))void 0===i[s]&&(r.push(s),i[s]=1);else{for(var u=!1,l=0;l<a.length;l++)!0===n.equalityTest(a[l],s)&&(u=!0);!1===u&&(a.push(s),r.push(s))}}if(r.length>=t&&-1!==t)return r}return r}(t,a);case"avg":case"mean":return r(n.toNumberArray(t));case"min":return Math.min.apply(Math,n.toNumberArray(t));case"sum":return function(e){for(var t=0,n=0;n<e.length;n++)t+=e[n];return t}(n.toNumberArray(t));case"max":return Math.max.apply(Math,n.toNumberArray(t));case"stdev":case"stddev":return Math.sqrt(i(n.toNumberArray(t)));case"var":case"variance":return i(n.toNumberArray(t));case"count":return t.length}return 0}}.apply(null,r))||(e.exports=i)},1305:function(e,t,n){var r,i;r=[n.dj.c(e.i),t,n(1193),n(1108),n(1134),n(1077)],void 0===(i=function(e,t,n,r,i,a){Object.defineProperty(t,"__esModule",{value:!0}),t.registerFunctions=function(e,t){e.portal=function(e,r){return t(e,r,(function(e,t,r){return a.pcCheck(r,1,1),new n(a.toString(r[0]))}))},e.trim=function(e,n){return t(e,n,(function(e,t,n){return a.pcCheck(n,1,1),a.toString(n[0]).trim()}))},e.upper=function(e,n){return t(e,n,(function(e,t,n){return a.pcCheck(n,1,1),a.toString(n[0]).toUpperCase()}))},e.proper=function(e,n){return t(e,n,(function(e,t,n){a.pcCheck(n,1,2);var r=1;2===n.length&&"firstword"===a.toString(n[1]).toLowerCase()&&(r=2);for(var i=/\s/,o=a.toString(n[0]),s="",u=!0,l=0;l<o.length;l++){var c=o[l];i.test(c)?1===r&&(u=!0):c.toUpperCase()!==c.toLowerCase()&&(u?(c=c.toUpperCase(),u=!1):c=c.toLowerCase()),s+=c}return s}))},e.lower=function(e,n){return t(e,n,(function(e,t,n){return a.pcCheck(n,1,1),a.toString(n[0]).toLowerCase()}))},e.guid=function(e,n){return t(e,n,(function(e,t,n){if(a.pcCheck(n,0,1),n.length>0)switch(a.toString(n[0]).toLowerCase()){case"digits":return a.generateUUID().replace("-","").replace("-","").replace("-","").replace("-","");case"digits-hyphen":return a.generateUUID();case"digits-hyphen-braces":return"{"+a.generateUUID()+"}";case"digits-hyphen-parentheses":return"("+a.generateUUID()+")"}return"{"+a.generateUUID()+"}"}))},e.console=function(e,n){return t(e,n,(function(t,n,r){return 0===r.length||(1===r.length?e.console(a.toString(r[0])):e.console(a.toString(r))),a.voidOperation}))},e.mid=function(e,n){return t(e,n,(function(e,t,n){a.pcCheck(n,2,3);var r=a.toNumber(n[1]);if(isNaN(r))return"";if(r<0&&(r=0),2===n.length)return a.toString(n[0]).substr(r);var i=a.toNumber(n[2]);return isNaN(i)?"":(i<0&&(i=0),a.toString(n[0]).substr(r,i))}))},e.find=function(e,n){return t(e,n,(function(e,t,n){a.pcCheck(n,2,3);var r=0;if(n.length>2){if(r=a.toNumber(a.defaultUndefined(n[2],0)),isNaN(r))return-1;r<0&&(r=0)}return a.toString(n[1]).indexOf(a.toString(n[0]),r)}))},e.left=function(e,n){return t(e,n,(function(e,t,n){a.pcCheck(n,2,2);var r=a.toNumber(n[1]);return isNaN(r)?"":(r<0&&(r=0),a.toString(n[0]).substr(0,r))}))},e.right=function(e,n){return t(e,n,(function(e,t,n){a.pcCheck(n,2,2);var r=a.toNumber(n[1]);return isNaN(r)?"":(r<0&&(r=0),a.toString(n[0]).substr(-1*r,r))}))},e.split=function(e,n){return t(e,n,(function(e,t,n){var r;a.pcCheck(n,2,4);var i=a.toNumber(a.defaultUndefined(n[2],-1)),o=a.toBoolean(a.defaultUndefined(n[3],!1));if(-1===i||null===i||!0===o?r=a.toString(n[0]).split(a.toString(n[1])):(isNaN(i)&&(i=-1),i<-1&&(i=-1),r=a.toString(n[0]).split(a.toString(n[1]),i)),!1===o)return r;for(var s=[],u=0;u<r.length&&!(-1!==i&&s.length>=i);u++)""!==r[u]&&void 0!==r[u]&&s.push(r[u]);return s}))},e.text=function(e,n){return t(e,n,(function(e,t,n){return a.pcCheck(n,1,2),a.toStringExplicit(n[0],n[1])}))},e.concatenate=function(e,n){return t(e,n,(function(e,t,n){var r=[];if(n.length<1)return"";if(a.isArray(n[0])){for(var i=a.defaultUndefined(n[2],""),o=0;o<n[0].length;o++)r[o]=a.toStringExplicit(n[0][o],i);return n.length>1?r.join(n[1]):r.join("")}if(a.isImmutableArray(n[0])){for(i=a.defaultUndefined(n[2],""),o=0;o<n[0].length();o++)r[o]=a.toStringExplicit(n[0].get(o),i);return n.length>1?r.join(n[1]):r.join("")}for(o=0;o<n.length;o++)r[o]=a.toStringExplicit(n[o]);return r.join("")}))},e.reverse=function(e,n){return t(e,n,(function(e,t,n){var r;if(a.pcCheck(n,1,1),a.isArray(n[0]))return(r=n[0].slice(0)).reverse(),r;if(a.isImmutableArray(n[0]))return(r=n[0].toArray().slice(0)).reverse(),r;throw new Error("Invalid Parameter")}))},e.replace=function(e,n){return t(e,n,(function(e,t,n){a.pcCheck(n,3,4);var r=a.toString(n[0]),i=a.toString(n[1]),o=a.toString(n[2]);return 4!==n.length||a.toBoolean(n[3])?a.multiReplace(r,i,o):r.replace(i,o)}))},e.domainname=function(e,n){return t(e,n,(function(e,t,n){if(a.pcCheck(n,2,4),n[0]instanceof i)return n[0].domainValueLookup(a.toString(n[1]),n[2],void 0===n[3]?void 0:a.toNumber(n[3]));throw new Error("Invalid Parameter")}))},e.domaincode=function(e,n){return t(e,n,(function(e,t,n){if(a.pcCheck(n,2,4),n[0]instanceof i)return n[0].domainCodeLookup(a.toString(n[1]),n[2],void 0===n[3]?void 0:a.toNumber(n[3]));throw new Error("Invalid Parameter")}))},e.urlencode=function(e,n){return t(e,n,(function(e,t,n){if(a.pcCheck(n,1,1),null===n[0])return"";if(n[0]instanceof r){for(var i="",o=0,s=n[0].keys();o<s.length;o++){var u=s[o],l=n[0].field(u);""!==i&&(i+="&"),i+=null===l?encodeURIComponent(u)+"=":encodeURIComponent(u)+"="+encodeURIComponent(l)}return i}return encodeURIComponent(a.toString(n[0]))}))}}}.apply(null,r))||(e.exports=i)},1928:function(e,t,n){var r,i;r=[n.dj.c(e.i),t,n(1929),n(1930),n(1077),n(1931),n(1195),n(15),n(4),n(1933)],void 0===(i=function(e,t,r,i,a,o,s,u,l,c){Object.defineProperty(t,"__esModule",{value:!0});var f=function(){if(u("csp-restrictions"))return!1;try{return new Function("function* test() {}; return true")()}catch(e){return!1}}(),p=!1,m=!1,h=null,d=[];function g(e,t){return void 0===t&&(t=[]),o.parseScript(e,t)}function y(e,t){if(!0===t.useAsync||!0===e.isAsync){if(null===h)throw new Error("Async Arcade must be enabled for this script");return h.executeScript(e,t)}return i.executeScript(e,t)}function v(e,t){return i.referencesMember(e,t)}function b(e,t){return void 0===t&&(t=[]),void 0===e.usesGeometry&&s.findScriptDependencies(e,t),!0===e.usesGeometry}t.compileScript=function(e,t){return!0===t.useAsync||!0===e.isAsync?function(e,t){if(null===h)throw new Error("Async Arcade must be enabled for this script");return u("csp-restrictions")||!1===f?function(t){return h.executeScript(e,t)}:r.compileScript(e,t,!0)}(e,t):u("csp-restrictions")?function(t){return i.executeScript(e,t)}:r.compileScript(e,t)},t.extend=function(e){i.extend(e),r.extend(e,"sync"),null===h?d.push(e):(r.extend(e,"async"),h.extend(e))},t.parseScript=g,t.validateScript=function(e,t,n){return void 0===n&&(n=""),o.validateScript(e,t,n)},t.scriptCheck=function(e,t,n,r){return void 0===r&&(r=""),o.scriptCheck(e,t,n,r)},t.parseAndExecuteScript=function(e,t,n){return void 0===n&&(n=[]),y(o.parseScript(e,n),t)},t.executeScript=y,t.referencesMember=v,t.referencesFunction=function(e,t){return i.referencesFunction(e,t)},t.extractFieldLiterals=function(e,t){return void 0===t&&(t=!1),o.extractFieldLiterals(e,t)},t.scriptUsesGeometryEngine=b;var S=null;function w(){return S||(S=l.create((function(e,t){n.e(7).then((function(){var t=[n(1091),n(1301)];(function(t,n){m=!0,n.setGeometryEngine(t),e(!0)}).apply(null,t)})).catch((function(e){t(e)}))})))}t.enableGeometrySupport=w;var N=null;function E(){return null!==N?N:N=r.enableAsyncSupport().then((function(){return l.create((function(e,t){Promise.all([n.e(25),n.e(82)]).then((function(){var i=[n(2099)];(function(n){try{h=n;for(var i=0,a=d;i<a.length;i++){var o=a[i];h.extend(o),r.extend(o,"async")}d=null,e(!0)}catch(n){t(n)}}).apply(null,i)})).catch(t.bind(this))}))}))}function x(){return p}function I(){return!!h}function C(){return m}t.enableAsyncSupport=E,t.isFeatureSetSupportEnabled=x,t.isAsyncEnabled=I,t.isGeometryEnabled=C;var O=null;function A(){return O||(O=E().then((function(){return l.create((function(e,t){Promise.all([n.e(5),n.e(43)]).then((function(){var i=[n(1516),n(2105),n(2106),n(2107),n(2108)];(function(n,i,a,o,s){try{R=n,h.extend([i,a,o,s]),r.extend([i,a,o,s],"async"),p=!0,e(!0)}catch(n){t(n)}}).apply(null,i)})).catch(t.bind(this))}))})))}function T(e,t){return void 0===t&&(t=[]),void 0===e.usesFeatureSet&&s.findScriptDependencies(e,t),!0===e.usesFeatureSet}t.enableFeatureSetSupport=A,t.scriptUsesFeatureSet=T,t.scriptIsAsync=function(e,t){return void 0===t&&(t=[]),void 0===e.isAsync&&s.findScriptDependencies(e,t),!0===e.isAsync},t.loadScriptDependencies=function(e,t,n,r){return void 0===n&&(n=[]),void 0===r&&(r=!1),l.create((function(i,a){var o="string"==typeof e?g(e):e,s=[];s.push(k()),o&&(!1===C()&&(b(o)||r)&&s.push(w()),!1===I()&&(!0===o.isAsync||t)&&s.push(E()),!1===x()&&(T(o)||function(e,t){if(t){for(var n=0,r=t;n<r.length;n++)if(v(e,r[n]))return!0;return!1}return!1}(o,n))&&s.push(A())),s?l.all(s).then((function(){i(!0)}),a):i(!0)}))},t.scriptTouchesGeometry=function(e){if(b(e))return!0;var t=s.findFunctionCalls(e);return t.indexOf("geometry")>-1||t.indexOf("feature")>-1};var R=null;function k(){return null!==M?M:M=c.loadMoment().then((function(e){return a.MomentLibrary.Moment=e,!0}))}t.featureSetUtils=function(){return R},t.load=k;var M=null}.apply(null,r))||(e.exports=i)},1929:function(e,t,n){var r,i;r=[n.dj.c(e.i),t,n(1193),n(1230),n(1108),n(1134),n(1229),n(1163),n(1077),n(1195),n(1298),n(1299),n(1301),n(1302),n(1303),n(1305),n(4),n(36),n(60),n(200),n(44),n(134),n(135),n(24)],void 0===(i=function(e,t,r,i,a,o,s,u,l,c,f,p,m,h,d,g,y,v,b,S,w,N,E,x){function I(e,t,n){try{return n(e,null,t)}catch(e){throw e}}function C(e){return e instanceof Error?y.reject(e):y.reject(new Error(e))}function O(e,t){try{switch(t.type){case"EmptyStatement":return"lc.voidOperation";case"VariableDeclarator":return function(e,t){var n=null===t.init?null:O(e,t.init);n===l.voidOperation&&(n=null);var r=t.id.name.toLowerCase();if(null!==e.localScope){if(void 0!==e.localScope[r])return"lscope['"+r+"']="+n+"; ";if(void 0!==e.localScope._SymbolsMap[r])return"lscope['"+e.localScope._SymbolsMap[r]+"']="+n+"; ";var i=P(e);return e.localScope._SymbolsMap[r]=i,e.mangleMap[r]=i,"lscope['"+i+"']="+n+"; "}return void 0!==e.globalScope[r]?"gscope['"+r+"']="+n+"; ":void 0!==e.globalScope._SymbolsMap[r]?"gscope['"+e.globalScope._SymbolsMap[r]+"']="+n+"; ":(i=P(e),e.globalScope._SymbolsMap[r]=i,e.mangleMap[r]=i,"gscope['"+i+"']="+n+"; ")}(e,t);case"VariableDeclaration":return function(e,t){for(var n=[],r=0;r<t.declarations.length;r++)n.push(O(e,t.declarations[r]));return n.join("\n")+" \n lastStatement=  lc.voidOperation; \n"}(e,t);case"BlockStatement":return T(e,t);case"FunctionDeclaration":return function(e,t){var n=t.id.name.toLowerCase(),r={isAsync:e.isAsync,spatialReference:e.spatialReference,console:e.console,lrucache:e.lrucache,services:e.services,symbols:e.symbols,mangleMap:e.mangleMap,localScope:{_SymbolsMap:{}},depthCounter:e.depthCounter+1,globalScope:e.globalScope};if(r.depthCounter>64)throw new Error("Exceeded maximum function depth");for(var i="new lc.SizzleFunction( lang.functionDepthchecker(function() { var lastStatement = lc.voidOperation; \n   var lscope = runtimeCtx.localStack[runtimeCtx.localStack.length-1];\n",a=0;a<t.params.length;a++){var o=t.params[a].name.toLowerCase(),s=P(e);r.localScope._SymbolsMap[o]=s,r.mangleMap[o]=s,i+="lscope['"+s+"']=arguments["+a.toString()+"];\n"}return!0===e.isAsync?(i+="return lang.__awaiter(this, void 0, void 0, function* () {\n",i+=T(r,t.body)+"\n return lastStatement; ",i+="});  }",i+=", runtimeCtx))",i+="\n lastStatement = lc.voidOperation; \n"):(i+=T(r,t.body)+"\n return lastStatement; }, runtimeCtx))",i+="\n lastStatement = lc.voidOperation; \n"),void 0!==e.globalScope[n]?"gscope['"+n+"']="+i:void 0!==e.globalScope._SymbolsMap[n]?"gscope['"+e.globalScope._SymbolsMap[n]+"']="+i:(s=P(e),e.globalScope._SymbolsMap[n]=s,e.mangleMap[n]=s,"gscope['"+s+"']="+i)}(e,t);case"ReturnStatement":return function(e,t){return null===t.argument?"return lc.voidOperation":"return "+O(e,t.argument)}(e,t);case"IfStatement":return function(e,t){if("AssignmentExpression"===t.test.type||"UpdateExpression"===t.test.type)throw new Error(c.nodeErrorMessage(t.test,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));var n=O(e,t.test),r=L(e),i="var "+r+" = "+n+";\n if ("+r+" === true) {\n"+A(e,t.consequent)+"\n }\n";return null!==t.alternate?i+="else if ("+r+"===false)   { \n"+A(e,t.alternate)+"}\n":i+="else if ("+r+"===false) { \n lastStatement = lc.voidOperation;\n }\n",i+"else { lang.error({type: '"+t.type+"'},'RUNTIME','CANNOT_USE_NONBOOLEAN_IN_CONDITION'); \n}\n"}(e,t);case"ExpressionStatement":return function(e,t){return"AssignmentExpression"===t.expression.type?"lastStatement = lc.voidOperation; "+O(e,t.expression)+"; \n ":(t.expression.type,"lastStatement = "+O(e,t.expression)+"; ")}(e,t);case"AssignmentExpression":return function(e,t){var n=O(e,t.right),r=null;if("MemberExpression"===t.left.type)return"lang.assignmember("+(r=O(e,t.left.object))+","+(!0===t.left.computed?O(e,t.left.property):"'"+t.left.property.name+"'")+",'"+t.operator+"',"+n+")";if(r=t.left.name.toLowerCase(),null!==e.localScope){if(void 0!==e.localScope[r])return"lscope['"+r+"']=lang.assign("+n+",'"+t.operator+"', lscope['"+r+"'])";if(void 0!==e.localScope._SymbolsMap[r])return"lscope['"+e.localScope._SymbolsMap[r]+"']=lang.assign("+n+",'"+t.operator+"', lscope['"+e.localScope._SymbolsMap[r]+"'])"}if(void 0!==e.globalScope[r])return"gscope['"+r+"']=lang.assign("+n+",'"+t.operator+"', gscope['"+r+"'])";if(void 0!==e.globalScope._SymbolsMap[r])return"gscope['"+e.globalScope._SymbolsMap[r]+"']=lang.assign("+n+",'"+t.operator+"', gscope['"+e.globalScope._SymbolsMap[r]+"'])";throw new Error("Variable not recognised")}(e,t);case"UpdateExpression":return function(e,t){var n=null;if("MemberExpression"===t.argument.type)return"lang.memberupdate("+(n=O(e,t.argument.object))+","+(!0===t.argument.computed?O(e,t.argument.property):"'"+t.argument.property.name+"'")+",'"+t.operator+"',"+t.prefix+")";if(n=t.argument.name.toLowerCase(),null!==e.localScope){if(void 0!==e.localScope[n])return"lang.update(lscope, '"+n+"','"+t.operator+"',"+t.prefix+")";if(void 0!==e.localScope._SymbolsMap[n])return"lang.update(lscope, '"+e.localScope._SymbolsMap[n]+"','"+t.operator+"',"+t.prefix+")"}if(void 0!==e.globalScope[n])return"lang.update(gscope, '"+n+"','"+t.operator+"',"+t.prefix+")";if(void 0!==e.globalScope._SymbolsMap[n])return"lang.update(gscope, '"+e.globalScope._SymbolsMap[n]+"','"+t.operator+"',"+t.prefix+")";throw new Error("Variable not recognised")}(e,t);case"BreakStatement":return"break";case"ContinueStatement":return"continue";case"ForStatement":return function(e,t){var n="lastStatement = lc.voidOperation; \n";null!==t.init&&(n+=O(e,t.init)+"; ");var r=L(e),i=L(e);return n+="var "+r+" = true; ",n+="\n do { ",null!==t.update&&(n+=" if ("+r+"===false) {\n "+O(e,t.update)+"  \n}\n "+r+"=false; \n"),null!==t.test&&(n+="var "+i+" = "+O(e,t.test)+"; ",n+="if ("+i+"===false) { break; } else if ("+i+"!==true) { lang.error({type: '"+t.type+"'},'RUNTIME','CANNOT_USE_NONBOOLEAN_IN_CONDITION');   }\n"),n+=O(e,t.body),null!==t.update&&(n+="\n "+O(e,t.update)),n+"\n"+r+" = true; \n} while(true);  lastStatement = lc.voidOperation; "}(e,t);case"ForInStatement":return function(e,t){var n=L(e),r=L(e),i=L(e),a="var "+n+" = "+O(e,t.right)+";\n";"VariableDeclaration"===t.left.type&&(a+=O(e,t.left));var o="VariableDeclaration"===t.left.type?t.left.declarations[0].id.name:t.left.name;o=o.toLowerCase();var s="";return null!==e.localScope&&(void 0!==e.localScope[o]?s="lscope['"+o+"']":void 0!==e.localScope._SymbolsMap[o]&&(s="lscope['"+e.localScope._SymbolsMap[o]+"']")),""===s&&(void 0!==e.globalScope[o]?s="gscope['"+o+"']":void 0!==e.globalScope._SymbolsMap[o]&&(s="gscope['"+e.globalScope._SymbolsMap[o]+"']")),a+="if ("+n+"===null) {  lastStatement = lc.voidOperation; }\n ",a+="else if (lc.isArray("+n+") || lc.isString("+n+")) {",a+="var "+r+"="+n+".length; \n",a+="for(var "+i+"=0; "+i+"<"+r+"; "+i+"++) {\n",a+=s+"="+i+";\n",a+=O(e,t.body),a+="\n}\n",a+=" lastStatement = lc.voidOperation; \n",a+=" \n}\n",a+="else if (lc.isImmutableArray("+n+")) {",a+="var "+r+"="+n+".length(); \n",a+="for(var "+i+"=0; "+i+"<"+r+"; "+i+"++) {\n",a+=s+"="+i+";\n",a+=O(e,t.body),a+="\n}\n",a+=" lastStatement = lc.voidOperation; \n",a+=" \n}\n",a+="else if (( "+n+" instanceof lang.Dictionary) || ( "+n+" instanceof lang.Feature)) {",a+="var "+r+"="+n+".keys(); \n",a+="for(var "+i+"=0; "+i+"<"+r+".length; "+i+"++) {\n",a+=s+"="+r+"["+i+"];\n",a+=O(e,t.body),a+="\n}\n",a+=" lastStatement = lc.voidOperation; \n",a+=" \n}\n",e.isAsync&&(a+="else if (lc.isFeatureSet("+n+")) {",a+="var "+r+"="+n+".iterator(runtimeCtx.abortSignal); \n",a+="for(var "+i+"=lang. graphicToFeature( yield "+r+".next(),"+n+"); "+i+"!=null; "+i+"=lang. graphicToFeature( yield "+r+".next(),"+n+")) {\n",a+=s+"="+i+";\n",a+=O(e,t.body),a+="\n}\n",a+=" lastStatement = lc.voidOperation; \n",a+=" \n}\n"),a+"else { lastStatement = lc.voidOperation; } \n"}(e,t);case"Identifier":return function(e,t){try{var n=t.name.toLowerCase();if(null!==e.localScope){if(void 0!==e.localScope[n])return"lscope['"+n+"']";if(void 0!==e.localScope._SymbolsMap[n])return"lscope['"+e.localScope._SymbolsMap[n]+"']"}if(void 0!==e.globalScope[n])return"gscope['"+n+"']";if(void 0!==e.globalScope._SymbolsMap[n])return"gscope['"+e.globalScope._SymbolsMap[n]+"']";throw new Error(c.nodeErrorMessage(t,"RUNTIME","VARIABLENOTFOUND"))}catch(e){throw e}}(e,t);case"MemberExpression":return function(e,t){try{var n;return n=!0===t.computed?O(e,t.property):"'"+t.property.name+"'","lang.member("+O(e,t.object)+","+n+")"}catch(e){throw e}}(e,t);case"Literal":return null===t.value||void 0===t.value?"null":JSON.stringify(t.value);case"ThisExpression":throw new Error(c.nodeErrorMessage(t,"RUNTIME","NOTSUPPORTED"));case"CallExpression":return function(e,t){try{if("Identifier"!==t.callee.type)throw new Error(c.nodeErrorMessage(t,"RUNTIME","ONLYNODESSUPPORTED"));var n=t.callee.name.toLowerCase(),r="";if(null!==e.localScope&&(void 0!==e.localScope[n]?r="lscope['"+n+"']":void 0!==e.localScope._SymbolsMap[n]&&(r="lscope['"+e.localScope._SymbolsMap[n]+"']")),""===r&&(void 0!==e.globalScope[n]?r="gscope['"+n+"']":void 0!==e.globalScope._SymbolsMap[n]&&(r="gscope['"+e.globalScope._SymbolsMap[n]+"']")),""!==r){for(var i="[",a=0;a<t.arguments.length;a++)a>0&&(i+=", "),i+=O(e,t.arguments[a]);return i+="]",e.isAsync?"(yield lang.callfunc("+r+","+i+",runtimeCtx) )":"lang.callfunc("+r+","+i+",runtimeCtx)"}throw new Error(c.nodeErrorMessage(t,"RUNTIME","NOTFOUND"))}catch(e){throw e}}(e,t);case"UnaryExpression":return function(e,t){try{return"lang.unary("+O(e,t.argument)+",'"+t.operator+"')"}catch(e){throw e}}(e,t);case"BinaryExpression":return function(e,t){try{return"lang.binary("+O(e,t.left)+","+O(e,t.right)+",'"+t.operator+"')"}catch(e){throw e}}(e,t);case"LogicalExpression":return function(e,t){try{if("AssignmentExpression"===t.left.type||"UpdateExpression"===t.left.type)throw new Error(c.nodeErrorMessage(t.left,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));if("AssignmentExpression"===t.right.type||"UpdateExpression"===t.right.type)throw new Error(c.nodeErrorMessage(t.right,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));if("&&"===t.operator||"||"===t.operator)return"(lang.logicalCheck("+O(e,t.left)+") "+t.operator+" lang.logicalCheck("+O(e,t.right)+"))";throw new Error(c.nodeErrorMessage(t,"RUNTIME","ONLYORORAND"))}catch(e){throw e}}(e,t);case"ConditionalExpression":throw new Error(c.nodeErrorMessage(t,"RUNTIME","NOTSUPPORTED"));case"ArrayExpression":return function(e,t){try{for(var n=[],r=0;r<t.elements.length;r++)"Literal"===t.elements[r].type?n.push(O(e,t.elements[r])):n.push("lang.aCheck("+O(e,t.elements[r])+",'ArrayExpression')");return"["+n.join(",")+"]"}catch(e){throw e}}(e,t);case"ObjectExpression":return function(e,t){for(var n="lang.dictionary([",r=0;r<t.properties.length;r++){var i=t.properties[r];r>0&&(n+=","),n+="lang.strCheck("+("Identifier"===i.key.type?"'"+i.key.name+"'":O(e,i.key))+",'ObjectExpression'),lang.aCheck("+O(e,i.value)+", 'ObjectExpression')"}return n+"])"}(e,t);case"Property":return function(e,t){throw new Error("Should not get here")}();case"Array":throw new Error(c.nodeErrorMessage(t,"RUNTIME","NOTSUPPORTED"));default:throw new Error(c.nodeErrorMessage(t,"RUNTIME","UNREOGNISED"))}}catch(e){throw e}}function A(e,t){return"BlockStatement"===t.type?O(e,t):"ReturnStatement"===t.type||"BreakStatement"===t.type||"ContinueStatement"===t.type?O(e,t)+"; ":"UpdateExpression"===t.type?"lastStatement = "+O(e,t)+"; ":"ExpressionStatement"===t.type?O(e,t):"ObjectExpression"===t.type?"lastStatement = "+O(e,t)+"; ":O(e,t)+"; "}function T(e,t){for(var n="",r=0;r<t.body.length;r++)"ReturnStatement"===t.body[r].type||"BreakStatement"===t.body[r].type||"ContinueStatement"===t.body[r].type?n+=O(e,t.body[r])+"; \n":"UpdateExpression"===t.body[r].type||"ObjectExpression"===t.body[r].type?n+="lastStatement = "+O(e,t.body[r])+"; \n":n+=O(e,t.body[r])+" \n";return n}Object.defineProperty(t,"__esModule",{value:!0});var R=0,k={};function M(e){return null===e?"":l.isArray(e)||l.isImmutableArray(e)?"Array":l.isDate(e)?"Date":l.isString(e)?"String":l.isBoolean(e)?"Boolean":l.isNumber(e)?"Number":e instanceof i?"Attachment":e instanceof r?"Portal":e instanceof a?"Dictionary":e instanceof o?"Feature":e instanceof w?"Point":e instanceof N?"Polygon":e instanceof E?"Polyline":e instanceof S?"Multipoint":e instanceof v?"Extent":l.isFunctionParameter(e)?"Function":l.isFeatureSet(e)?"FeatureSet":l.isFeatureSetCollection(e)?"FeatureSetCollection":e===l.voidOperation?"":"number"==typeof e&&isNaN(e)?"Number":"Unrecognised Type"}function F(e,t){var n=e.length,r=Math.floor(n/2);return 0===n?[]:1===n?[e[0]]:function(e,t,n){for(var r=[];e.length>0||t.length>0;)if(e.length>0&&t.length>0){var i=n(e[0],t[0]);isNaN(i)&&(i=0),i<=0?(r.push(e[0]),e=e.slice(1)):(r.push(t[0]),t=t.slice(1))}else e.length>0?(r.push(e[0]),e=e.slice(1)):t.length>0&&(r.push(t[0]),t=t.slice(1));return r}(F(e.slice(0,r),t),F(e.slice(r,n),t),t)}function P(e){return e.symbols.symbolCounter++,"_T"+e.symbols.symbolCounter.toString()}function L(e){return e.symbols.symbolCounter++,"_Tvar"+e.symbols.symbolCounter.toString()}f.registerFunctions(k,I),g.registerFunctions(k,I),h.registerFunctions(k,I),p.registerFunctions(k,I),d.registerFunctions(k,I),k.typeof=function(e,t){return I(e,t,(function(e,t,n){l.pcCheck(n,1,1);var r=M(n[0]);if("Unrecognised Type"===r)throw new Error("Unrecognised Type");return r}))},k.iif=function(e,t){try{return I(e,t,(function(e,t,n){if(l.pcCheck(n,3,3),!1===l.isBoolean(n[0]))throw new Error("IF Function must have a boolean test condition");return n[0]?n[1]:n[2]}))}catch(e){throw e}},k.decode=function(e,t){try{return I(e,t,(function(t,n,r){if(r.length<2)throw new Error("Missing Parameters");if(2===r.length)return r[1];if((r.length-1)%2==0)throw new Error("Must have a default value result.");var i=r[0];return function e(t,n,r,i){try{var a=n[r];if(l.equalityTest(a,i))return n[r+1];var o=n.length-r;return 1===o?n[r]:2===o?null:3===o?n[r+2]:e(t,n,r+2,i)}catch(e){throw e}}(e,r,1,i)}))}catch(e){throw e}},k.when=function(e,t){try{return I(e,t,(function(t,n,r){if(r.length<3)throw new Error("Missing Parameters");if(r.length%2==0)throw new Error("Must have a default value result.");var i=r[0];if(!1===l.isBoolean(i))throw new Error("WHEN needs boolean test conditions");return function e(t,n,r,i){try{if(!0===i)return n[r+1];if(3==n.length-r)return n[r+2];var a=n[r+2];if(!1===l.isBoolean(a))throw new Error("WHEN needs boolean test conditions");return e(t,n,r+2,a)}catch(e){throw e}}(e,r,0,i)}))}catch(e){throw e}},k.top=function(e,t){return I(e,t,(function(e,t,n){if(l.pcCheck(n,2,2),l.isArray(n[0]))return l.toNumber(n[1])>=n[0].length?n[0].slice(0):n[0].slice(0,l.toNumber(n[1]));if(l.isImmutableArray(n[0]))return l.toNumber(n[1])>=n[0].length()?n[0].slice(0):n[0].slice(0,l.toNumber(n[1]));throw new Error("Top cannot accept this parameter type")}))},k.first=function(e,t){return I(e,t,(function(e,t,n){return l.pcCheck(n,1,1),l.isArray(n[0])?0===n[0].length?null:n[0][0]:l.isImmutableArray(n[0])?0===n[0].length()?null:n[0].get(0):null}))},k.sort=function(e,t){return I(e,t,(function(t,n,r){l.pcCheck(r,1,2);var i=r[0];if(l.isImmutableArray(i)&&(i=i.toArray()),!1===l.isArray(i))throw new Error("Illegal Argument");if(r.length>1){if(!1===l.isFunctionParameter(r[1]))throw new Error("Illegal Argument");var a=i,o=function(e,n){return q.callfunc(r[1],[e,n],t)};return e.isAsync?function e(t,n){try{var r=t.length,i=Math.floor(r/2);if(0===r)return y.resolve([]);if(1===r)return y.resolve([t[0]]);var a=[e(t.slice(0,i),n),e(t.slice(i,r),n)];return y.all(a).then((function(e){return function e(t,n,r,i){return y.create((function(a,o){var s=i;t.length>0||n.length>0?t.length>0&&n.length>0?r(t[0],n[0]).then((function(u){try{isNaN(u)&&(u=1),u<=0?(s.push(t[0]),t=t.slice(1)):(s.push(n[0]),n=n.slice(1)),e(t,n,r,i).then((function(e){a(e)}),o)}catch(e){o(e)}}),o):t.length>0?(s.push(t[0]),t=t.slice(1),e(t,n,r,i).then((function(e){a(e)}),o)):n.length>0&&(s.push(n[0]),n=n.slice(1),e(t,n,r,i).then((function(e){a(e)}),o)):a(i)}))}(e[0],e[1],n,[])}))}catch(t){return y.reject(t)}}(a,o):a=F(a,(function(e,t){return o(e,t)}))}if(0===(a=i).length)return[];for(var s={},u=0;u<a.length;u++){var c=M(a[u]);""!==c&&(s[c]=!0)}if(!0===s.Array||!0===s.Dictionary||!0===s.Feature||!0===s.Point||!0===s.Polygon||!0===s.Polyline||!0===s.Multipoint||!0===s.Extent||!0===s.Function)return a.slice(0);var f=0,p="";for(var m in s)f++,p=m;return f>1||"String"===p?F(a,(function(e,t){if(null==e||e===l.voidOperation)return null==t||t===l.voidOperation?0:1;if(null==t||t===l.voidOperation)return-1;var n=l.toString(e),r=l.toString(t);return n<r?-1:n===r?0:1})):"Number"===p?F(a,(function(e,t){return e-t})):"Boolean"===p?F(a,(function(e,t){return e===t?0:t?-1:1})):"Date"===p?F(a,(function(e,t){return t-e})):a.slice(0)}))};var D={};for(var U in k)D[U]=new l.NativeFunction(k[U]);for(var U in m.registerFunctions(k,I),k)k[U]=new l.NativeFunction(k[U]);var _=function(){};_.prototype=k;var G=function(){};function B(e,t,n){var r={};for(var i in e||(e={}),n||(n={}),r._SymbolsMap={},r.textformatting=1,r.infinity=1,r.pi=1,t)r[i]=1;for(var i in n)r[i]=1;for(var i in e)r[i]=1;return r}G.prototype=D;var j={fixSpatialReference:l.fixSpatialReference,parseArguments:function(e,t){for(var n=[],r=0;r<t.arguments.length;r++)n.push(O(e,t.arguments[r]));return n},standardFunction:I};function Y(e,t){for(var n={mode:t,compiled:!0,functions:{},signatures:[],failDefferred:C,standardFunction:I,standardFunctionAsync:I,evaluateIdentifier:V},r=0;r<e.length;r++)e[r].registerFunctions(n);if("sync"===t){for(var i in n.functions)k[i]=new l.NativeFunction(n.functions[i]),_.prototype[i]=k[i];for(r=0;r<n.signatures.length;r++)c.addFunctionDeclaration(n.signatures[r],"sync")}else{for(var i in n.functions)D[i]=new l.NativeFunction(n.functions[i]),G.prototype[i]=D[i];for(r=0;r<n.signatures.length;r++)c.addFunctionDeclaration(n.signatures[r],"async")}}function V(e,t){var n=t.name;if("_SymbolsMap"===n)throw"Illegal";if(e.localStack.length>0){if("_t"!==n.substr(0,2).toLowerCase()&&void 0!==e.localStack[e.localStack.length-1][n])return e.localStack[e.localStack.length-1][n];var r=e.mangleMap[n];if(void 0!==r&&void 0!==e.localStack[e.localStack.length-1][r])return e.localStack[e.localStack.length-1][r]}if("_t"!==n.substr(0,2).toLowerCase()&&void 0!==e.globalScope[n])return e.globalScope[n];if(1===e.globalScope._SymbolsMap[n])return e.globalScope[n];var i=e.mangleMap[n];return void 0!==i?e.globalScope[i]:void 0}t.functionHelper=j,t.extend=Y,t.executeScript=function(e,t){return e(t)},t.extractFieldLiterals=function(e,t){return void 0===t&&(t=!1),c.findFieldLiterals(e)},t.validateScript=function(e,t){return c.validateScript(e,t,"sync")},t.referencesMember=function(e,t){return c.referencesMember(e,t)},t.referencesFunction=function(e,t){return c.referencesFunction(e,t)};var z=0,q={error:function(e,t,n){throw new Error(c.nodeErrorMessage(e,t,n))},__awaiter:function(e,t,n,r){return y.create((function(n,i){function a(e){try{s(r.next(e))}catch(e){i(e)}}function o(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){e.done?n(e.value):e.value&&e.value.then?e.value.then(a,o):++z%100==0?setTimeout((function(){z=0,a(e.value)}),0):a(e.value)}s((r=r.apply(e,t||[])).next())}))},functionDepthchecker:function(e,t){return function(){if(t.depthCounter++,t.localStack.push([]),t.depthCounter>64)throw new Error("Exceeded maximum function depth");var n=e.apply(this,arguments);return y.isPromiseLike(n)?n.then((function(e){return t.depthCounter--,t.localStack.length=t.localStack.length-1,e})):(t.depthCounter--,t.localStack.length=t.localStack.length-1,n)}},aCheck:function(e,t){if(l.isFunctionParameter(e))throw new Error(c.nodeErrorMessage({type:t},"RUNTIME","FUNCTIONCONTEXTILLEGAL"));return e===l.voidOperation?null:e},Dictionary:a,Feature:o,dictionary:function(e){for(var t={},n=0;n<e.length;n+=2){if(l.isFunctionParameter(e[n+1]))throw new Error("Illegal Argument");if(!1===l.isString(e[n]))throw new Error("Illegal Argument");e[n+1]===l.voidOperation?t[e[n].toString()]=null:t[e[n].toString()]=e[n+1]}var r=new a(t);return r.immutable=!1,r},strCheck:function(e){if(!1===l.isString(e))throw new Error("Illegal Argument");return e},unary:function(e,t){if(l.isBoolean(e)){if("!"===t)return!e;if("-"===t)return-1*l.toNumber(e);if("+"===t)return 1*l.toNumber(e);var n={type:"UnaryExpression",operator:t,prefix:null,argument:null};throw new Error(c.nodeErrorMessage(n,"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"))}if("-"===t)return-1*l.toNumber(e);if("+"===t)return 1*l.toNumber(e);var r={type:"UnaryExpression",operator:t,prefix:null,argument:null};throw new Error(c.nodeErrorMessage(r,"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"))},logicalCheck:function(e){if(!1===l.isBoolean(e))throw new Error(c.nodeErrorMessage({type:"LogicalExpression",operator:null,left:null,right:null},"RUNTIME","ONLYORORAND"));return e},logical:function(e,t,n){if(l.isBoolean(e)&&l.isBoolean(t))switch(n){case"||":return e||t;case"&&":return e&&t;default:throw new Error(c.nodeErrorMessage({type:"LogicalExpression",operator:null,left:null,right:null},"RUNTIME","ONLYORORAND"))}throw new Error(c.nodeErrorMessage({type:"LogicalExpression",operator:null,left:null,right:null},"RUNTIME","ONLYORORAND"))},binary:function(e,t,n){switch(n){case"==":case"=":return l.equalityTest(e,t);case"!=":return!l.equalityTest(e,t);case"<":case">":case"<=":case">=":return l.greaterThanLessThan(e,t,n);case"+":return l.isString(e)||l.isString(t)?l.toString(e)+l.toString(t):l.toNumber(e)+l.toNumber(t);case"-":return l.toNumber(e)-l.toNumber(t);case"*":return l.toNumber(e)*l.toNumber(t);case"/":return l.toNumber(e)/l.toNumber(t);case"%":return l.toNumber(e)%l.toNumber(t);default:var r={type:"BinaryExpression",operator:n,left:e,right:t};throw new Error(c.nodeErrorMessage(r,"RUNTIME","OPERATORNOTRECOGNISED"))}},assign:function(e,t,n){switch(t){case"=":return e===l.voidOperation?null:e;case"/=":return l.toNumber(n)/l.toNumber(e);case"*=":return l.toNumber(n)*l.toNumber(e);case"-=":return l.toNumber(n)-l.toNumber(e);case"+=":return l.isString(n)||l.isString(e)?l.toString(n)+l.toString(e):l.toNumber(n)+l.toNumber(e);case"%=":return l.toNumber(n)%l.toNumber(e);default:var r={type:"AssignmentExpression",operator:t,left:null,right:null};throw new Error(c.nodeErrorMessage(r,"RUNTIME","OPERATORNOTRECOGNISED"))}},update:function(e,t,n,r){var i=l.toNumber(e[t]);return e[t]="++"===n?i+1:i-1,!1===r?i:"++"===n?i+1:i-1},graphicToFeature:function(e,t){return null===e?null:o.createFromGraphicLikeObject(e.geometry,e.attributes,t)},memberupdate:function(e,t,n,r){var i;if(l.isArray(e)){if(!l.isNumber(t))throw new Error("Invalid Parameter");if(t<0&&(t=e.length+t),t<0||t>=e.length)throw new Error("Assignment outside of array bounds");i=l.toNumber(e[t]),e[t]="++"===n?i+1:i-1}else if(e instanceof a){if(!1===l.isString(t))throw new Error("Dictionary accessor must be a string");if(!0!==e.hasField(t))throw new Error("Invalid Parameter");i=l.toNumber(e.field(t)),e.setField(t,"++"===n?i+1:i-1)}else{if(!(e instanceof o))throw l.isImmutableArray(e)?new Error("Array is Immutable"):new Error("Invalid Parameter");if(!1===l.isString(t))throw new Error("Feature accessor must be a string");if(!0!==e.hasField(t))throw new Error("Invalid Parameter");i=l.toNumber(e.field(t)),e.setField(t,"++"===n?i+1:i-1)}return!1===r?i:"++"===n?i+1:i-1},assignmember:function(e,t,n,r){if(l.isArray(e)){if(!l.isNumber(t))throw new Error("Invalid Parameter");if(t<0&&(t=e.length+t),t<0||t>e.length)throw new Error("Assignment outside of array bounds");if(t===e.length){if("="!==n)throw new Error("Invalid Parameter");e[t]=this.assign(r,n,e[t])}else e[t]=this.assign(r,n,e[t])}else if(e instanceof a){if(!1===l.isString(t))throw new Error("Dictionary accessor must be a string");if(!0===e.hasField(t))e.setField(t,this.assign(r,n,e.field(t)));else{if("="!==n)throw new Error("Invalid Parameter");e.setField(t,this.assign(r,n,null))}}else{if(!(e instanceof o))throw l.isImmutableArray(e)?new Error("Array is Immutable"):new Error("Invalid Parameter");if(!1===l.isString(t))throw new Error("Feature accessor must be a string");if(!0===e.hasField(t))e.setField(t,this.assign(r,n,e.field(t)));else{if("="!==n)throw new Error("Invalid Parameter");e.setField(t,this.assign(r,n,null))}}},member:function(e,t){if(null===e)throw new Error(c.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","NOTFOUND"));if(e instanceof a||e instanceof o){if(l.isString(t))return e.field(t);throw new Error(c.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","INVALIDTYPE"))}if(e instanceof b){if(l.isString(t))return function(e,t,n){var r;switch(t=t.toLowerCase()){case"hasz":var i=e.hasZ;return void 0!==i&&i;case"hasm":var o=e.hasM;return void 0!==o&&o;case"spatialreference":var l=e.spatialReference._arcadeCacheId;if(void 0===l){var f=!0;Object.freeze&&Object.isFrozen(e.spatialReference)&&(f=!1),f&&(R++,e.spatialReference._arcadeCacheId=R,l=R)}var p=new a({wkt:e.spatialReference.wkt,wkid:e.spatialReference.wkid});return void 0!==l&&(p._arcadeCacheId="SPREF"+l.toString()),p}switch(e.type){case"extent":switch(t){case"xmin":case"xmax":case"ymin":case"ymax":case"zmin":case"zmax":case"mmin":case"mmax":var m=e[t];return void 0!==m?m:null;case"type":return"Extent"}break;case"polygon":switch(t){case"rings":return void 0===(r=e.cache._arcadeCacheId)&&(r=++R,e.cache._arcadeCacheId=r),new s(e.rings,e.spatialReference,!0===e.hasZ,!0===e.hasM,r);case"type":return"Polygon"}break;case"point":switch(t){case"x":case"y":case"z":case"m":return void 0!==e[t]?e[t]:null;case"type":return"Point"}break;case"polyline":switch(t){case"paths":return void 0===(r=e.cache._arcadeCacheId)&&(r=++R,e.cache._arcadeCacheId=r),new s(e.paths,e.spatialReference,!0===e.hasZ,!0===e.hasM,r);case"type":return"Polyline"}break;case"multipoint":switch(t){case"points":return void 0===(r=e.cache._arcadeCacheId)&&(r=++R,e.cache._arcadeCacheId=r),new u(e.points,e.spatialReference,!0===e.hasZ,!0===e.hasM,r,1);case"type":return"Multipoint"}}throw new Error(c.nodeErrorMessage("MemberExpression","RUNTIME","PROPERTYNOTFOUND"))}(e,t);throw new Error(c.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","INVALIDTYPE"))}if(l.isArray(e)){if(l.isNumber(t)&&isFinite(t)&&Math.floor(t)===t){if(t<0&&(t=e.length+t),t>=e.length||t<0)throw new Error(c.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","OUTOFBOUNDS"));return e[t]}throw new Error(c.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","INVALIDTYPE"))}if(l.isString(e)){if(l.isNumber(t)&&isFinite(t)&&Math.floor(t)===t){if(t<0&&(t=e.length+t),t>=e.length||t<0)throw new Error(c.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","OUTOFBOUNDS"));return e[t]}throw new Error(c.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","INVALIDTYPE"))}if(l.isImmutableArray(e)){if(l.isNumber(t)&&isFinite(t)&&Math.floor(t)===t){if(t<0&&(t=e.length()+t),t>=e.length()||t<0)throw new Error(c.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","OUTOFBOUNDS"));return e.get(t)}throw new Error(c.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","INVALIDTYPE"))}throw new Error(c.nodeErrorMessage({type:"MemberExpression",object:null,property:null,computed:null},"RUNTIME","INVALIDTYPE"))},callfunc:function(e,t,n){return e instanceof l.NativeFunction?e.fn(n,t):e instanceof l.SizzleFunction?e.fn.apply(this,t):e.apply(this,t)}};function J(e){}t.compileScript=function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1),null===t&&(t={vars:{},customfunctions:{}});var r={isAsync:n,globalScope:B(t.vars,n?D:k,t.customfunctions),localScope:null,mangleMap:{},console:J,lrucache:t.lrucache,services:t.services,symbols:{symbolCounter:0}},i=O(r,e.body[0].body);""===i&&(i="lc.voidOperation; ");var s={lc:l,lang:q,mangles:r.mangleMap,postProcess:function(e){if(e instanceof l.ReturnResult&&(e=e.value),e instanceof l.ImplicitResult&&(e=e.value),e===l.voidOperation&&(e=null),e===l.breakResult)throw new Error("Cannot return BREAK");if(e===l.continueResult)throw new Error("Cannot return CONTINUE");if(l.isFunctionParameter(e))throw new Error("Cannot return FUNCTION");return e},prepare:function(e,t){var n=e.spatialReference;null==n&&(n=new x({wkid:102100}));var r=function(e,t,n){var r=n?new G:new _;e||(e={}),t||(t={});var i=new a({newline:"\n",tab:"\t",singlequote:"'",doublequote:'"',forwardslash:"/",backwardslash:"\\"});for(var s in i.immutable=!1,r._SymbolsMap={textformatting:1,infinity:1,pi:1},r.textformatting=i,r.infinity=Number.POSITIVE_INFINITY,r.pi=Math.PI,t)r[s]=t[s],r._SymbolsMap[s]=1;for(var s in e)r._SymbolsMap[s]=1,e[s]&&"esri.Graphic"===e[s].declaredClass?r[s]=o.createFromGraphic(e[s]):r[s]=e[s];return r}(e.vars,e.customfunctions,t);return{localStack:[],isAsync:t,mangleMap:this.mangles,spatialReference:n,globalScope:r,abortSignal:void 0===e.abortSignal||null===e.abortSignal?{aborted:!1}:e.abortSignal,localScope:null,services:e.services,console:e.console?e.console:J,lrucache:e.lrucache,symbols:{symbolCounter:0},depthCounter:1}}};return new Function("context","spatialReference",n?"var runtimeCtx=this.prepare(context, true);\n var lc = this.lc;  var lang = this.lang; var gscope=runtimeCtx.globalScope; \nreturn lang.__awaiter(this, void 0, void 0, function* () {\n\n function mainBody() {\n var lastStatement=lc.voidOperation;\n return lang.__awaiter(this, void 0, void 0, function* () {\n"+i+"\n return lastStatement; }); } \n return this.postProcess(yield mainBody()); }); ":"var runtimeCtx=this.prepare(context, false);\n var lc = this.lc;  var lang = this.lang; var gscope=runtimeCtx.globalScope; \n function mainBody() {\n var lastStatement=lc.voidOperation;\n "+i+"\n return lastStatement; } \n return this.postProcess(mainBody()); ").bind(s)},t.enableAsyncSupport=function(){return y.create((function(e,t){n.e(25).then((function(){var t=[n(1515)];(function(t){Y([t],"async"),e(!0)}).apply(null,t)})).catch((function(e){t(e)}))}))}}.apply(null,r))||(e.exports=i)},1930:function(e,t,n){var r,i;r=[n.dj.c(e.i),t,n(1193),n(1230),n(1108),n(1134),n(1297),n(1229),n(1163),n(1077),n(1195),n(1298),n(1299),n(1301),n(1302),n(1303),n(1305),n(36),n(60),n(200),n(44),n(134),n(135),n(24)],void 0===(i=function(e,t,n,r,i,a,o,s,u,l,c,f,p,m,h,d,g,y,v,b,S,w,N,E){function x(e,t){for(var n=[],r=0;r<t.arguments.length;r++)n.push(C(e,t.arguments[r]));return n}function I(e,t,n){try{return n(e,t,x(e,t))}catch(e){throw e}}function C(e,t){try{switch(t.type){case"EmptyStatement":return l.voidOperation;case"VariableDeclarator":return function(e,t){var n=null===t.init?null:C(e,t.init);if(n===l.voidOperation&&(n=null),"Identifier"!==t.id.type)throw new Error("Can only assign a regular variable");var r=t.id.name.toLowerCase();return null!==e.localScope?e.localScope[r]={value:n,valueset:!0,node:t.init}:e.globalScope[r]={value:n,valueset:!0,node:t.init},l.voidOperation}(e,t);case"VariableDeclaration":return function(e,t){for(var n=0;n<t.declarations.length;n++)C(e,t.declarations[n]);return l.voidOperation}(e,t);case"BlockStatement":return function(e,t){for(var n=l.voidOperation,r=0;r<t.body.length;r++)if((n=C(e,t.body[r]))instanceof l.ReturnResult||n===l.breakResult||n===l.continueResult)return n;return n}(e,t);case"FunctionDeclaration":return function(e,t){var n=t.id.name.toLowerCase();return e.globalScope[n]={valueset:!0,node:null,value:new o(t,e)},l.voidOperation}(e,t);case"ReturnStatement":return function(e,t){if(null===t.argument)return new l.ReturnResult(l.voidOperation);var n=C(e,t.argument);return new l.ReturnResult(n)}(e,t);case"IfStatement":return function(e,t){if("AssignmentExpression"===t.test.type||"UpdateExpression"===t.test.type)throw new Error(c.nodeErrorMessage(t.test,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));var n=C(e,t.test);if(!0===n)return C(e,t.consequent);if(!1===n)return null!==t.alternate?C(e,t.alternate):l.voidOperation;throw new Error(c.nodeErrorMessage(t,"RUNTIME","CANNOT_USE_NONBOOLEAN_IN_CONDITION"))}(e,t);case"ExpressionStatement":return function(e,t){return"AssignmentExpression"===t.expression.type||"UpdateExpression"===t.expression.type?C(e,t.expression):(t.expression.type,(n=C(e,t.expression))===l.voidOperation?l.voidOperation:new l.ImplicitResult(n));var n}(e,t);case"AssignmentExpression":return function(e,t){var n=C(e,t.right),r=null,o="";if("MemberExpression"===t.left.type){if(r=C(e,t.left.object),!0===t.left.computed?o=C(e,t.left.property):"Identifier"===t.left.property.type&&(o=t.left.property.name),l.isArray(r)){if(!l.isNumber(o))throw new Error("Invalid Parameter");if(o<0&&(o=r.length+o),o<0||o>r.length)throw new Error("Assignment outside of array bounds");if(o===r.length){if("="!==t.operator)throw new Error("Invalid Parameter");r[o]=A(n,t.operator,r[o],t)}else r[o]=A(n,t.operator,r[o],t)}else if(r instanceof i){if(!1===l.isString(o))throw new Error("Dictionary accessor must be a string");if(!0===r.hasField(o))r.setField(o,A(n,t.operator,r.field(o),t));else{if("="!==t.operator)throw new Error("Invalid Parameter");r.setField(o,A(n,t.operator,null,t))}}else{if(!(r instanceof a))throw l.isImmutableArray(r)?new Error("Array is Immutable"):new Error("Invalid Parameter");if(!1===l.isString(o))throw new Error("Feature accessor must be a string");if(!0===r.hasField(o))r.setField(o,A(n,t.operator,r.field(o),t));else{if("="!==t.operator)throw new Error("Invalid Parameter");r.setField(o,A(n,t.operator,null,t))}}return l.voidOperation}if(r=t.left.name.toLowerCase(),null!==e.localScope&&void 0!==e.localScope[r])return e.localScope[r]={value:A(n,t.operator,e.localScope[r].value,t),valueset:!0,node:t.right},l.voidOperation;if(void 0!==e.globalScope[r])return e.globalScope[r]={value:A(n,t.operator,e.globalScope[r].value,t),valueset:!0,node:t.right},l.voidOperation;throw new Error("Variable not recognised")}(e,t);case"UpdateExpression":return function(e,t){var n,r=null,o="";if("MemberExpression"===t.argument.type){if(r=C(e,t.argument.object),!0===t.argument.computed?o=C(e,t.argument.property):"Identifier"===t.argument.property.type&&(o=t.argument.property.name),l.isArray(r)){if(!l.isNumber(o))throw new Error("Invalid Parameter");if(o<0&&(o=r.length+o),o<0||o>=r.length)throw new Error("Assignment outside of array bounds");n=l.toNumber(r[o]),r[o]="++"===t.operator?n+1:n-1}else if(r instanceof i){if(!1===l.isString(o))throw new Error("Dictionary accessor must be a string");if(!0!==r.hasField(o))throw new Error("Invalid Parameter");n=l.toNumber(r.field(o)),r.setField(o,"++"===t.operator?n+1:n-1)}else{if(!(r instanceof a))throw l.isImmutableArray(r)?new Error("Array is Immutable"):new Error("Invalid Parameter");if(!1===l.isString(o))throw new Error("Feature accessor must be a string");if(!0!==r.hasField(o))throw new Error("Invalid Parameter");n=l.toNumber(r.field(o)),r.setField(o,"++"===t.operator?n+1:n-1)}return!1===t.prefix?n:"++"===t.operator?n+1:n-1}if(!(r="Identifier"===t.argument.type?t.argument.name.toLowerCase():""))throw new Error("Invalid identifier");if(null!==e.localScope&&void 0!==e.localScope[r])return n=l.toNumber(e.localScope[r].value),e.localScope[r]={value:"++"===t.operator?n+1:n-1,valueset:!0,node:t},!1===t.prefix?n:"++"===t.operator?n+1:n-1;if(void 0!==e.globalScope[r])return n=l.toNumber(e.globalScope[r].value),e.globalScope[r]={value:"++"===t.operator?n+1:n-1,valueset:!0,node:t},!1===t.prefix?n:"++"===t.operator?n+1:n-1;throw new Error("Variable not recognised")}(e,t);case"BreakStatement":return l.breakResult;case"ContinueStatement":return l.continueResult;case"ForStatement":return function(e,t){null!==t.init&&C(e,t.init);var n={testResult:!0,lastAction:l.voidOperation};do{O(e,t,n)}while(!0===n.testResult);return n.lastAction instanceof l.ReturnResult?n.lastAction:l.voidOperation}(e,t);case"ForInStatement":return function(e,t){var n=C(e,t.right);"VariableDeclaration"===t.left.type&&C(e,t.left);var r=null,o="";if("VariableDeclaration"===t.left.type){var s=t.left.declarations[0].id;"Identifier"===s.type&&(o=s.name)}else"Identifier"===t.left.type&&(o=t.left.name);if(!o)throw new Error(c.nodeErrorMessage(t,"RUNTIME","INVALIDVARIABLE"));if(o=o.toLowerCase(),null!==e.localScope&&void 0!==e.localScope[o]&&(r=e.localScope[o]),null===r&&void 0!==e.globalScope[o]&&(r=e.globalScope[o]),null===r)throw new Error(c.nodeErrorMessage(t,"RUNTIME","VARIABLENOTDECLARED"));if(l.isArray(n)||l.isString(n)){for(var u=n.length,f=0;f<u&&(r.value=f,(h=C(e,t.body))!==l.breakResult);f++)if(h instanceof l.ReturnResult)return h;return l.voidOperation}if(l.isImmutableArray(n)){for(f=0;f<n.length()&&(r.value=f,(h=C(e,t.body))!==l.breakResult);f++)if(h instanceof l.ReturnResult)return h;return l.voidOperation}if(!(n instanceof i||n instanceof a))return l.voidOperation;for(var p=n.keys(),m=0;m<p.length;m++){var h;if(r.value=p[m],(h=C(e,t.body))===l.breakResult)break;if(h instanceof l.ReturnResult)return h}}(e,t);case"Identifier":return k(e,t);case"MemberExpression":return function(e,t){try{var n=C(e,t.object);if(null===n)throw new Error(c.nodeErrorMessage(t,"RUNTIME","NOTFOUND"));if(!1===t.computed){if("Identifier"===t.property.type){if(n instanceof i||n instanceof a)return n.field(t.property.name);if(n instanceof v)return R(n,t.property.name,t)}throw new Error(c.nodeErrorMessage(t,"RUNTIME","INVALIDTYPE"))}var r=C(e,t.property);if(n instanceof i||n instanceof a){if(l.isString(r))return n.field(r);throw new Error(c.nodeErrorMessage(t,"RUNTIME","INVALIDTYPE"))}if(n instanceof v){if(l.isString(r))return R(n,r,t);throw new Error(c.nodeErrorMessage(t,"RUNTIME","INVALIDTYPE"))}if(l.isArray(n)){if(l.isNumber(r)&&isFinite(r)&&Math.floor(r)===r){if(r<0&&(r=n.length+r),r>=n.length||r<0)throw new Error(c.nodeErrorMessage(t,"RUNTIME","OUTOFBOUNDS"));return n[r]}throw new Error(c.nodeErrorMessage(t,"RUNTIME","INVALIDTYPE"))}if(l.isString(n)){if(l.isNumber(r)&&isFinite(r)&&Math.floor(r)===r){if(r<0&&(r=n.length+r),r>=n.length||r<0)throw new Error(c.nodeErrorMessage(t,"RUNTIME","OUTOFBOUNDS"));return n[r]}throw new Error(c.nodeErrorMessage(t,"RUNTIME","INVALIDTYPE"))}if(l.isImmutableArray(n)){if(l.isNumber(r)&&isFinite(r)&&Math.floor(r)===r){if(r<0&&(r=n.length()+r),r>=n.length()||r<0)throw new Error(c.nodeErrorMessage(t,"RUNTIME","OUTOFBOUNDS"));return n.get(r)}throw new Error(c.nodeErrorMessage(t,"RUNTIME","INVALIDTYPE"))}throw new Error(c.nodeErrorMessage(t,"RUNTIME","INVALIDTYPE"))}catch(e){throw e}}(e,t);case"Literal":return t.value;case"CallExpression":return function(e,t){try{if("Identifier"!==t.callee.type)throw new Error(c.nodeErrorMessage(t,"RUNTIME","ONLYNODESSUPPORTED"));if(null!==e.localScope&&void 0!==e.localScope[t.callee.name.toLowerCase()]){if((n=e.localScope[t.callee.name.toLowerCase()]).value instanceof l.NativeFunction)return n.value.fn(e,t);if(n.value instanceof o)return D(e,t,n.value.definition);throw new Error(c.nodeErrorMessage(t,"RUNTIME","NOTAFUNCTION"))}if(void 0!==e.globalScope[t.callee.name.toLowerCase()]){var n;if((n=e.globalScope[t.callee.name.toLowerCase()]).value instanceof l.NativeFunction)return n.value.fn(e,t);if(n.value instanceof o)return D(e,t,n.value.definition);throw new Error(c.nodeErrorMessage(t,"RUNTIME","NOTAFUNCTION"))}throw new Error(c.nodeErrorMessage(t,"RUNTIME","NOTFOUND"))}catch(e){throw e}}(e,t);case"UnaryExpression":return function(e,t){try{var n=C(e,t.argument);if(l.isBoolean(n)){if("!"===t.operator)return!n;if("-"===t.operator)return-1*l.toNumber(n);if("+"===t.operator)return 1*l.toNumber(n);throw new Error(c.nodeErrorMessage(t,"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"))}if("-"===t.operator)return-1*l.toNumber(n);if("+"===t.operator)return 1*l.toNumber(n);throw new Error(c.nodeErrorMessage(t,"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"))}catch(e){throw e}}(e,t);case"BinaryExpression":return function(e,t){try{var n=[C(e,t.left),C(e,t.right)],r=n[0],i=n[1];switch(t.operator){case"==":return l.equalityTest(r,i);case"!=":return!l.equalityTest(r,i);case"<":case">":case"<=":case">=":return l.greaterThanLessThan(r,i,t.operator);case"+":return l.isString(r)||l.isString(i)?l.toString(r)+l.toString(i):l.toNumber(r)+l.toNumber(i);case"-":return l.toNumber(r)-l.toNumber(i);case"*":return l.toNumber(r)*l.toNumber(i);case"/":return l.toNumber(r)/l.toNumber(i);case"%":return l.toNumber(r)%l.toNumber(i);default:throw new Error(c.nodeErrorMessage(t,"RUNTIME","OPERATORNOTRECOGNISED"))}}catch(e){throw e}}(e,t);case"LogicalExpression":return function(e,t){try{if("AssignmentExpression"===t.left.type||"UpdateExpression"===t.left.type)throw new Error(c.nodeErrorMessage(t.left,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));if("AssignmentExpression"===t.right.type||"UpdateExpression"===t.right.type)throw new Error(c.nodeErrorMessage(t.right,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));var n=C(e,t.left);if(l.isBoolean(n))switch(t.operator){case"||":if(!0===n)return n;var r=C(e,t.right);if(l.isBoolean(r))return r;throw new Error(c.nodeErrorMessage(t,"RUNTIME","ONLYORORAND"));case"&&":if(!1===n)return n;if(r=C(e,t.right),l.isBoolean(r))return r;throw new Error(c.nodeErrorMessage(t,"RUNTIME","ONLYORORAND"));default:throw new Error(c.nodeErrorMessage(t,"RUNTIME","ONLYORORAND"))}throw new Error(c.nodeErrorMessage(t,"RUNTIME","ONLYBOOLEAN"))}catch(e){throw e}}(e,t);case"ConditionalExpression":throw new Error(c.nodeErrorMessage(t,"RUNTIME","NOTSUPPORTED"));case"ArrayExpression":return function(e,t){try{for(var n=[],r=0;r<t.elements.length;r++){var i=C(e,t.elements[r]);if(l.isFunctionParameter(i))throw new Error(c.nodeErrorMessage(t,"RUNTIME","FUNCTIONCONTEXTILLEGAL"));i===l.voidOperation?n.push(null):n.push(i)}return n}catch(e){throw e}}(e,t);case"ObjectExpression":return function(e,t){for(var n={},r=0;r<t.properties.length;r++){var a=C(e,t.properties[r]);if(l.isFunctionParameter(a.value))throw new Error("Illegal Argument");if(!1===l.isString(a.key))throw new Error("Illegal Argument");a.value===l.voidOperation?n[a.key.toString()]=null:n[a.key.toString()]=a.value}var o=new i(n);return o.immutable=!1,o}(e,t);case"Property":return function(e,t){return{key:"Identifier"===t.key.type?t.key.name:C(e,t.key),value:C(e,t.value)}}(e,t);default:throw new Error(c.nodeErrorMessage(t,"RUNTIME","UNREOGNISED"))}}catch(e){throw e}}function O(e,t,n){if(null!==t.test){if(n.testResult=C(e,t.test),!1===n.testResult)return;if(!0!==n.testResult)throw new Error(c.nodeErrorMessage(t,"RUNTIME","CANNOT_USE_NONBOOLEAN_IN_CONDITION"))}n.lastAction=C(e,t.body),n.lastAction!==l.breakResult?n.lastAction instanceof l.ReturnResult?n.testResult=!1:null!==t.update&&C(e,t.update):n.testResult=!1}function A(e,t,n,r){switch(t){case"=":return e===l.voidOperation?null:e;case"/=":return l.toNumber(n)/l.toNumber(e);case"*=":return l.toNumber(n)*l.toNumber(e);case"-=":return l.toNumber(n)-l.toNumber(e);case"+=":return l.isString(n)||l.isString(e)?l.toString(n)+l.toString(e):l.toNumber(n)+l.toNumber(e);case"%=":return l.toNumber(n)%l.toNumber(e);default:throw new Error(c.nodeErrorMessage(r,"RUNTIME","OPERATORNOTRECOGNISED"))}}Object.defineProperty(t,"__esModule",{value:!0});var T=0;function R(e,t,n){var r;switch(t=t.toLowerCase()){case"hasz":var a=e.hasZ;return void 0!==a&&a;case"hasm":var o=e.hasM;return void 0!==o&&o;case"spatialreference":var l=e.spatialReference._arcadeCacheId;if(void 0===l){var f=!0;Object.freeze&&Object.isFrozen(e.spatialReference)&&(f=!1),f&&(T++,e.spatialReference._arcadeCacheId=T,l=T)}var p=new i({wkt:e.spatialReference.wkt,wkid:e.spatialReference.wkid});return void 0!==l&&(p._arcadeCacheId="SPREF"+l.toString()),p}switch(e.type){case"extent":switch(t){case"xmin":case"xmax":case"ymin":case"ymax":case"zmin":case"zmax":case"mmin":case"mmax":var m=e[t];return void 0!==m?m:null;case"type":return"Extent"}break;case"polygon":switch(t){case"rings":return void 0===(r=e.cache._arcadeCacheId)&&(r=++T,e.cache._arcadeCacheId=r),new s(e.rings,e.spatialReference,!0===e.hasZ,!0===e.hasM,r);case"type":return"Polygon"}break;case"point":switch(t){case"x":case"y":case"z":case"m":return void 0!==e[t]?e[t]:null;case"type":return"Point"}break;case"polyline":switch(t){case"paths":return void 0===(r=e.cache._arcadeCacheId)&&(r=++T,e.cache._arcadeCacheId=r),new s(e.paths,e.spatialReference,!0===e.hasZ,!0===e.hasM,r);case"type":return"Polyline"}break;case"multipoint":switch(t){case"points":return void 0===(r=e.cache._arcadeCacheId)&&(r=++T,e.cache._arcadeCacheId=r),new u(e.points,e.spatialReference,!0===e.hasZ,!0===e.hasM,r,1);case"type":return"Multipoint"}}throw new Error(c.nodeErrorMessage(n,"RUNTIME","PROPERTYNOTFOUND"))}function k(e,t){var n;try{var r=t.name.toLowerCase();if(null!==e.localScope&&void 0!==e.localScope[r])return!0===(n=e.localScope[r]).valueset||(n.value=C(e,n.node),n.valueset=!0),n.value;if(void 0!==e.globalScope[r])return!0===(n=e.globalScope[r]).valueset||(n.value=C(e,n.node),n.valueset=!0),n.value;throw new Error(c.nodeErrorMessage(t,"RUNTIME","VARIABLENOTFOUND"))}catch(e){throw e}}var M={};function F(e){return null==e?"":l.isArray(e)||l.isImmutableArray(e)?"Array":l.isDate(e)?"Date":l.isString(e)?"String":l.isBoolean(e)?"Boolean":l.isNumber(e)?"Number":e instanceof r?"Attachment":e instanceof n?"Portal":e instanceof i?"Dictionary":e instanceof a?"Feature":e instanceof S?"Point":e instanceof w?"Polygon":e instanceof N?"Polyline":e instanceof b?"Multipoint":e instanceof y?"Extent":l.isFunctionParameter(e)?"Function":l.isFeatureSet(e)?"FeatureSet":l.isFeatureSetCollection(e)?"FeatureSetCollection":e===l.voidOperation?"":"number"==typeof e&&isNaN(e)?"Number":"Unrecognised Type"}function P(e,t){var n=e.length,r=Math.floor(n/2);return 0===n?[]:1===n?[e[0]]:function(e,t,n){for(var r=[];e.length>0||t.length>0;)if(e.length>0&&t.length>0){var i=n(e[0],t[0]);isNaN(i)&&(i=0),i<=0?(r.push(e[0]),e=e.slice(1)):(r.push(t[0]),t=t.slice(1))}else e.length>0?(r.push(e[0]),e=e.slice(1)):t.length>0&&(r.push(t[0]),t=t.slice(1));return r}(P(e.slice(0,r),t),P(e.slice(r,n),t),t)}function L(e,t,n){try{var r=e.body;if(n.length!==e.params.length)throw new Error("Invalid Parameter calls to function.");for(var i=0;i<n.length;i++)t.localScope[e.params[i].name.toLowerCase()]={value:n[i],valueset:!0,node:null};var a=C(t,r);if(a instanceof l.ReturnResult)return a.value;if(a===l.breakResult)throw new Error("Cannot Break from a Function");if(a===l.continueResult)throw new Error("Cannot Continue from a Function");return a instanceof l.ImplicitResult?a.value:a}catch(e){throw e}}function D(e,t,n){return I(e,t,(function(t,r,i){var a={spatialReference:e.spatialReference,globalScope:e.globalScope,depthCounter:e.depthCounter+1,console:e.console,lrucache:e.lrucache,localScope:{}};if(a.depthCounter>64)throw new Error("Exceeded maximum function depth");return L(n,a,i)}))}function U(e){return function(){var t={spatialReference:e.context.spatialReference,console:e.context.console,lrucache:e.context.lrucache,localScope:{},depthCounter:e.context.depthCounter+1,globalScope:e.context.globalScope};if(t.depthCounter>64)throw new Error("Exceeded maximum function depth");return L(e.definition,t,arguments)}}for(var _ in f.registerFunctions(M,I),g.registerFunctions(M,I),h.registerFunctions(M,I),p.registerFunctions(M,I),d.registerFunctions(M,I),m.registerFunctions(M,I),M.typeof=function(e,t){return I(e,t,(function(e,t,n){l.pcCheck(n,1,1);var r=F(n[0]);if("Unrecognised Type"===r)throw new Error("Unrecognised Type");return r}))},M.iif=function(e,t){try{l.pcCheck(null===t.arguments?[]:t.arguments,3,3);var n=C(e,t.arguments[0]);if(!1===l.isBoolean(n))throw new Error("IF Function must have a boolean test condition");var r=C(e,t.arguments[1]),i=C(e,t.arguments[2]);return!0===n?r:i}catch(e){throw e}},M.decode=function(e,t){try{if(t.arguments.length<2)throw new Error("Missing Parameters");if(2===t.arguments.length)return C(e,t.arguments[1]);if((t.arguments.length-1)%2==0)throw new Error("Must have a default value result.");return function e(t,n,r,i){try{var a=C(t,n.arguments[r]);if(l.equalityTest(a,i))return C(t,n.arguments[r+1]);var o=n.arguments.length-r;return 1===o?C(t,n.arguments[r]):2===o?null:3===o?C(t,n.arguments[r+2]):e(t,n,r+2,i)}catch(e){throw e}}(e,t,1,C(e,t.arguments[0]))}catch(e){throw e}},M.when=function(e,t){try{if(t.arguments.length<3)throw new Error("Missing Parameters");if(t.arguments.length%2==0)throw new Error("Must have a default value result.");var n=C(e,t.arguments[0]);if(!1===l.isBoolean(n))throw new Error("WHEN needs boolean test conditions");return function e(t,n,r,i){try{if(!0===i)return C(t,n.arguments[r+1]);if(3==n.arguments.length-r)return C(t,n.arguments[r+2]);var a=C(t,n.arguments[r+2]);if(!1===l.isBoolean(a))throw new Error("WHEN needs boolean test conditions");return e(t,n,r+2,a)}catch(e){throw e}}(e,t,0,n)}catch(e){throw e}},M.top=function(e,t){return I(e,t,(function(e,t,n){if(l.pcCheck(n,2,2),l.isArray(n[0]))return l.toNumber(n[1])>=n[0].length?n[0].slice(0):n[0].slice(0,l.toNumber(n[1]));if(l.isImmutableArray(n[0]))return l.toNumber(n[1])>=n[0].length()?n[0].slice(0):n[0].slice(0,l.toNumber(n[1]));throw new Error("Top cannot accept this parameter type")}))},M.first=function(e,t){return I(e,t,(function(e,t,n){return l.pcCheck(n,1,1),l.isArray(n[0])?0===n[0].length?null:n[0][0]:l.isImmutableArray(n[0])?0===n[0].length()?null:n[0].get(0):null}))},M.sort=function(e,t){return I(e,t,(function(e,t,n){l.pcCheck(n,1,2);var r=n[0];if(l.isImmutableArray(r)&&(r=r.toArray()),!1===l.isArray(r))throw new Error("Illegal Argument");if(n.length>1){if(!1===l.isFunctionParameter(n[1]))throw new Error("Illegal Argument");var i=r,a=U(n[1]);return P(i,(function(e,t){return a(e,t)}))}if(0===(i=r).length)return[];for(var o={},s=0;s<i.length;s++){var u=F(i[s]);""!==u&&(o[u]=!0)}if(!0===o.Array||!0===o.Dictionary||!0===o.Feature||!0===o.Point||!0===o.Polygon||!0===o.Polyline||!0===o.Multipoint||!0===o.Extent||!0===o.Function)return i.slice(0);var c=0,f="";for(var p in o)c++,f=p;return c>1||"String"===f?P(i,(function(e,t){if(null==e||e===l.voidOperation)return null==t||t===l.voidOperation?0:1;if(null==t||t===l.voidOperation)return-1;var n=l.toString(e),r=l.toString(t);return n<r?-1:n===r?0:1})):"Number"===f?P(i,(function(e,t){return e-t})):"Boolean"===f?P(i,(function(e,t){return e===t?0:t?-1:1})):"Date"===f?P(i,(function(e,t){return t-e})):i.slice(0)}))},M)M[_]={value:new l.NativeFunction(M[_]),valueset:!0,node:null};var G=function(){};(G.prototype=M).infinity={value:Number.POSITIVE_INFINITY,valueset:!0,node:null},G.prototype.pi={value:Math.PI,valueset:!0,node:null};var B={fixSpatialReference:l.fixSpatialReference,parseArguments:x,standardFunction:I};function j(e){}t.functionHelper=B,t.extend=function(e){for(var t={mode:"sync",compiled:!1,functions:{},signatures:[],standardFunction:I,evaluateIdentifier:k,arcadeCustomFunctionHandler:U},n=0;n<e.length;n++)e[n].registerFunctions(t);for(var r in t.functions)M[r]={value:new l.NativeFunction(t.functions[r]),valueset:!0,node:null},G.prototype[r]=M[r];for(n=0;n<t.signatures.length;n++)c.addFunctionDeclaration(t.signatures[n],"async")},t.executeScript=function(e,t){var n=t.spatialReference;null==n&&(n=new E({wkid:102100}));var r=C({spatialReference:n,globalScope:function(e,t){var n=new G;e||(e={}),t||(t={});var r=new i({newline:"\n",tab:"\t",singlequote:"'",doublequote:'"',forwardslash:"/",backwardslash:"\\"});for(var o in r.immutable=!1,n.textformatting={value:r,valueset:!0,node:null},t)n[o]={value:new l.NativeFunction(t[o]),native:!0,valueset:!0,node:null};for(var o in e)e[o]&&"esri.Graphic"===e[o].declaredClass?n[o]={value:a.createFromGraphic(e[o]),valueset:!0,node:null}:n[o]={value:e[o],valueset:!0,node:null};return n}(t.vars,t.customfunctions),localScope:null,console:t.console?t.console:j,lrucache:t.lrucache,depthCounter:1},e.body[0].body);if(r instanceof l.ReturnResult&&(r=r.value),r instanceof l.ImplicitResult&&(r=r.value),r===l.voidOperation&&(r=null),r===l.breakResult)throw new Error("Cannot return BREAK");if(r===l.continueResult)throw new Error("Cannot return CONTINUE");if(r instanceof o)throw new Error("Cannot return FUNCTION");if(r instanceof l.NativeFunction)throw new Error("Cannot return FUNCTION");return r},t.extractFieldLiterals=function(e,t){return void 0===t&&(t=!1),c.findFieldLiterals(e)},t.validateScript=function(e,t){return c.validateScript(e,t,"simple")},t.referencesMember=function(e,t){return c.referencesMember(e,t)},t.referencesFunction=function(e,t){return c.referencesFunction(e,t)},t.findFunctionCalls=function(e){return c.findFunctionCalls(e)}}.apply(null,r))||(e.exports=i)},1931:function(e,t,n){var r,i;r=[n.dj.c(e.i),t,n(1195),n(1932)],void 0===(i=function(e,t,n,r){Object.defineProperty(t,"__esModule",{value:!0}),t.parseScript=function(e,t){void 0===t&&(t=[]);var i=r.parse("function _() { "+e+"\n}");if(null===i.body||void 0===i.body)throw new Error("No formula provided.");if(0===i.body.length)throw new Error("No formula provided.");if(0===i.body.length)throw new Error("No formula provided.");if("BlockStatement"!==i.body[0].body.type)throw new Error("Invalid formula content.");var a=n.validateLanguage(i);if(""!==a)throw new Error(a);return n.findScriptDependencies(i,t),i},t.scriptCheck=function(e,t,i,a,o){var s=[];try{var u=r.parse("function _() { "+e+"\n}",{tolerant:!0,loc:!0}),l=u.errors;if(l.length>0)for(var c=0;c<l.length;c++)s.push({line:l[c].lineNumber,character:l[c].column,reason:l[c].description});for(var f=n.checkScript(u,t,i,a,o),p=0;p<f.length;p++)s.push(f[p])}catch(t){try{"Unexpected token }"===t.description?(t.index=("function _() { "+e+"\n}").length-1,s.push({line:t.lineNumber,character:t.column,reason:"Unexpected end of script"})):s.push({line:t.lineNumber,character:t.column,reason:t.description})}catch(e){}}return s},t.extractFieldLiterals=function(e,t){return void 0===t&&(t=!1),n.findFieldLiterals(e)},t.validateScript=function(e,t,r){return n.validateScript(e,t,r)},t.referencesMember=function(e,t){return n.referencesMember(e,t)},t.referencesFunction=function(e,t){return n.referencesFunction(e,t)}}.apply(null,r))||(e.exports=i)},1932:function(e,t,n){var r,i,a;!function(n,o){"use strict";i=[t],void 0===(a="function"==typeof(r=function(e){var t,n,r,i,a,o,s,u,l,c,f,p,m,h,d,g,y;function v(e,t){if(!e)throw new Error("ASSERT: "+t)}function b(e){return e>=48&&e<=57}function S(e){return"0123456789abcdefABCDEF".indexOf(e)>=0}function w(e){return"01234567".indexOf(e)>=0}function N(e){return 32===e||9===e||11===e||12===e||160===e||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0}function E(e){return 10===e||13===e||8232===e||8233===e}function x(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||92===e||e>=128&&u.NonAsciiIdentifierStart.test(String.fromCharCode(e))}function I(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||92===e||e>=128&&u.NonAsciiIdentifierPart.test(String.fromCharCode(e))}function C(e,t,n,r,i){var a;v("number"==typeof n,"Comment must have valid position"),g.lastCommentStart>=n||(g.lastCommentStart=n,a={type:e,value:t},y.range&&(a.range=[n,r]),y.loc&&(a.loc=i),y.comments.push(a),y.attachComment&&(y.leadingComments.push(a),y.trailingComments.push(a)))}function O(e){var t,n,r,i;for(t=f-e,n={start:{line:p,column:f-m-e}};f<h;)if(r=l.charCodeAt(f),++f,E(r))return y.comments&&(i=l.slice(t+e,f-1),n.end={line:p,column:f-m-1},C("Line",i,t,f-1,n)),13===r&&10===l.charCodeAt(f)&&++f,++p,void(m=f);y.comments&&(i=l.slice(t+e,f),n.end={line:p,column:f-m},C("Line",i,t,f,n))}function A(){var e,t,n,r;for(y.comments&&(e=f-2,t={start:{line:p,column:f-m-2}});f<h;)if(E(n=l.charCodeAt(f)))13===n&&10===l.charCodeAt(f+1)&&++f,++p,++f,m=f,f>=h&&W();else if(42===n){if(47===l.charCodeAt(f+1))return++f,++f,void(y.comments&&(r=l.slice(e+2,f-2),t.end={line:p,column:f-m},C("Block",r,e,f,t)));++f}else++f;W()}function T(){var e,t;for(t=0===f;f<h;)if(N(e=l.charCodeAt(f)))++f;else if(E(e))++f,13===e&&10===l.charCodeAt(f)&&++f,++p,m=f,t=!0;else if(47===e)if(47===(e=l.charCodeAt(f+1)))++f,++f,O(2),t=!0;else{if(42!==e)break;++f,++f,A()}else if(t&&45===e){if(45!==l.charCodeAt(f+1)||62!==l.charCodeAt(f+2))break;f+=3,O(3)}else{if(60!==e)break;if("!--"!==l.slice(f+1,f+4))break;++f,++f,++f,++f,O(4)}}function R(e){var t,n,r,i=0;for(n="u"===e?4:2,t=0;t<n;++t){if(!(f<h&&S(l[f])))return"";r=l[f++],i=16*i+"0123456789abcdef".indexOf(r.toLowerCase())}return String.fromCharCode(i)}function k(){var e,t,n,r;for(t=0,"}"===(e=l[f])&&W();f<h&&S(e=l[f++]);)t=16*t+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||"}"!==e)&&W(),t<=65535?String.fromCharCode(t):(n=55296+(t-65536>>10),r=56320+(t-65536&1023),String.fromCharCode(n,r))}function M(){var e,t;for(e=l.charCodeAt(f++),t=String.fromCharCode(e),92===e&&(117!==l.charCodeAt(f)&&W(),++f,(e=R("u"))&&"\\"!==e&&x(e.charCodeAt(0))||W(),t=e);f<h&&I(e=l.charCodeAt(f));)++f,t+=String.fromCharCode(e),92===e&&(t=t.substr(0,t.length-1),117!==l.charCodeAt(f)&&W(),++f,(e=R("u"))&&"\\"!==e&&I(e.charCodeAt(0))||W(),t+=e);return t}function F(){var e,n,r,i,a=f,o=l.charCodeAt(f),s=l[f];switch(o){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++f,y.tokenize&&(40===o?y.openParenToken=y.tokens.length:123===o&&(y.openCurlyToken=y.tokens.length)),{type:t.Punctuator,value:String.fromCharCode(o),lineNumber:p,lineStart:m,start:a,end:f};default:if(61===(e=l.charCodeAt(f+1)))switch(o){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return f+=2,{type:t.Punctuator,value:String.fromCharCode(o)+String.fromCharCode(e),lineNumber:p,lineStart:m,start:a,end:f};case 33:case 61:return f+=2,61===l.charCodeAt(f)&&++f,{type:t.Punctuator,value:l.slice(a,f),lineNumber:p,lineStart:m,start:a,end:f}}}return">>>="===(i=l.substr(f,4))?{type:t.Punctuator,value:i,lineNumber:p,lineStart:m,start:a,end:f+=4}:">>>"===(r=i.substr(0,3))||"<<="===r||">>="===r?{type:t.Punctuator,value:r,lineNumber:p,lineStart:m,start:a,end:f+=3}:s===(n=r.substr(0,2))[1]&&"+-<>&|".indexOf(s)>=0||"=>"===n?{type:t.Punctuator,value:n,lineNumber:p,lineStart:m,start:a,end:f+=2}:"<>=!+-*%&|^/".indexOf(s)>=0?(++f,{type:t.Punctuator,value:s,lineNumber:p,lineStart:m,start:a,end:f}):void W()}function P(){var e,n,r;if(v(b((r=l[f]).charCodeAt(0))||"."===r,"Numeric literal must start with a decimal digit or a decimal point"),n=f,e="","."!==r){if(e=l[f++],r=l[f],"0"===e){if("x"===r||"X"===r)return++f,function(e){for(var n="";f<h&&S(l[f]);)n+=l[f++];return 0===n.length&&W(),x(l.charCodeAt(f))&&W(),{type:t.NumericLiteral,value:parseInt("0x"+n,16),lineNumber:p,lineStart:m,start:e,end:f}}(n);if("b"===r||"B"===r)return++f,function(e){var n,r;for(r="";f<h&&("0"===(n=l[f])||"1"===n);)r+=l[f++];return 0===r.length&&W(),f<h&&(x(n=l.charCodeAt(f))||b(n))&&W(),{type:t.NumericLiteral,value:parseInt(r,2),lineNumber:p,lineStart:m,start:e,end:f}}(n);if("o"===r||"O"===r)return function(e,n){var r,i;for(w(e)?(i=!0,r="0"+l[f++]):(i=!1,++f,r="");f<h&&w(l[f]);)r+=l[f++];return i||0!==r.length||W(),(x(l.charCodeAt(f))||b(l.charCodeAt(f)))&&W(),{type:t.NumericLiteral,value:parseInt(r,8),octal:i,lineNumber:p,lineStart:m,start:n,end:f}}(r,n)}for(;b(l.charCodeAt(f));)e+=l[f++];r=l[f]}if("."===r){for(e+=l[f++];b(l.charCodeAt(f));)e+=l[f++];r=l[f]}if("e"===r||"E"===r)if(e+=l[f++],"+"!==(r=l[f])&&"-"!==r||(e+=l[f++]),b(l.charCodeAt(f)))for(;b(l.charCodeAt(f));)e+=l[f++];else W();return x(l.charCodeAt(f))&&W(),{type:t.NumericLiteral,value:parseFloat(e),lineNumber:p,lineStart:m,start:n,end:f}}function L(){d=null,T(),Z("Regular Expression language structures not supported")}function D(){T(),L()}function U(){var e;return T(),f>=h?{type:t.EOF,lineNumber:p,lineStart:m,start:f,end:f}:x(e=l.charCodeAt(f))?function(){var e,n;return e=f,{type:1===(n=92===l.charCodeAt(f)?M():function(){var e,t;for(e=f++;f<h;){if(92===(t=l.charCodeAt(f)))return f=e,M();if(!I(t))break;++f}return l.slice(e,f)}()).length?t.Identifier:function(e){switch((e=e.toLowerCase()).length){case 2:return"if"===e||"in"===e;case 3:return"var"===e||"for"===e;case 4:return"else"===e;case 5:return"break"===e;case 6:return"return"===e;case 8:return"function"===e.toLowerCase()||"continue"===e;default:return!1}}(n)?t.Keyword:"null"===n.toLowerCase()?t.NullLiteral:"true"===n.toLowerCase()||"false"===n.toLowerCase()?t.BooleanLiteral:t.Identifier,value:n,lineNumber:p,lineStart:m,start:e,end:f}}():40===e||41===e||59===e?F():39===e||34===e?function(){var e,n,r,i,a,o,s,u,c="",d=!1;for(s=p,u=m,v("'"===(e=l[f])||'"'===e,"String literal must starts with a quote"),n=f,++f;f<h;){if((r=l[f++])===e){e="";break}if("\\"===r)if((r=l[f++])&&E(r.charCodeAt(0)))++p,"\r"===r&&"\n"===l[f]&&++f,m=f;else switch(r){case"u":case"x":"{"===l[f]?(++f,c+=k()):(o=f,(a=R(r))?c+=a:(f=o,c+=r));break;case"n":c+="\n";break;case"r":c+="\r";break;case"t":c+="\t";break;case"b":c+="\b";break;case"f":c+="\f";break;case"v":c+="\v";break;default:w(r)?(0!==(i="01234567".indexOf(r))&&(d=!0),f<h&&w(l[f])&&(d=!0,i=8*i+"01234567".indexOf(l[f++]),"0123".indexOf(r)>=0&&f<h&&w(l[f])&&(i=8*i+"01234567".indexOf(l[f++]))),c+=String.fromCharCode(i)):c+=r}else{if(E(r.charCodeAt(0)))break;c+=r}}return""!==e&&W(),{type:t.StringLiteral,value:c,octal:d,startLineNumber:s,startLineStart:u,lineNumber:p,lineStart:m,start:n,end:f}}():46===e?b(l.charCodeAt(f+1))?P():F():b(e)?P():y.tokenize&&47===e?function(){var e,t;if(!(e=y.tokens[y.tokens.length-1]))return D();if("Punctuator"===e.type){if("]"===e.value)return F();if(")"===e.value)return!(t=y.tokens[y.openParenToken-1])||"Keyword"!==t.type||"if"!==t.value.toLowerCase()&&"while"!==t.value.toLowerCase()&&"for"!==t.value.toLowerCase()&&"with"!==t.value.toLowerCase()?F():D();if("}"===e.value){if(y.tokens[y.openCurlyToken-3]&&"Keyword"===y.tokens[y.openCurlyToken-3].type){if(!(t=y.tokens[y.openCurlyToken-4]))return F()}else{if(!y.tokens[y.openCurlyToken-4]||"Keyword"!==y.tokens[y.openCurlyToken-4].type)return F();if(!(t=y.tokens[y.openCurlyToken-5]))return D()}return r.indexOf(t.value)>=0?F():D()}return D()}return"Keyword"===e.type&&"this"!==e.value?D():F()}():F()}function _(){var e,r,i,a;return T(),e={start:{line:p,column:f-m}},r=U(),e.end={line:p,column:f-m},r.type!==t.EOF&&(i=l.slice(r.start,r.end),a={type:n[r.type],value:i,range:[r.start,r.end],loc:e},r.regex&&(a.regex={pattern:r.regex.pattern,flags:r.regex.flags}),y.tokens.push(a)),r}function G(){var e;return f=(e=d).end,p=e.lineNumber,m=e.lineStart,d=void 0!==y.tokens?_():U(),f=e.end,p=e.lineNumber,m=e.lineStart,e}function B(){var e,t,n;e=f,t=p,n=m,d=void 0!==y.tokens?_():U(),f=e,p=t,m=n}function j(){this.line=p,this.column=f-m}function Y(){this.start=new j,this.end=null}function V(e){e.type===t.StringLiteral?this.start={line:e.startLineNumber,column:e.start-e.startLineStart}:this.start={line:e.lineNumber,column:e.start-e.lineStart},this.end=null}function z(){f=d.start,d.type===t.StringLiteral?(p=d.startLineNumber,m=d.startLineStart):(p=d.lineNumber,m=d.lineStart),y.range&&(this.range=[f,0]),y.loc&&(this.loc=new Y)}function q(e){y.range&&(this.range=[e.start,0]),y.loc&&(this.loc=new V(e))}function J(){var e,t,n,r;return e=f,t=p,n=m,T(),r=p!==t,f=e,p=t,m=n,r}function X(e,t,n){var r=new Error("Line "+e+": "+n);return r.index=t,r.lineNumber=e,r.column=t-m+1,r.description=n,r}function Z(e){var t,n;throw t=Array.prototype.slice.call(arguments,1),n=e.replace(/%(\d)/g,(function(e,n){return v(n<t.length,"Message reference must be in range"),t[n]})),X(p,f,n)}function H(e){var t,n,r;if(t=Array.prototype.slice.call(arguments,1),n=e.replace(/%(\d)/g,(function(e,n){return v(n<t.length,"Message reference must be in range"),t[n]})),r=X(p,f,n),!y.errors)throw r;y.errors.push(r)}function K(e,n){var r=s.UnexpectedToken;return e&&(r=n||(e.type===t.EOF?s.UnexpectedEOS:e.type===t.Identifier?s.UnexpectedIdentifier:e.type===t.NumericLiteral?s.UnexpectedNumber:e.type===t.StringLiteral?s.UnexpectedString:s.UnexpectedToken),e.type===t.Keyword&&(e.value,c&&(e.value,0)&&(r=s.StrictReservedWord))),r=r.replace("%0",e?e.value:"ILLEGAL"),e&&"number"==typeof e.lineNumber?X(e.lineNumber,e.start,r):X(p,f,r)}function W(e,t){throw K(e,t)}function $(e,t){var n=K(e,t);if(!y.errors)throw n;y.errors.push(n)}function Q(e){var n=G();n.type===t.Punctuator&&n.value===e||W(n)}function ee(){var e;y.errors?(e=d).type===t.Punctuator&&","===e.value?G():e.type===t.Punctuator&&";"===e.value?(G(),$(e)):$(e,s.UnexpectedToken):Q(",")}function te(e){var n=G();n.type===t.Keyword&&n.value.toLowerCase()===e.toLowerCase()||W(n)}function ne(e){return d.type===t.Punctuator&&d.value===e}function re(e){return d.type===t.Keyword&&d.value.toLowerCase()===e.toLowerCase()}function ie(){var e;59===l.charCodeAt(f)||ne(";")?G():(e=p,T(),p===e&&(d.type===t.EOF||ne("}")||W(d)))}function ae(e){return e.type===i.Identifier||e.type===i.MemberExpression}function oe(e,t){var n,r,i=new z;return n=c,r=Ce(),t&&c&&(e[0].name,0)&&$(t,s.StrictParamName),c=n,i.finishFunctionExpression(null,e,[],r)}function se(){var e,t;return e=c,c=!0,t=oe(Te().params),c=e,t}function ue(){var e,n=new z;return(e=G()).type===t.StringLiteral||e.type===t.NumericLiteral?(c&&e.octal&&$(e,s.StrictOctalLiteral),n.finishLiteral(e)):n.finishIdentifier(e.value)}function le(){var e,n,r,i,a,o=new z;if((e=d).type===t.Identifier)return r=ue(),"get"!==e.value||ne(":")||ne("(")?"set"!==e.value||ne(":")||ne("(")?ne(":")?(G(),i=be(),o.finishProperty("init",r,i,!1,!1)):ne("(")?(i=se(),o.finishProperty("init",r,i,!0,!1)):(i=r,o.finishProperty("init",r,i,!1,!0)):(n=ue(),Q("("),(e=d).type!==t.Identifier?(Q(")"),$(e),i=oe([])):(a=[Ne()],Q(")"),i=oe(a,e)),o.finishProperty("set",n,i,!1,!1)):(n=ue(),Q("("),Q(")"),i=oe([]),o.finishProperty("get",n,i,!1,!1));if(e.type===t.EOF||e.type===t.Punctuator)W(e);else{if(n=ue(),ne(":"))return G(),i=be(),o.finishProperty("init",n,i,!1,!1);if(ne("("))return i=se(),o.finishProperty("init",n,i,!0,!1);W(G())}}function ce(e){var t,n,r,a,u=[],l={},f=String,p=new z;for(!0!==e&&Q("{");!ne("}");)n=(t=le()).key.type===i.Identifier?t.key.name:f(t.key.value),a="init"===t.kind?o.Data:"get"===t.kind?o.Get:o.Set,r="$"+n,Object.prototype.hasOwnProperty.call(l,r)?(l[r]===o.Data?c&&a===o.Data?H(s.StrictDuplicateProperty):a!==o.Data&&H(s.AccessorDataProperty):a===o.Data?H(s.AccessorDataProperty):l[r]&a&&H(s.AccessorGetSet),l[r]|=a):l[r]=a,u.push(t),ne("}")||ee();return Q("}"),p.finishObjectExpression(u)}function fe(){var e,n,r,i;if(ne("("))return function(){var e;return Q("("),ne(")")?(G(),a.ArrowParameterPlaceHolder):(++g.parenthesisCount,e=Se(),Q(")"),e)}();if(ne("["))return function(){var e=[],t=new z;for(Q("[");!ne("]");)ne(",")?(G(),e.push(null)):(e.push(be()),ne("]")||Q(","));return G(),t.finishArrayExpression(e)}();if(ne("{"))return ce();if(e=d.type,i=new z,e===t.Identifier)r=i.finishIdentifier(G().value);else if(e===t.StringLiteral||e===t.NumericLiteral)c&&d.octal&&$(d,s.StrictOctalLiteral),r=i.finishLiteral(G());else if(e===t.Keyword){if(re("function"))return function(){var e,t,n,r,i,a,o,s,u,l=null,f=new z;return te("function"),ne("(")||(e=d,l=Ne(),c||e.value,e.value),a=(i=Te(n)).params,o=i.defaults,t=i.stricted,n=i.firstRestricted,i.message&&(r=i.message),u=c,s=Ce(),c&&n&&W(n,r),c&&t&&$(t,r),c=u,f.finishFunctionExpression(l,a,o,s)}();re("this")?(G(),r=i.finishThisExpression()):W(G())}else e===t.BooleanLiteral?((n=G()).value="true"===n.value.toLowerCase(),r=i.finishLiteral(n)):e===t.NullLiteral?((n=G()).value=null,r=i.finishLiteral(n)):ne("/")||ne("/=")?(r=void 0!==y.tokens?i.finishLiteral(D()):i.finishLiteral(L()),B()):W(G());return r}function pe(){var e=[];if(Q("("),!ne(")"))for(;f<h&&(e.push(be()),!ne(")"));)ee();return Q(")"),e}function me(){return Q("."),function(){var e,n=new z;return function(e){return e.type===t.Identifier||e.type===t.Keyword||e.type===t.BooleanLiteral||e.type===t.NullLiteral}(e=G())||W(e),n.finishIdentifier(e.value)}()}function he(){var e;return Q("["),e=Se(),Q("]"),e}function de(){var e,n,r=d;return e=function(){var e,t,n,r,i=g.allowIn;for(r=d,g.allowIn=!0,e=re("new")?function e(){var t,n,r=new z;return te("new"),t=function(){var t,n,r;for(v(g.allowIn,"callee of new expression always allow in keyword."),r=d,t=re("new")?e():fe();;)if(ne("["))n=he(),t=new q(r).finishMemberExpression("[",t,n);else{if(!ne("."))break;n=me(),t=new q(r).finishMemberExpression(".",t,n)}return t}(),n=ne("(")?pe():[],r.finishNewExpression(t,n)}():fe();;)if(ne("."))n=me(),e=new q(r).finishMemberExpression(".",e,n);else if(ne("("))t=pe(),e=new q(r).finishCallExpression(e,t);else{if(!ne("["))break;n=he(),e=new q(r).finishMemberExpression("[",e,n)}return g.allowIn=i,e}(),d.type===t.Punctuator&&(!ne("++")&&!ne("--")||J()||(c&&e.type===i.Identifier&&(e.name,0)&&H(s.StrictLHSPostfix),ae(e)||H(s.InvalidLHSInAssignment),n=G(),e=new q(r).finishPostfixExpression(n.value,e))),e}function ge(){var e,n,r;return d.type!==t.Punctuator&&d.type!==t.Keyword?n=de():ne("++")||ne("--")?(r=d,e=G(),n=ge(),c&&n.type===i.Identifier&&(n.name,0)&&H(s.StrictLHSPrefix),ae(n)||H(s.InvalidLHSInAssignment),n=new q(r).finishUnaryExpression(e.value,n)):ne("+")||ne("-")||ne("~")||ne("!")?(r=d,e=G(),n=ge(),n=new q(r).finishUnaryExpression(e.value,n)):re("delete")||re("void")||re("typeof")?(r=d,e=G(),n=ge(),n=new q(r).finishUnaryExpression(e.value,n),c&&"delete"===n.operator&&n.argument.type===i.Identifier&&H(s.StrictDelete)):n=de(),n}function ye(e,n){var r=0;if(e.type!==t.Punctuator&&e.type!==t.Keyword)return 0;switch(e.value){case"||":r=1;break;case"&&":r=2;break;case"|":r=3;break;case"^":r=4;break;case"&":r=5;break;case"==":case"!=":case"===":case"!==":r=6;break;case"<":case">":case"<=":case">=":case"instanceof":r=7;break;case"in":r=n?7:0;break;case"<<":case">>":case">>>":r=8;break;case"+":case"-":r=9;break;case"*":case"/":case"%":r=11}return r}function ve(e){var t,n,r,a,o,u,l;for(a=[],o=[],u=0,l={paramSet:{}},t=0,n=e.length;t<n;t+=1)if((r=e[t]).type===i.Identifier)a.push(r),o.push(null),Oe(l,r,r.name);else{if(r.type!==i.AssignmentExpression)return null;a.push(r.left),o.push(r.right),++u,Oe(l,r.left,r.left.name)}return l.message===s.StrictParamDupe&&W(c?l.stricted:l.firstRestricted,l.message),0===u&&(o=[]),{params:a,defaults:o,rest:null,stricted:l.stricted,firstRestricted:l.firstRestricted,message:l.message}}function be(){var e,n,r,o,u,l,f;return e=g.parenthesisCount,l=d,n=d,(r=function(){var e,t,n,r,i;return i=d,(e=function(){var e,t,n,r,i,o,s,u,l,c;if(e=d,(l=ge())===a.ArrowParameterPlaceHolder)return l;if(0===(i=ye(r=d,g.allowIn)))return l;for(r.prec=i,G(),t=[e,d],o=[l,r,s=ge()];(i=ye(d,g.allowIn))>0;){for(;o.length>2&&i<=o[o.length-2].prec;)s=o.pop(),u=o.pop().value,l=o.pop(),t.pop(),n=new q(t[t.length-1]).finishBinaryExpression(u,l,s),o.push(n);(r=G()).prec=i,o.push(r),t.push(d),n=ge(),o.push(n)}for(n=o[c=o.length-1],t.pop();c>1;)n=new q(t.pop()).finishBinaryExpression(o[c-1].value,o[c-2],n),c-=2;return n}())===a.ArrowParameterPlaceHolder||ne("?")&&(G(),t=g.allowIn,g.allowIn=!0,n=be(),g.allowIn=t,Q(":"),r=be(),e=new q(i).finishConditionalExpression(e,n,r)),e}())!==a.ArrowParameterPlaceHolder&&!ne("=>")||g.parenthesisCount!==e&&g.parenthesisCount!==e+1||(r.type===i.Identifier||r.type===i.AssignmentExpression?u=ve([r]):r.type===i.SequenceExpression?u=ve(r.expressions):r===a.ArrowParameterPlaceHolder&&(u=ve([])),!u)?(d.type!==t.Punctuator||"="!==(f=d.value)&&"*="!==f&&"/="!==f&&"%="!==f&&"+="!==f&&"-="!==f&&"<<="!==f&&">>="!==f&&">>>="!==f&&"&="!==f&&"^="!==f&&"|="!==f||(ae(r)||H(s.InvalidLHSInAssignment),c&&r.type===i.Identifier&&(r.name,0)&&$(n,s.StrictLHSAssignment),n=G(),o=be(),r=new q(l).finishAssignmentExpression(n.value,r,o)),r):function(e,t){var n,r;return Q("=>"),n=c,r=ne("{")?Ce():be(),c&&e.firstRestricted&&W(e.firstRestricted,e.message),c&&e.stricted&&$(e.stricted,e.message),c=n,t.finishArrowFunctionExpression(e.params,e.defaults,r,r.type!==i.BlockStatement)}(u,new q(l))}function Se(){var e,t,n=d;if(e=be(),ne(",")){for(t=[e];f<h&&ne(",");)G(),t.push(be());e=new q(n).finishSequenceExpression(t)}return e}function we(e){var t,n=new z;return!0!==e&&Q("{"),t=function(){for(var e,t=[];f<h&&!ne("}")&&void 0!==(e=ke());)t.push(e);return t}(),Q("}"),n.finishBlockStatement(t)}function Ne(){var e,n=new z;return(e=G()).type!==t.Identifier&&(c&&e.type===t.Keyword&&(e.value,0)?$(e,s.StrictReservedWord):W(e)),n.finishIdentifier(e.value)}function Ee(e){var t,n=null,r=new z;return t=Ne(),c&&(t.name,0)&&H(s.StrictVarName),"const"===e?(Q("="),n=be()):ne("=")&&(G(),n=be()),r.finishVariableDeclarator(t,n)}function xe(e){var t=[];do{if(t.push(Ee(e)),!ne(","))break;G()}while(f<h);return t}function Ie(e){var n,r,a,o,u,c,h,y,v,b=d.type;if(b===t.EOF&&W(d),b===t.Punctuator&&"{"===d.value){if(e){Q("{");var S=(v=d,u=f,c=p,h=m,G(),y=ne(":"),d=v,f=u,p=c,m=h,y);return d.type!==t.Identifier&&d.type!==t.StringLiteral||!S?we(!0):ce(!0)}return ce()}if(o=new z,b===t.Punctuator)switch(d.value){case";":return function(){var e=new z;return Q(";"),e.finishEmptyStatement()}();case"(":return function(e){var t=Se();return ie(),e.finishExpressionStatement(t)}(o)}else if(b===t.Keyword)switch(d.value.toLowerCase()){case"break":return function(e){var n,r=null;return te("break"),59===l.charCodeAt(f)?(G(),g.inIteration||g.inSwitch||Z(s.IllegalBreak),e.finishBreakStatement(null)):J()?(g.inIteration||g.inSwitch||Z(s.IllegalBreak),e.finishBreakStatement(null)):(d.type===t.Identifier&&(n="$"+(r=Ne()).name,Object.prototype.hasOwnProperty.call(g.labelSet,n)||Z(s.UnknownLabel,r.name)),ie(),null!==r||g.inIteration||g.inSwitch||Z(s.IllegalBreak),e.finishBreakStatement(r))}(o);case"continue":return function(e){var n,r=null;return te("continue"),59===l.charCodeAt(f)?(G(),g.inIteration||Z(s.IllegalContinue),e.finishContinueStatement(null)):J()?(g.inIteration||Z(s.IllegalContinue),e.finishContinueStatement(null)):(d.type===t.Identifier&&(n="$"+(r=Ne()).name,Object.prototype.hasOwnProperty.call(g.labelSet,n)||Z(s.UnknownLabel,r.name)),ie(),null!==r||g.inIteration||Z(s.IllegalContinue),e.finishContinueStatement(r))}(o);case"for":return function(e){var t,n,r,i,a,o,u,l=g.allowIn;return t=n=r=null,te("for"),Q("("),ne(";")?G():(re("var")?(g.allowIn=!1,t=function(){var e,t,n=new z;return e=G(),t=xe(),n.finishVariableDeclaration(t,e.value)}(),g.allowIn=l,1===t.declarations.length&&re("in")&&(G(),i=t,a=Se(),t=null)):(g.allowIn=!1,t=Se(),g.allowIn=l,re("in")&&(ae(t)||H(s.InvalidLHSInForIn),G(),i=t,a=Se(),t=null)),void 0===i&&Q(";")),void 0===i&&(ne(";")||(n=Se()),Q(";"),ne(")")||(r=Se())),Q(")"),u=g.inIteration,g.inIteration=!0,o=Ie(!0),g.inIteration=u,void 0===i?e.finishForStatement(t,n,r,o):e.finishForInStatement(i,a,o)}(o);case"function":return Re();case"if":return function(e){var t,n,r;return te("if"),Q("("),t=Se(),Q(")"),n=Ie(!0),re("else")?(G(),r=Ie(!0)):r=null,e.finishIfStatement(t,n,r)}(o);case"return":return function(e){var n=null;return te("return"),g.inFunctionBody||H(s.IllegalReturn),32===l.charCodeAt(f)&&x(l.charCodeAt(f+1))?(n=Se(),ie(),e.finishReturnStatement(n)):J()?e.finishReturnStatement(null):(ne(";")||ne("}")||d.type===t.EOF||(n=Se()),ie(),e.finishReturnStatement(n))}(o);case"var":return function(e){var t;return te("var"),t=xe(),ie(),e.finishVariableDeclaration(t,"var")}(o)}return(n=Se()).type===i.Identifier&&ne(":")?(G(),a="$"+n.name,Object.prototype.hasOwnProperty.call(g.labelSet,a)&&Z(s.Redeclaration,"Label",n.name),g.labelSet[a]=!0,r=Ie(!1),delete g.labelSet[a],o.finishLabeledStatement(n,r)):(ie(),o.finishExpressionStatement(n))}function Ce(){var e,n,r,a,o,u,p,m,y=[],v=new z;for(Q("{");f<h&&d.type===t.StringLiteral&&(n=d,e=ke(),y.push(e),e.expression.type===i.Literal);)"use strict"===l.slice(n.start+1,n.end-1)?(c=!0,r&&$(r,s.StrictOctalLiteral)):!r&&n.octal&&(r=n);for(a=g.labelSet,o=g.inIteration,u=g.inSwitch,p=g.inFunctionBody,m=g.parenthesizedCount,g.labelSet={},g.inIteration=!1,g.inSwitch=!1,g.inFunctionBody=!0,g.parenthesizedCount=0;f<h&&!ne("}")&&void 0!==(e=ke());)y.push(e);return Q("}"),g.labelSet=a,g.inIteration=o,g.inSwitch=u,g.inFunctionBody=p,g.parenthesizedCount=m,v.finishBlockStatement(y)}function Oe(e,t,n){var r="$"+n;c?Object.prototype.hasOwnProperty.call(e.paramSet,r)&&(e.stricted=t,e.message=s.StrictParamDupe):e.firstRestricted||Object.prototype.hasOwnProperty.call(e.paramSet,r)&&(e.firstRestricted=t,e.message=s.StrictParamDupe),e.paramSet[r]=!0}function Ae(e){var t,n,r;return t=d,n=Ne(),Oe(e,t,t.value),ne("=")&&(G(),r=be(),++e.defaultCount),e.params.push(n),e.defaults.push(r),!ne(")")}function Te(e){var t;if(t={params:[],defaultCount:0,defaults:[],firstRestricted:e},Q("("),!ne(")"))for(t.paramSet={};f<h&&Ae(t);)Q(",");return Q(")"),0===t.defaultCount&&(t.defaults=[]),{params:t.params,defaults:t.defaults,stricted:t.stricted,firstRestricted:t.firstRestricted,message:t.message}}function Re(){var e,t,n,r,i,a,o,s,u,l,f=new z;return te("function"),i=d,e=Ne(),c||i.value,i.value,t=(o=Te(s)).params,n=o.defaults,a=o.stricted,s=o.firstRestricted,o.message&&(u=o.message),l=c,r=Ce(),c&&s&&W(s,u),c&&a&&$(a,u),c=l,f.finishFunctionDeclaration(e,t,n,r)}function ke(){return d.type===t.Keyword?(d.value,"function"===d.value.toLowerCase()?Re():Ie(!1)):d.type!==t.EOF?Ie(!1):void 0}function Me(){var e,n;return T(),B(),n=new z,c=!1,e=function(){for(var e,n,r,a=[];f<h&&(n=d).type===t.StringLiteral&&(e=ke(),a.push(e),e.expression.type===i.Literal);)"use strict"===l.slice(n.start+1,n.end-1)?(c=!0,r&&$(r,s.StrictOctalLiteral)):!r&&n.octal&&(r=n);for(;f<h&&void 0!==(e=ke());)a.push(e);return a}(),n.finishProgram(e)}function Fe(){var e,t,n,r=[];for(e=0;e<y.tokens.length;++e)n={type:(t=y.tokens[e]).type,value:t.value},t.regex&&(n.regex={pattern:t.regex.pattern,flags:t.regex.flags}),y.range&&(n.range=t.range),y.loc&&(n.loc=t.loc),r.push(n);y.tokens=r}(n={})[(t={BooleanLiteral:1,EOF:2,Identifier:3,Keyword:4,NullLiteral:5,NumericLiteral:6,Punctuator:7,StringLiteral:8,RegularExpression:9}).BooleanLiteral]="Boolean",n[t.EOF]="<end>",n[t.Identifier]="Identifier",n[t.Keyword]="Keyword",n[t.NullLiteral]="Null",n[t.NumericLiteral]="Numeric",n[t.Punctuator]="Punctuator",n[t.StringLiteral]="String",n[t.RegularExpression]="RegularExpression",r=["(","{","[","in","typeof","instanceof","new","return","case","delete","throw","void","=","+=","-=","*=","/=","%=","<<=",">>=",">>>=","&=","|=","^=",",","+","-","*","/","%","++","--","<<",">>",">>>","&","|","^","!","~","&&","||","?",":","===","==",">=","<=","<",">","!=","!=="],i={AssignmentExpression:"AssignmentExpression",ArrayExpression:"ArrayExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DoWhileStatement:"DoWhileStatement",EmptyStatement:"EmptyStatement",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",Literal:"Literal",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",ObjectExpression:"ObjectExpression",Program:"Program",Property:"Property",ReturnStatement:"ReturnStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator"},a={ArrowParameterPlaceHolder:{type:"ArrowParameterPlaceHolder"}},o={Data:1,Get:2,Set:4},s={UnexpectedToken:"Unexpected token %0",UnexpectedNumber:"Unexpected number",UnexpectedString:"Unexpected string",UnexpectedIdentifier:"Unexpected identifier",UnexpectedReserved:"Unexpected reserved word",UnexpectedEOS:"Unexpected end of input",NewlineAfterThrow:"Illegal newline after throw",InvalidRegExp:"Invalid regular expression",UnterminatedRegExp:"Invalid regular expression: missing /",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",MultipleDefaultsInSwitch:"More than one default clause in switch statement",NoCatchOrFinally:"Missing catch or finally after try",UnknownLabel:"Undefined label '%0'",Redeclaration:"%0 '%1' has already been declared",IllegalContinue:"Illegal continue statement",IllegalBreak:"Illegal break statement",IllegalReturn:"Illegal return statement",StrictModeWith:"Strict mode code may not include a with statement",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictDuplicateProperty:"Duplicate data property in object literal not allowed in strict mode",AccessorDataProperty:"Object literal may not have data and accessor property with the same name",AccessorGetSet:"Object literal may not have multiple get/set accessors with the same name",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictReservedWord:"Use of future reserved word in strict mode"},u={NonAsciiIdentifierStart:new RegExp("[ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԯԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠ-ࢲऄ-हऽॐक़-ॡॱ-ঀঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛸᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤞᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々-〇〡-〩〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚝꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞭꞰꞱꟷ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꧠ-ꧤꧦ-ꧯꧺ-ꧾꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꩾ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭟꭤꭥꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]"),NonAsciiIdentifierPart:new RegExp("[ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮ̀-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁ҃-҇Ҋ-ԯԱ-Ֆՙա-և֑-ׇֽֿׁׂׅׄא-תװ-ײؐ-ؚؠ-٩ٮ-ۓە-ۜ۟-۪ۨ-ۼۿܐ-݊ݍ-ޱ߀-ߵߺࠀ-࠭ࡀ-࡛ࢠ-ࢲࣤ-ॣ०-९ॱ-ঃঅ-ঌএঐও-নপ-রলশ-হ়-ৄেৈো-ৎৗড়ঢ়য়-ৣ০-ৱਁ-ਃਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹ਼ਾ-ੂੇੈੋ-੍ੑਖ਼-ੜਫ਼੦-ੵઁ-ઃઅ-ઍએ-ઑઓ-નપ-રલળવ-હ઼-ૅે-ૉો-્ૐૠ-ૣ૦-૯ଁ-ଃଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହ଼-ୄେୈୋ-୍ୖୗଡ଼ଢ଼ୟ-ୣ୦-୯ୱஂஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹா-ூெ-ைொ-்ௐௗ௦-௯ఀ-ఃఅ-ఌఎ-ఐఒ-నప-హఽ-ౄె-ైొ-్ౕౖౘౙౠ-ౣ౦-౯ಁ-ಃಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹ಼-ೄೆ-ೈೊ-್ೕೖೞೠ-ೣ೦-೯ೱೲഁ-ഃഅ-ഌഎ-ഐഒ-ഺഽ-ൄെ-ൈൊ-ൎൗൠ-ൣ൦-൯ൺ-ൿංඃඅ-ඖක-නඳ-රලව-ෆ්ා-ුූෘ-ෟ෦-෯ෲෳก-ฺเ-๎๐-๙ກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ູົ-ຽເ-ໄໆ່-ໍ໐-໙ໜ-ໟༀ༘༙༠-༩༹༵༷༾-ཇཉ-ཬཱ-྄྆-ྗྙ-ྼ࿆က-၉ၐ-ႝႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚ፝-፟ᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛸᜀ-ᜌᜎ-᜔ᜠ-᜴ᝀ-ᝓᝠ-ᝬᝮ-ᝰᝲᝳក-៓ៗៜ៝០-៩᠋-᠍᠐-᠙ᠠ-ᡷᢀ-ᢪᢰ-ᣵᤀ-ᤞᤠ-ᤫᤰ-᤻᥆-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉ᧐-᧙ᨀ-ᨛᨠ-ᩞ᩠-᩿᩼-᪉᪐-᪙ᪧ᪰-᪽ᬀ-ᭋ᭐-᭙᭫-᭳ᮀ-᯳ᰀ-᰷᱀-᱉ᱍ-ᱽ᳐-᳔᳒-ᳶ᳸᳹ᴀ-᷵᷼-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼ‌‍‿⁀⁔ⁱⁿₐ-ₜ⃐-⃥⃜⃡-⃰ℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯ⵿-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⷠ-ⷿⸯ々-〇〡-〯〱-〵〸-〼ぁ-ゖ゙゚ゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘫꙀ-꙯ꙴ-꙽ꙿ-ꚝꚟ-꛱ꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞭꞰꞱꟷ-ꠧꡀ-ꡳꢀ-꣄꣐-꣙꣠-ꣷꣻ꤀-꤭ꤰ-꥓ꥠ-ꥼꦀ-꧀ꧏ-꧙ꧠ-ꧾꨀ-ꨶꩀ-ꩍ꩐-꩙ꩠ-ꩶꩺ-ꫂꫛ-ꫝꫠ-ꫯꫲ-꫶ꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭟꭤꭥꯀ-ꯪ꯬꯭꯰-꯹가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻ︀-️︠-︭︳︴﹍-﹏ﹰ-ﹴﹶ-ﻼ０-９Ａ-Ｚ＿ａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]")},q.prototype=z.prototype={processComment:function(){var e,t,n,r,a,o=y.bottomRightStack,s=o[o.length-1];if(!(this.type===i.Program&&this.body.length>0)){if(y.trailingComments.length>0){for(n=[],r=y.trailingComments.length-1;r>=0;--r)(a=y.trailingComments[r]).range[0]>=this.range[1]&&(n.unshift(a),y.trailingComments.splice(r,1));y.trailingComments=[]}else s&&s.trailingComments&&s.trailingComments[0].range[0]>=this.range[1]&&(n=s.trailingComments,delete s.trailingComments);if(s)for(;s&&s.range[0]>=this.range[0];)e=s,s=o.pop();if(e)e.leadingComments&&e.leadingComments[e.leadingComments.length-1].range[1]<=this.range[0]&&(this.leadingComments=e.leadingComments,e.leadingComments=void 0);else if(y.leadingComments.length>0)for(t=[],r=y.leadingComments.length-1;r>=0;--r)(a=y.leadingComments[r]).range[1]<=this.range[0]&&(t.unshift(a),y.leadingComments.splice(r,1));t&&t.length>0&&(this.leadingComments=t),n&&n.length>0&&(this.trailingComments=n),o.push(this)}},finish:function(){y.range&&(this.range[1]=f),y.loc&&(this.loc.end=new j,y.source&&(this.loc.source=y.source)),y.attachComment&&this.processComment()},finishArrayExpression:function(e){return this.type=i.ArrayExpression,this.elements=e,this.finish(),this},finishAssignmentExpression:function(e,t,n){return this.type=i.AssignmentExpression,this.operator=e,this.left=t,this.right=n,this.finish(),this},finishBinaryExpression:function(e,t,n){return this.type="||"===e||"&&"===e?i.LogicalExpression:i.BinaryExpression,this.operator=e,this.left=t,this.right=n,this.finish(),this},finishBlockStatement:function(e){return this.type=i.BlockStatement,this.body=e,this.finish(),this},finishBreakStatement:function(e){return this.type=i.BreakStatement,this.label=e,this.finish(),this},finishCallExpression:function(e,t){return this.type=i.CallExpression,this.callee=e,this.arguments=t,this.finish(),this},finishConditionalExpression:function(e,t,n){return this.type=i.ConditionalExpression,this.test=e,this.consequent=t,this.alternate=n,this.finish(),this},finishContinueStatement:function(e){return this.type=i.ContinueStatement,this.label=e,this.finish(),this},finishEmptyStatement:function(){return this.type=i.EmptyStatement,this.finish(),this},finishExpressionStatement:function(e){return this.type=i.ExpressionStatement,this.expression=e,this.finish(),this},finishForStatement:function(e,t,n,r){return this.type=i.ForStatement,this.init=e,this.test=t,this.update=n,this.body=r,this.finish(),this},finishForInStatement:function(e,t,n){return this.type=i.ForInStatement,this.left=e,this.right=t,this.body=n,this.each=!1,this.finish(),this},finishFunctionDeclaration:function(e,t,n,r){return this.type=i.FunctionDeclaration,this.id=e,this.params=t,this.defaults=n,this.body=r,this.rest=null,this.generator=!1,this.expression=!1,this.finish(),this},finishFunctionExpression:function(e,t,n,r){return this.type=i.FunctionExpression,this.id=e,this.params=t,this.defaults=n,this.body=r,this.rest=null,this.generator=!1,this.expression=!1,this.finish(),this},finishIdentifier:function(e){return this.type=i.Identifier,this.name=e,this.finish(),this},finishIfStatement:function(e,t,n){return this.type=i.IfStatement,this.test=e,this.consequent=t,this.alternate=n,this.finish(),this},finishLiteral:function(e){return this.type=i.Literal,this.value=e.value,this.raw=l.slice(e.start,e.end),e.regex&&(this.regex=e.regex),this.finish(),this},finishMemberExpression:function(e,t,n){return this.type=i.MemberExpression,this.computed="["===e,this.object=t,this.property=n,this.finish(),this},finishObjectExpression:function(e){return this.type=i.ObjectExpression,this.properties=e,this.finish(),this},finishPostfixExpression:function(e,t){return this.type=i.UpdateExpression,this.operator=e,this.argument=t,this.prefix=!1,this.finish(),this},finishProgram:function(e){return this.type=i.Program,this.body=e,this.finish(),this},finishProperty:function(e,t,n,r,a){return this.type=i.Property,this.key=t,this.value=n,this.kind=e,this.method=r,this.shorthand=a,this.finish(),this},finishReturnStatement:function(e){return this.type=i.ReturnStatement,this.argument=e,this.finish(),this},finishUnaryExpression:function(e,t){return this.type="++"===e||"--"===e?i.UpdateExpression:i.UnaryExpression,this.operator=e,this.argument=t,this.prefix=!0,this.finish(),this},finishVariableDeclaration:function(e,t){return this.type=i.VariableDeclaration,this.declarations=e,this.kind=t,this.finish(),this},finishVariableDeclarator:function(e,t){return this.type=i.VariableDeclarator,this.id=e,this.init=t,this.finish(),this}},e.version="2.0.0-dev",e.tokenize=function(e,n){var r;"string"==typeof e||e instanceof String||(e=String(e)),f=0,p=(l=e).length>0?1:0,m=0,h=l.length,d=null,g={allowIn:!0,labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1},y={},(n=n||{}).tokens=!0,y.tokens=[],y.tokenize=!0,y.openParenToken=-1,y.openCurlyToken=-1,y.range="boolean"==typeof n.range&&n.range,y.loc="boolean"==typeof n.loc&&n.loc,"boolean"==typeof n.comment&&n.comment&&(y.comments=[]),"boolean"==typeof n.tolerant&&n.tolerant&&(y.errors=[]);try{if(B(),d.type===t.EOF)return y.tokens;for(G();d.type!==t.EOF;)try{G()}catch(e){if(y.errors){y.errors.push(e);break}throw e}Fe(),r=y.tokens,void 0!==y.comments&&(r.comments=y.comments),void 0!==y.errors&&(r.errors=y.errors)}catch(e){throw e}finally{y={}}return r},e.parse=function(e,t){var n,r;r=String,"string"==typeof e||e instanceof String||(e=r(e)),f=0,p=(l=e).length>0?1:0,m=0,h=l.length,d=null,g={allowIn:!0,labelSet:{},parenthesisCount:0,inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1},y={},void 0!==t&&(y.range="boolean"==typeof t.range&&t.range,y.loc="boolean"==typeof t.loc&&t.loc,y.attachComment="boolean"==typeof t.attachComment&&t.attachComment,y.loc&&null!==t.source&&void 0!==t.source&&(y.source=r(t.source)),"boolean"==typeof t.tokens&&t.tokens&&(y.tokens=[]),"boolean"==typeof t.comment&&t.comment&&(y.comments=[]),"boolean"==typeof t.tolerant&&t.tolerant&&(y.errors=[]),y.attachComment&&(y.range=!0,y.comments=[],y.bottomRightStack=[],y.trailingComments=[],y.leadingComments=[]));try{n=Me(),void 0!==y.comments&&(n.comments=y.comments),void 0!==y.tokens&&(Fe(),n.tokens=y.tokens),void 0!==y.errors&&(n.errors=y.errors)}catch(e){throw e}finally{y={}}return n},e.Syntax=function(){var e,t={};for(e in"function"==typeof Object.create&&(t=Object.create(null)),i)i.hasOwnProperty(e)&&(t[e]=i[e]);return"function"==typeof Object.freeze&&Object.freeze(t),t}()})?r.apply(null,i):r)||(e.exports=a)}()},1933:function(e,t,n){var r,i;r=[n.dj.c(e.i),t,n(9),n(8),n(99),n(217),n(38)],void 0===(i=function(e,t,r,i,a,o){Object.defineProperty(t,"__esModule",{value:!0});var s=a.MapFromValues([["ar",function(){return new Promise((function(e,t){Promise.all([n.e(0),n.e(104)]).then(function(){var t=[n(2109)];e.apply(null,t)}.bind(this)).catch(t.bind(this))}))}],["ar-dz",function(){return new Promise((function(e,t){Promise.all([n.e(0),n.e(98)]).then(function(){var t=[n(2110)];e.apply(null,t)}.bind(this)).catch(t.bind(this))}))}],["ar-kw",function(){return new Promise((function(e,t){Promise.all([n.e(0),n.e(99)]).then(function(){var t=[n(2111)];e.apply(null,t)}.bind(this)).catch(t.bind(this))}))}],["ar-ly",function(){return new Promise((function(e,t){Promise.all([n.e(0),n.e(100)]).then(function(){var t=[n(2112)];e.apply(null,t)}.bind(this)).catch(t.bind(this))}))}],["ar-ma",function(){return new Promise((function(e,t){Promise.all([n.e(0),n.e(101)]).then(function(){var t=[n(2113)];e.apply(null,t)}.bind(this)).catch(t.bind(this))}))}],["ar-sa",function(){return new Promise((function(e,t){Promise.all([n.e(0),n.e(102)]).then(function(){var t=[n(2114)];e.apply(null,t)}.bind(this)).catch(t.bind(this))}))}],["ar-tn",function(){return new Promise((function(e,t){Promise.all([n.e(0),n.e(103)]).then(function(){var t=[n(2115)];e.apply(null,t)}.bind(this)).catch(t.bind(this))}))}],["bs",function(){return new Promise((function(e,t){Promise.all([n.e(0),n.e(105)]).then(function(){var t=[n(2116)];e.apply(null,t)}.bind(this)).catch(t.bind(this))}))}],["ca",function(){return new Promise((function(e,t){Promise.all([n.e(0),n.e(106)]).then(function(){var t=[n(2117)];e.apply(null,t)}.bind(this)).catch(t.bind(this))}))}],["cs",function(){return new Promise((function(e,t){Promise.all([n.e(0),n.e(107)]).then(function(){var t=[n(2118)];e.apply(null,t)}.bind(this)).catch(t.bind(this))}))}],["da",function(){return new Promise((function(e,t){Promise.all([n.e(0),n.e(108)]).then(function(){var t=[n(2119)];e.apply(null,t)}.bind(this)).catch(t.bind(this))}))}],["de",function(){return new Promise((function(e,t){Promise.all([n.e(0),n.e(111)]).then(function(){var t=[n(2120)];e.apply(null,t)}.bind(this)).catch(t.bind(this))}))}],["de-at",function(){return new Promise((function(e,t){Promise.all([n.e(0),n.e(109)]).then(function(){var t=[n(2121)];e.apply(null,t)}.bind(this)).catch(t.bind(this))}))}],["de-ch",function(){return new Promise((function(e,t){Promise.all([n.e(0),n.e(110)]).then(function(){var t=[n(2122)];e.apply(null,t)}.bind(this)).catch(t.bind(this))}))}],["el",function(){return new Promise((function(e,t){Promise.all([n.e(0),n.e(112)]).then(function(){var t=[n(2123)];e.apply(null,t)}.bind(this)).catch(t.bind(this))}))}],["en-au",function(){return new Promise((function(e,t){Promise.all([n.e(0),n.e(113)]).then(function(){var t=[n(2124)];e.apply(null,t)}.bind(this)).catch(t.bind(this))}))}],["en-ca",function(){return new Promise((function(e,t){Promise.all([n.e(0),n.e(114)]).then(function(){var t=[n(2125)];e.apply(null,t)}.bind(this)).catch(t.bind(this))}))}],["en-gb",function(){return new Promise((function(e,t){Promise.all([n.e(0),n.e(115)]).then(function(){var t=[n(2126)];e.apply(null,t)}.bind(this)).catch(t.bind(this))}))}],["en-ie",function(){return new Promise((function(e,t){Promise.all([n.e(0),n.e(116)]).then(function(){var t=[n(2127)];e.apply(null,t)}.bind(this)).catch(t.bind(this))}))}],["en-il",function(){return new Promise((function(e,t){Promise.all([n.e(0),n.e(117)]).then(function(){var t=[n(2128)];e.apply(null,t)}.bind(this)).catch(t.bind(this))}))}],["en-nz",function(){return new Promise((function(e,t){Promise.all([n.e(0),n.e(118)]).then(function(){var t=[n(2129)];e.apply(null,t)}.bind(this)).catch(t.bind(this))}))}],["es",function(){return new Promise((function(e,t){Promise.all([n.e(0),n.e(121)]).then(function(){var t=[n(2130)];e.apply(null,t)}.bind(this)).catch(t.bind(this))}))}],["es-do",function(){return new Promise((function(e,t){Promise.all([n.e(0),n.e(119)]).then(function(){var t=[n(2131)];e.apply(null,t)}.bind(this)).catch(t.bind(this))}))}],["es-us",function(){return new Promise((function(e,t){Promise.all([n.e(0),n.e(120)]).then(function(){var t=[n(2132)];e.apply(null,t)}.bind(this)).catch(t.bind(this))}))}],["et",function(){return new Promise((function(e,t){Promise.all([n.e(0),n.e(122)]).then(function(){var t=[n(2133)];e.apply(null,t)}.bind(this)).catch(t.bind(this))}))}],["fi",function(){return new Promise((function(e,t){Promise.all([n.e(0),n.e(123)]).then(function(){var t=[n(2134)];e.apply(null,t)}.bind(this)).catch(t.bind(this))}))}],["fr",function(){return new Promise((function(e,t){Promise.all([n.e(0),n.e(126)]).then(function(){var t=[n(2135)];e.apply(null,t)}.bind(this)).catch(t.bind(this))}))}],["fr-ca",function(){return new Promise((function(e,t){Promise.all([n.e(0),n.e(124)]).then(function(){var t=[n(2136)];e.apply(null,t)}.bind(this)).catch(t.bind(this))}))}],["fr-ch",function(){return new Promise((function(e,t){Promise.all([n.e(0),n.e(125)]).then(function(){var t=[n(2137)];e.apply(null,t)}.bind(this)).catch(t.bind(this))}))}],["he",function(){return new Promise((function(e,t){Promise.all([n.e(0),n.e(127)]).then(function(){var t=[n(2138)];e.apply(null,t)}.bind(this)).catch(t.bind(this))}))}],["hr",function(){return new Promise((function(e,t){Promise.all([n.e(0),n.e(128)]).then(function(){var t=[n(2139)];e.apply(null,t)}.bind(this)).catch(t.bind(this))}))}],["hu",function(){return new Promise((function(e,t){Promise.all([n.e(0),n.e(129)]).then(function(){var t=[n(2140)];e.apply(null,t)}.bind(this)).catch(t.bind(this))}))}],["id",function(){return new Promise((function(e,t){Promise.all([n.e(0),n.e(130)]).then(function(){var t=[n(2141)];e.apply(null,t)}.bind(this)).catch(t.bind(this))}))}],["it",function(){return new Promise((function(e,t){Promise.all([n.e(0),n.e(132)]).then(function(){var t=[n(2142)];e.apply(null,t)}.bind(this)).catch(t.bind(this))}))}],["it-ch",function(){return new Promise((function(e,t){Promise.all([n.e(0),n.e(131)]).then(function(){var t=[n(2143)];e.apply(null,t)}.bind(this)).catch(t.bind(this))}))}],["ja",function(){return new Promise((function(e,t){Promise.all([n.e(0),n.e(133)]).then(function(){var t=[n(2144)];e.apply(null,t)}.bind(this)).catch(t.bind(this))}))}],["ko",function(){return new Promise((function(e,t){Promise.all([n.e(0),n.e(134)]).then(function(){var t=[n(2145)];e.apply(null,t)}.bind(this)).catch(t.bind(this))}))}],["lt",function(){return new Promise((function(e,t){Promise.all([n.e(0),n.e(135)]).then(function(){var t=[n(2146)];e.apply(null,t)}.bind(this)).catch(t.bind(this))}))}],["lv",function(){return new Promise((function(e,t){Promise.all([n.e(0),n.e(136)]).then(function(){var t=[n(2147)];e.apply(null,t)}.bind(this)).catch(t.bind(this))}))}],["nb",function(){return new Promise((function(e,t){Promise.all([n.e(0),n.e(137)]).then(function(){var t=[n(2148)];e.apply(null,t)}.bind(this)).catch(t.bind(this))}))}],["nl",function(){return new Promise((function(e,t){Promise.all([n.e(0),n.e(139)]).then(function(){var t=[n(2149)];e.apply(null,t)}.bind(this)).catch(t.bind(this))}))}],["nl-be",function(){return new Promise((function(e,t){Promise.all([n.e(0),n.e(138)]).then(function(){var t=[n(2150)];e.apply(null,t)}.bind(this)).catch(t.bind(this))}))}],["pl",function(){return new Promise((function(e,t){Promise.all([n.e(0),n.e(140)]).then(function(){var t=[n(2151)];e.apply(null,t)}.bind(this)).catch(t.bind(this))}))}],["pt",function(){return new Promise((function(e,t){Promise.all([n.e(0),n.e(142)]).then(function(){var t=[n(2152)];e.apply(null,t)}.bind(this)).catch(t.bind(this))}))}],["pt-br",function(){return new Promise((function(e,t){Promise.all([n.e(0),n.e(141)]).then(function(){var t=[n(2153)];e.apply(null,t)}.bind(this)).catch(t.bind(this))}))}],["ro",function(){return new Promise((function(e,t){Promise.all([n.e(0),n.e(143)]).then(function(){var t=[n(2154)];e.apply(null,t)}.bind(this)).catch(t.bind(this))}))}],["ru",function(){return new Promise((function(e,t){Promise.all([n.e(0),n.e(144)]).then(function(){var t=[n(2155)];e.apply(null,t)}.bind(this)).catch(t.bind(this))}))}],["sl",function(){return new Promise((function(e,t){Promise.all([n.e(0),n.e(145)]).then(function(){var t=[n(2156)];e.apply(null,t)}.bind(this)).catch(t.bind(this))}))}],["sr",function(){return new Promise((function(e,t){Promise.all([n.e(0),n.e(147)]).then(function(){var t=[n(2157)];e.apply(null,t)}.bind(this)).catch(t.bind(this))}))}],["sr-cyrl",function(){return new Promise((function(e,t){Promise.all([n.e(0),n.e(146)]).then(function(){var t=[n(2158)];e.apply(null,t)}.bind(this)).catch(t.bind(this))}))}],["sv",function(){return new Promise((function(e,t){Promise.all([n.e(0),n.e(148)]).then(function(){var t=[n(2159)];e.apply(null,t)}.bind(this)).catch(t.bind(this))}))}],["th",function(){return new Promise((function(e,t){Promise.all([n.e(0),n.e(149)]).then(function(){var t=[n(2160)];e.apply(null,t)}.bind(this)).catch(t.bind(this))}))}],["tr",function(){return new Promise((function(e,t){Promise.all([n.e(0),n.e(150)]).then(function(){var t=[n(2161)];e.apply(null,t)}.bind(this)).catch(t.bind(this))}))}],["uk",function(){return new Promise((function(e,t){Promise.all([n.e(0),n.e(151)]).then(function(){var t=[n(2162)];e.apply(null,t)}.bind(this)).catch(t.bind(this))}))}],["vi",function(){return new Promise((function(e,t){Promise.all([n.e(0),n.e(152)]).then(function(){var t=[n(2163)];e.apply(null,t)}.bind(this)).catch(t.bind(this))}))}],["zh-cn",function(){return new Promise((function(e,t){Promise.all([n.e(0),n.e(153)]).then(function(){var t=[n(2164)];e.apply(null,t)}.bind(this)).catch(t.bind(this))}))}],["zh-hk",function(){return new Promise((function(e,t){Promise.all([n.e(0),n.e(154)]).then(function(){var t=[n(2165)];e.apply(null,t)}.bind(this)).catch(t.bind(this))}))}],["zh-tw",function(){return new Promise((function(e,t){Promise.all([n.e(0),n.e(155)]).then(function(){var t=[n(2166)];e.apply(null,t)}.bind(this)).catch(t.bind(this))}))}]]);t.loadMoment=function(e){return void 0===e&&(e=o.getLocale()),r(this,void 0,void 0,(function(){var t,r,a;return i(this,(function(i){switch(i.label){case 0:return[4,new Promise((function(e,t){n.e(0).then(function(){var t=[n(1065)];e.apply(null,t)}.bind(this)).catch(t.bind(this))}))];case 1:return t=i.sent(),(r=s.has(e))||(a=e.split("-")).length>1&&s.has(a[0])&&(e=a[0],r=!0),r?[4,s.get(e)()]:[3,3];case 2:return i.sent(),[3,4];case 3:e="en",i.label=4;case 4:return e!==t.locale()&&t.locale(e),[2,t]}}))}))}}.apply(null,r))||(e.exports=i)}}]);